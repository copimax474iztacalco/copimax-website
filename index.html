<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  <!-- SEO Meta Tags -->
  <title>COPIMAX - Centro de Copias e Impresiones Iztacalco | Desde $0.35</title>
      <meta name="description" content="¬øNecesitas copias en CDMX? Imprenta centro de copiado COPIMAX Iztacalco: fotocopias econ√≥micas, impresi√≥n por volumen y servicio express. ¬°Vis√≠tanos!">
  <meta name="keywords" content="copias iztacalco, impresiones iztacalco, centro de copias, engargolado, impresi√≥n color, tesis universitaria, men√∫s restaurante, entrega mismo d√≠a">
  <meta name="author" content="COPIMAX">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://copimax.store">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
      <meta property="og:url" content="https://copimax.store">
  <meta property="og:title" content="COPIMAX - Centro de Copias e Impresiones Iztacalco">
      <meta property="og:description" content="Copimax CDMX: imprenta centro de copiado en Iztacalco. Copias desde $0.35, impresi√≥n a color, engargolados y papeler√≠a. R√°pido, econ√≥mico y con entrega el mismo d√≠a.">
  <meta property="og:image" content="https://images.unsplash.com/photo-1756066685329-16873485da1d?q=80&w=1200&auto=format&fit=crop">
  <meta property="og:site_name" content="COPIMAX">
  <meta property="og:locale" content="es_MX">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
      <meta property="twitter:url" content="https://copimax.store">
  <meta property="twitter:title" content="COPIMAX - Centro de Copias e Impresiones Iztacalco">
      <meta property="twitter:description" content="Copimax CDMX: imprenta centro de copiado en Iztacalco. Copias desde $0.35, impresi√≥n a color, engargolados y papeler√≠a. R√°pido, econ√≥mico y con entrega el mismo d√≠a.">
  <meta property="twitter:image" content="https://images.unsplash.com/photo-1756066685329-16873485da1d?q=80&w=1200&auto=format&fit=crop">
  
  <!-- Performance & Cache -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://images.unsplash.com">
  <link rel="dns-prefetch" href="https://wa.me">
  <link rel="dns-prefetch" href="https://maps.googleapis.com">
  
  <!-- Fonts with display=swap for better performance -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
  <link rel="apple-touch-icon" href="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
  <link rel="icon" type="image/png" sizes="32x32" href="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
  <link rel="icon" type="image/png" sizes="16x16" href="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
  <link rel="shortcut icon" href="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GGQPKN977H"></script>
  <script>
    console.log('üöÄ Script principale caricato...');
    
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GGQPKN977H');
    
    // Event tracking per bottoni importanti
    gtag('event', 'click', {
      'event_category': 'CTA',
      'event_label': 'WhatsApp Button'
    });
  </script>
  
  <!-- Facebook Pixel -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window,document,
    'script', 'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '997094852495847');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=997094852495847&ev=PageView&noscript=1"
  /></noscript>
  
  <!-- Microsoft Clarity -->
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "t4iy5aqh55");
  </script>
  
  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "COPIMAX",
    "description": "Imprenta centro de copias e impresiones en Iztacalco con 25+ a√±os de experiencia",
    "url": "https://copimax.store",
    "telephone": "+525540219892",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Vainilla 474, Iztacalco",
      "addressRegion": "CDMX",
      "addressCountry": "MX"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "19.4326",
      "longitude": "-99.1332"
    },
    "openingHours": "Mo-Fr 08:30-18:00, Sa-Su 08:30-14:00",
    "priceRange": "$",
    "image": "https://images.unsplash.com/photo-1756066685329-16873485da1d?q=80&w=1200&auto=format&fit=crop",
    "sameAs": [
      "https://wa.me/525540219892",
      "https://www.facebook.com/profile.php?viewas=100000686899395&id=61576341796622",
      "https://www.instagram.com/copimax_upiicsa/",
      "https://www.tiktok.com/@copimax_upiicsa"
    ],
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Servicios de Impresi√≥n",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Copias Blanco y Negro",
            "description": "Copias desde $0.35"
          },
          "price": "0.35",
          "priceCurrency": "MXN"
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Impresi√≥n a Color",
            "description": "Impresi√≥n color desde $5"
          },
          "price": "5.00",
          "priceCurrency": "MXN"
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Engargolado",
            "description": "Encuadernaci√≥n profesional"
          },
          "price": "20.00",
          "priceCurrency": "MXN"
        }
      ]
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.9",
      "reviewCount": "150"
    }
  }
  </script>
  
  <!-- EmailJS SDK -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script type="text/javascript">
    (function() {
      // Inizializza EmailJS con le tue credenziali
      emailjs.init("i8tMu-oBEYCg4e7my");
    })();
  </script>
  
  <!-- Google Analytics & Conversion Tracking -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'GA_MEASUREMENT_ID', {
      'custom_map': {
        'dimension1': 'service_type',
        'dimension2': 'order_value',
        'dimension3': 'delivery_method'
      }
    });
    
    // Conversion tracking functions
    function trackWhatsAppClick(service, value) {
      gtag('event', 'whatsapp_click', {
        'event_category': 'engagement',
        'event_label': service,
        'value': value,
        'custom_parameter_1': service,
        'custom_parameter_2': value
      });
    }
    
    function trackOrderStart(service, value) {
      gtag('event', 'begin_checkout', {
        'event_category': 'ecommerce',
        'event_label': service,
        'value': value,
        'currency': 'MXN',
        'items': [{
          'item_name': service,
          'price': value,
          'quantity': 1
        }]
      });
    }
    
    function trackOrderComplete(orderData) {
      gtag('event', 'purchase', {
        'event_category': 'ecommerce',
        'transaction_id': 'COPIMAX_' + Date.now(),
        'value': orderData.total,
        'currency': 'MXN',
        'tax': 0,
        'shipping': orderData.delivery?.method === 'pickup' ? 0 : 50,
        'items': [{
          'item_name': `${orderData.type} ${orderData.color}`,
          'price': orderData.total,
          'quantity': 1
        }]
      });
    }
  </script>
  
  <style>
    /* Critical CSS - Above the fold optimizations */
    *{margin:0;padding:0;box-sizing:border-box}
    
    /* Prevenzione scroll infinito e overflow */
    html {
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    
    body {
      overflow-x: hidden;
      position: relative;
    }
    
    /* Assicura che tutti gli elementi rispettino i limiti del viewport */
    * {
      max-width: 100%;
    }
    
    /* Preload critical images */
    body::before {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      overflow: hidden;
      z-index: -1;
      background-image: url('https://images.unsplash.com/photo-1756066685329-16873485da1d?q=80&w=1200&auto=format&fit=crop');
    }
   :root{
  --primary1:#000000;
  --primary2:#474747;
  --cta1:#b5ff00;
  --cta2:#ddff88;
  --text:#2d3748;
  --muted:#666666;
  --card:#ffffff;
  --bg:#b5ff00;
  --gold:#ffffff; /* CAMBIATO: era #ddff88 ora bianco */
  --ok:#b5ff00;
  --whatsapp:#25D366;
  --radius:10px;
    }
    html, body {
      font-family:'Inter',sans-serif;
      line-height:1.6;
      color:#333;
      overflow-x:hidden;
      background:#fff;
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100vh;
    }
    
    body {
      position: relative;
    }
    
    a{text-decoration:none}

    /* Header Styles - Desktop - Standardizzato */
    header{
      position:sticky;top:0;z-index:1000;background:linear-gradient(135deg,var(--primary1),var(--primary2));
      backdrop-filter:blur(10px);min-height:80px;display:flex;align-items:center
    }
    
    .nav{
      max-width:1200px;margin:0 auto;padding:16px 24px;
      display:flex;align-items:center;justify-content:space-between;width:100%
    }
    
    .logo{
      display:flex;align-items:center;height:50px;cursor:pointer;
      transition:transform 0.3s ease;flex-shrink:0
    }
    
    .logo:hover{transform:scale(1.05)}
    
    .logo img{
      height:50px;border-radius:50%;object-fit:cover
    }
    
    .contact-header{
      display:flex;gap:12px;align-items:center;flex-shrink:0
    }
    
    .contact-header span{
      color:#fff !important;font-weight:600;font-size:0.9rem
    }
    
    .whatsapp-btn{
      background:var(--whatsapp);color:#fff;padding:.5rem 1rem;border-radius:999px;
      font-weight:600;transition:transform .2s,box-shadow .2s;flex-shrink:0
    }
    
    .whatsapp-btn:hover{
      transform:translateY(-2px);box-shadow:0 6px 18px rgba(37,211,102,.35)
    }
    
    /* Desktop - Header sempre consistente */
    @media (min-width: 769px) {
      header {
        min-height: 80px;
        padding: 0;
      }
      
      .nav {
        padding: 16px 24px;
        min-height: 80px;
      }
      
      .contact-header span {
        color: #fff !important;
        font-size: 0.9rem;
      }
      
      .hero {
        padding: 100px 0 100px;
      }
    }
    
    /* Tablet - Breakpoint intermedio ottimizzato */
    @media (min-width: 769px) and (max-width: 1024px) {
      /* Hero ottimizzato per tablet */
      .hero-main {
        gap: 60px; /* Ridotto da 80px per tablet */
      }
      
      .hero h1 {
        font-size: 3.5rem; /* Ridotto da 4rem per tablet */
      }
      
      .hero-subtitle {
        font-size: 1.3rem; /* Ridotto da 1.5rem */
      }
      
      .hero-description {
        font-size: 1rem; /* Ridotto da 1.05rem */
      }
      
      /* Logo hero ottimizzato per tablet */
      .hero-logo img {
        height: 140px; /* Ridotto da 160px per tablet */
      }
      
      /* Stats ottimizzate per tablet */
      .hero-stats {
        gap: 30px; /* Ridotto da 40px */
        margin-top: 30px;
        margin-bottom: 30px;
      }
      
      /* Video Reels ottimizzato per tablet */
      .reels-grid {
        grid-template-columns: repeat(3, 1fr); /* Da 4 a 3 colonne */
        gap: 20px; /* Ridotto da 24px */
      }
      
      /* Services & Packages ottimizzato per tablet */
      .services-packages-grid {
        gap: 32px; /* Ridotto da 48px */
      }
      
      .services-section, .packages-section {
        padding: 28px; /* Ridotto da 32px */
      }
      
      /* Calculator ottimizzato per tablet */
      .calculator-card {
        padding: 28px; /* Ridotto da 32px */
        max-width: 600px; /* Ridotto da 680px */
      }
      
      .calc-hero h2 {
        font-size: 2.2rem; /* Ridotto da 2.5rem */
      }
      
      .calc-hero p {
        font-size: 1.1rem; /* Ridotto da 1.2rem */
      }
      
      /* Order Page ottimizzato per tablet */
      .order-page {
        padding: 60px 0 80px; /* Ridotto padding */
      }
      
      .order-container {
        padding: 0 20px; /* Ridotto da 24px */
      }
      
      /* Gallery ottimizzata per tablet */
      .gallery-container {
        padding: 20px; /* Ridotto da 24px */
      }
      
      .gallery-item {
        min-width: 280px; /* Ridotto da 320px */
      }
      
      /* Books Section ottimizzata per tablet */
      .books-grid-container {
        padding: 0 20px; /* Ridotto da 24px */
      }
      
      .books-grid {
        grid-template-columns: repeat(3, 1fr); /* Da 4 a 3 colonne */
        gap: 20px; /* Ridotto da 24px */
      }
      
      /* Legal Section ottimizzata per tablet */
      .legal-grid {
        grid-template-columns: repeat(2, 1fr); /* Da 3 a 2 colonne */
        gap: 24px; /* Ridotto da 32px */
      }
    }
    
    /* ===== NUOVO MENU MOBILE SLIDE LATERALE ===== */
    
    /* Pulsante hamburger mobile */
    .mobile-nav-button {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: rgba(0,0,0,0.9);
      border: none;
      border-radius: 50%;
      cursor: pointer;
      z-index: 1001;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }
    
    .hamburger-line {
      width: 20px;
      height: 2px;
      background: #fff;
      border-radius: 1px;
      transition: all 0.3s ease;
    }
    
    /* Menu slide laterale */
    .mobile-slide-menu {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100vh;
      background: #fff;
      z-index: 1002;
      transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 2px 0 20px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
    }
    
    .mobile-slide-menu.open {
      left: 0;
    }
    
    /* Header del menu mobile */
    .slide-menu-header {
      background: linear-gradient(135deg, var(--primary1), var(--primary2));
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #fff;
    }
    
    .mobile-logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
    }
    
    .close-slide-menu {
      background: none;
      border: none;
      color: #fff;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .close-slide-menu:hover {
      background: rgba(255,255,255,0.2);
    }
    
    /* Navigazione del menu mobile */
    .slide-menu-nav {
      flex: 1;
      padding: 20px 0;
      display: flex;
      flex-direction: column;
    }
    
    .slide-menu-nav a {
      color: #333;
      text-decoration: none;
      padding: 16px 20px;
      font-size: 1.1rem;
      font-weight: 500;
      border-bottom: 1px solid #f0f0f0;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .slide-menu-nav a:hover {
      background: #f8f9fa;
      color: var(--primary1);
      padding-left: 25px;
    }
    
    /* Footer del menu mobile */
    .slide-menu-footer {
      padding: 20px;
      border-top: 1px solid #f0f0f0;
      background: #f8f9fa;
    }
    
    .mobile-contact {
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: center;
      text-align: center;
    }
    
    .mobile-contact span {
      color: #666;
      font-size: 0.9rem;
    }
    
    .mobile-contact a {
      background: var(--whatsapp);
      color: #fff;
      padding: 10px 20px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .mobile-contact a:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(37,211,102,0.3);
    }
    
    /* Overlay scuro quando menu aperto */
    .mobile-menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .mobile-menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    /* Mostra menu mobile solo su mobile */
    @media (max-width: 768px) {
      .mobile-nav-button {
        display: flex;
      }
      
      /* Nascondi header desktop su mobile */
      header {
        display: none !important;
      }
      
      /* Aggiungi padding-top per compensare header nascosto */
      .hero {
        padding-top: 20px;
      }
      
      /* Centra testo hero su mobile */
      .hero-left {
        text-align: center;
        margin: 0 auto;
        max-width: 100%;
        padding: 0 20px;
      }
      
      .hero h1 {
        text-align: center;
        margin: 0 auto 1.4rem auto;
      }
      
      .hero-description {
        text-align: center;
        margin: 0 auto 2rem auto;
      }
    }

    /* Menu Principale Elegante in Stile Apple - Centrato */
    .main-navigation{
      display:flex;gap:0;align-items:center;background:rgba(255,255,255,0.08);
      border-radius:25px;padding:4px;backdrop-filter:blur(20px);
      border:1px solid rgba(255,255,255,0.1);margin:0 auto;flex-shrink:0
    }
    
    .nav-link{
      color:#fff;text-decoration:none;font-weight:500;font-size:0.95rem;
      padding:12px 20px;border-radius:20px;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position:relative;white-space:nowrap;letter-spacing:0.02em
    }
    
    .nav-link:hover{
      background:rgba(255,255,255,0.15);transform:translateY(-1px);
      color:#fff
    }
    
    .nav-link.active{
      background:rgba(255,255,255,0.2);color:#fff;font-weight:600;
      box-shadow:0 4px 12px rgba(0,0,0,0.1)
    }
    
    /* Effetto hover sottile */
    .nav-link::after{
      content:'';position:absolute;bottom:8px;left:50%;width:0;height:2px;
      background:var(--cta1);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      transform:translateX(-50%);border-radius:1px
    }
    
    .nav-link:hover::after{
      width:20px
    }
    
    .nav-link.active::after{
      width:30px;background:var(--cta1)
    }
    







    /* Hero - Padding ridotto per desktop */
    .hero{
      background:linear-gradient(135deg,var(--primary1),var(--primary2));color:#fff;padding:100px 0 100px;position:relative;overflow:hidden
    }
    .hero::before{content:"";position:absolute;inset:0;opacity:.15;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><defs><pattern id="d" width="200" height="200" patternUnits="userSpaceOnUse"><circle cx="30" cy="30" r="2" fill="white" opacity=".15"/><circle cx="150" cy="150" r="2" fill="white" opacity=".15"/></pattern></defs><rect width="200" height="200" fill="url(%23d)"/></svg>')}
    .hero-content{max-width:1400px;margin:0 auto;padding:0 24px;position:relative;z-index:2}
    
    /* Hero Layout - Completely Redesigned */
    .hero-main {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 80px;
      margin-bottom: 80px;
      position: relative;
    }
    
    .hero-left {
      flex: 1;
      max-width: 600px;
      position: relative;
      z-index: 3;
    }
    
    .hero-logo {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .hero-logo img {
      height: 80px;
      width: auto;
      border-radius: 50%;
      filter: brightness(1.1);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }
    
    /* Logo hero pi√π grande solo su desktop */
    @media (min-width: 769px) {
      .hero-logo img {
        height: 160px; /* Aumentato del 100% da 80px a 160px */
        width: auto;
      }
      
      /* Nascondi menu mobile su desktop */
      .mobile-nav-button {
        display: none !important;
      }
      
      .mobile-slide-menu {
        display: none !important;
      }
    }
    
    .hero-right {
      flex: 1;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Typography - Premium */
    .hero h1 {
      font-size: 4rem;
      font-weight: 900;
      line-height: 1.08;
      margin-bottom: 1.4rem;
      background: linear-gradient(135deg, #b5ff00 0%, #ddff88 50%, #ffffff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.02em;
      position: relative;
      max-width: 12ch;
    }
    
    .hero h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 80px;
      height: 4px;
      background: linear-gradient(90deg, #b5ff00, #ddff88);
      border-radius: 2px;
    }
    
    .hero-subtitle {
      font-size: 1.5rem;
      line-height: 1.6;
      margin-bottom: 2rem;
      opacity: 0.95;
      font-weight: 400;
      max-width: 500px;
    }
    
    .hero-description {
      font-size: 1.05rem;
      line-height: 1.6;
      margin-bottom: 2rem;
      opacity: 0.9;
      font-weight: 400;
      max-width: 42ch;
      color: rgba(255, 255, 255, 0.9);
    }
    
    .hero-description a {
      color: var(--cta1);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      border-bottom: 2px solid transparent;
    }
    
    .hero-description a:hover {
      color: var(--cta2);
      border-bottom-color: var(--cta2);
      transform: translateY(-1px);
    }
    
    /* Photo Container - Redesigned */
    .hero-photo-container {
      position: relative;
      width: 100%;
      height: 600px;
      border-radius: 40px;
      overflow: hidden;
      box-shadow: 
        0 40px 100px rgba(0,0,0,0.5),
        0 0 0 1px rgba(181,255,0,0.2);
      background: linear-gradient(135deg, rgba(181,255,0,0.1), rgba(221,255,136,0.05));
    }
    
    .hero-photo-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .hero-photo-container:hover img {
      transform: scale(1.08) rotate(1deg);
    }
    
    /* Floating Elements */
    .floating-card {
      position: absolute;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      animation: float 6s ease-in-out infinite;
    }
    
    .floating-card:nth-child(1) {
      top: 20px;
      right: -30px;
      animation-delay: 0s;
    }
    
    .floating-card:nth-child(2) {
      bottom: 40px;
      left: -40px;
      animation-delay: 2s;
    }
    
    .floating-card:nth-child(3) {
      top: 50%;
      right: -20px;
      animation-delay: 4s;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(2deg); }
    }
    
    /* Stats Section - Integrated */
    .hero-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
      margin-top: 40px;
      margin-bottom: 40px;
      padding: 30px 0;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .stat-item {
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .stat-item:hover {
      transform: translateY(-8px);
    }
    
    .stat-number {
      font-size: 3.5rem;
      font-weight: 900;
      background: linear-gradient(135deg, #b5ff00 0%, #ddff88 50%, #ffffff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
      display: block;
    }
    
    .stat-label {
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.8;
      font-weight: 600;
    }
    
    /* CTA Buttons - Premium */
    .hero-cta {
      display: flex;
      gap: 24px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .cta-primary {
      background: linear-gradient(135deg, var(--cta1), var(--cta2));
      color: #000000;
      padding: 1.5rem 3rem;
      border-radius: 50px;
      font-weight: 800;
      display: inline-block;
      text-decoration: none;
      box-shadow: 0 20px 40px rgba(181,255,0,0.3);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      position: relative;
      overflow: hidden;
    }
    
    .cta-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    
    .cta-primary:hover::before {
      left: 100%;
    }
    
    .cta-primary:hover {
      transform: translateY(-5px);
      box-shadow: 0 30px 60px rgba(181,255,0,0.4);
    }
    
    .cta-primary:active {
      transform: translateY(-2px);
    }
    
    /* Stili per pulsanti di conferma ordine */
    .cta-primary.disabled {
      background: #9ca3af !important;
      color: #6b7280 !important;
      cursor: not-allowed !important;
      transform: none !important;
      box-shadow: none !important;
      position: relative;
      overflow: hidden;
    }
    
    .cta-primary.disabled:hover {
      transform: none !important;
      box-shadow: none !important;
    }
    
    .cta-primary.disabled::after {
      content: '‚è≥';
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      animation: pulse 1.5s infinite;
    }
    
    .cta-primary.active {
      background: linear-gradient(135deg, #10b981, #059669) !important;
      color: white !important;
      box-shadow: 0 20px 40px rgba(16, 185, 129, 0.4) !important;
      position: relative;
      overflow: hidden;
    }
    
    .cta-primary.active::after {
      content: '‚úÖ';
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      animation: bounce 0.6s ease-in-out;
    }
    
    .cta-primary.active:hover {
      transform: translateY(-5px) !important;
      box-shadow: 0 30px 60px rgba(16, 185, 129, 0.5) !important;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    @keyframes bounce {
      0%, 20%, 53%, 80%, 100% { transform: translateY(-50%) scale(1); }
      40%, 43% { transform: translateY(-50%) scale(1.1); }
      70% { transform: translateY(-50%) scale(1.05); }
      90% { transform: translateY(-50%) scale(1.02); }
    }
    
    /* Animazione per evidenziare sezioni quando si clicca sui link */
    @keyframes highlightSection {
      0% { 
        box-shadow: 0 0 0 0 rgba(181, 255, 0, 0.7);
        transform: scale(1);
      }
      50% { 
        box-shadow: 0 0 0 20px rgba(181, 255, 0, 0.3);
        transform: scale(1.02);
      }
      100% { 
        box-shadow: 0 0 0 0 rgba(181, 255, 0, 0);
        transform: scale(1);
      }
    }
    
    /* Responsive */
    @media(max-width:1200px) {
      .hero-main {
        flex-direction: column;
        text-align: center;
        gap: 60px;
      }
      
      .hero-left {
        max-width: 100%;
      }
      
      .hero h1 {
        font-size: 4rem;
      }
      
      .hero h1::after {
        left: 50%;
        transform: translateX(-50%);
      }
      
      .hero-subtitle {
        margin: 0 auto 3rem auto;
      }
      
      .hero-photo-container {
        height: 500px;
        width: 100%;
        max-width: 600px;
      }
      
      .floating-card {
        display: none;
      }
    }
    
    @media(max-width:768px) {
      .hero {
        padding: 100px 0 80px;
      }
      
      .hero h1 {font-size: 2.4rem;max-width: 16ch}
      
      .hero-subtitle {
        font-size: 1.2rem;
      }
      
      .hero-description {font-size: .98rem;margin-bottom: 1.5rem;max-width: 34ch}
      
      /* Controlli recensioni responsive */
      .reviews-controls {
        margin-top: 20px;
        gap: 15px;
      }
      
      .review-nav-btn {
        width: 35px;
        height: 35px;
        font-size: 1rem;
      }
      
      .hero-stats {
        grid-template-columns: 1fr;
        gap: 40px;
      }
      
      .stat-number {
        font-size: 2.5rem;
      }
      
      .hero-cta {
        flex-direction: column;
        align-items: center;
      }
      
      .cta-primary {
        width: 100%;
        max-width: 300px;
        text-align: center;
      }
      
      /* Menu Responsive */
      .main-menu{
        display:none
      }
      
      .result-header {
        flex-direction: column;
        gap: 8px;
        align-items: center;
      }
      
      .scarcity-badge {
        font-size: 0.7rem;
        padding: 4px 8px;
      }
      
      .calc-total {
        font-size: 2.5rem;
      }
      
      .calc-actions {
        grid-template-columns: 1fr;
        gap: 12px;
      }
      
      .cta-whatsapp, .cta-online, .cta-call {
        padding: 14px 20px;
        font-size: 1rem;
      }
      
      .quantity-examples {
        flex-direction: column;
        gap: 6px;
        text-align: center;
        font-size: 0.8rem;
      }
    }

    /* Containers */
    .container{max-width:1200px;margin:0 auto;padding:0 24px}
    .section-title{text-align:center;font-size:2.3rem;font-weight:800;margin:56px 0 24px;color:var(--text)}

    /* Video Reels Section - COPIMAX in Action */
    .video-reels-section{background:var(--bg);padding:64px 0}
    .reels-header{text-align:center;margin-bottom:48px}
    .reels-subtitle{color:var(--muted);font-size:1.1rem;margin-bottom:0}
    
    .reels-container{max-width:1200px;margin:0 auto}
    .reels-grid{display:grid;grid-template-columns:repeat(4, 1fr);gap:24px;align-items:start}
    
    .video-reel-card{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 15px 40px rgba(0,0,0,0.08);border:1px solid rgba(255,255,255,0.2);transition:all 0.3s ease;aspect-ratio:9/16}
    .video-reel-card:hover{transform:translateY(-4px);box-shadow:0 20px 50px rgba(0,0,0,0.15)}
    
    .video-container{position:relative;width:100%;height:100%;background:#000}
    .reel-video{width:100%;height:100%;border:none;display:block}
    
    .video-overlay{position:absolute;inset:0;background:linear-gradient(180deg,transparent 0%,rgba(0,0,0,0.7) 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;color:#fff;opacity:0.8;transition:opacity 0.3s ease;cursor:pointer;pointer-events:none}
    .video-reel-card:hover .video-overlay{opacity:0.2}
    .video-reel-card .play-button{pointer-events:auto;background:rgba(0,0,0,0.7);border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;transition:all 0.3s ease}
    .video-reel-card .play-button:hover{background:rgba(0,0,0,0.9);transform:scale(1.1)}
    
    .play-button{font-size:2rem;margin-bottom:12px;text-align:center}
    .video-title{font-size:1.1rem;font-weight:700;margin-bottom:6px;text-align:center}
    .video-description{font-size:0.9rem;text-align:center;opacity:0.9;line-height:1.4}
    
    /* Mobile - Horizontal Scroll */
    @media(max-width:768px){
      .video-reels-section{padding:32px 0}
      .reels-container{max-width:100%;padding:0 20px}
      .reels-grid{grid-template-columns:none;display:flex;gap:16px;overflow-x:auto;scroll-snap-type:x mandatory;padding:0 20px 16px 20px;scroll-padding:0 20px}
      .reels-grid::-webkit-scrollbar{height:6px}
      .reels-grid::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:999px}
      .video-reel-card{min-width:280px;scroll-snap-align:center;flex-shrink:0;margin:0 8px}
      .video-overlay{padding:16px}
      .video-title{font-size:1rem}
      .video-description{font-size:0.85rem}
    }
    
    @media(max-width:480px){
      .video-reels-section{padding:24px 0}
      .reels-container{padding:0 16px}
      .reels-grid{gap:12px;padding:0 16px 16px 16px;scroll-padding:0 16px}
      .video-reel-card{min-width:240px;margin:0 6px}
      .video-overlay{padding:12px}
      .play-button{font-size:1.5rem;margin-bottom:8px}
      .video-title{font-size:0.9rem;margin-bottom:4px}
      .video-description{font-size:0.8rem}
    }

    /* Servicios y Paquetes - Secci√≥n Unificada */
    .services-packages{background:var(--bg);padding:64px 0}
    .services-packages-header{text-align:center;margin-bottom:48px}
    .services-packages-grid{display:grid;grid-template-columns:1fr 1fr;gap:48px;max-width:1000px;margin:0 auto}
    
    /* Subsecciones */
    .services-section, .packages-section{background:#fff;border-radius:20px;padding:32px;box-shadow:0 15px 40px rgba(0,0,0,0.08);border:1px solid rgba(255,255,255,0.2)}
    .subsection-title{font-size:1.4rem;font-weight:800;color:var(--text);margin-bottom:24px;text-align:center;line-height:1.3}
    .packages-header{text-align:center;margin-bottom:24px}
    .deal-badge{display:inline-block;background:#111827;color:#fff;border-radius:999px;padding:6px 14px;font-size:.9rem;font-weight:800;letter-spacing:.5px;margin-bottom:12px;word-wrap:break-word}
    
    /* Servicios Compactos */
    .services-compact{display:flex;flex-direction:column;gap:20px}
    .service-compact{display:flex;align-items:center;gap:16px;padding:16px;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:16px;border:1px solid #e2e8f0;transition:all 0.3s ease}
    .service-compact:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.1);border-color:var(--cta1)}
    .service-icon{font-size:2rem;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--cta1),var(--cta2));border-radius:12px;color:#000;font-weight:800;flex-shrink:0}
    .service-info{flex:1;min-width:0}
    .service-info h4{font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:4px;word-wrap:break-word}
    .service-price-compact{font-size:1.3rem;font-weight:800;color:var(--primary1);margin-bottom:4px}
    .service-info p{font-size:0.9rem;color:var(--muted);margin:0;line-height:1.4}
    .service-info p:last-child{color:#059669;font-weight:600;font-size:.85rem;margin-top:4px}
    
    /* Paquetes Compactos */
    .packages-compact{display:flex;flex-direction:column;gap:16px}
    .package-compact{display:flex;align-items:center;justify-content:space-between;padding:16px;background:linear-gradient(135deg,#ffffff,#f8fafc);border:2px solid #e5e7eb;border-radius:16px;transition:all 0.3s ease}
    .package-compact:hover{border-color:var(--cta1);box-shadow:0 8px 25px rgba(181,255,0,0.15)}
    .package-info{flex:1;min-width:0}
    .package-info h4{font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:4px;word-wrap:break-word}
    .package-price{font-size:1.4rem;font-weight:800;color:var(--primary1);margin-bottom:4px}
    .package-info p{font-size:0.9rem;color:var(--muted);margin:0;line-height:1.4}
    
    /* Mobile Optimization - DEFINITIVA */
    @media(max-width:768px){
      .services-packages{padding:32px 0}
      .services-packages-grid{grid-template-columns:1fr;gap:24px;max-width:100%}
      .services-section, .packages-section{padding:20px;border-radius:16px;overflow:visible}
      .subsection-title{font-size:1.2rem;margin-bottom:16px}
      
      /* Servicios Principales - Layout verticale SEMPLICE */
      .services-compact{display:flex;flex-direction:column;gap:16px;width:100%}
      .service-compact{display:flex;padding:16px;gap:16px;align-items:center;width:100%;box-sizing:border-box}
      .service-icon{font-size:1.8rem;width:50px;height:50px;flex-shrink:0}
      .service-info{flex:1;min-width:0;width:100%}
      .service-info h4{font-size:1.1rem;margin-bottom:4px;word-wrap:break-word}
      .service-price-compact{font-size:1.3rem;margin-bottom:4px}
      .service-info p{font-size:0.9rem;margin:0;line-height:1.4;word-wrap:break-word}
      
      /* Paquetes Populares - Layout verticale SEMPLICE */
      .packages-compact{display:flex;flex-direction:column;gap:16px;width:100%}
      .package-compact{display:flex;padding:16px;flex-direction:column;align-items:stretch;text-align:center;width:100%;box-sizing:border-box}
      .package-info{text-align:center;margin-bottom:8px;width:100%}
      .package-info h4{font-size:1.1rem;margin-bottom:4px;word-wrap:break-word}
      .package-price{font-size:1.3rem;margin-bottom:4px}
      .package-info p{font-size:0.9rem;margin:0;line-height:1.4;word-wrap:break-word}
      .package-cta{width:100%;padding:12px 20px;font-size:0.9rem;border-radius:8px;box-sizing:border-box}
    }
    
    /* Mobile molto piccolo - SOLO per schermi sotto 480px */
    @media(max-width:480px){
      .hero-description {
        font-size: 0.95rem;
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }
      
      .calc-hero h2 {
        font-size: 1.8rem;
        margin-bottom: 0.6rem;
      }
      
      .calc-hero p {
        font-size: 0.95rem;
        margin-bottom: 1.2rem;
      }
      
      .services-packages{padding:24px 0}
      .services-packages-grid{gap:16px;max-width:100%}
      .services-section, .packages-section{padding:16px;border-radius:12px;overflow:visible}
      .subsection-title{font-size:1.1rem;margin-bottom:12px}
      
      /* Servicios Principales - Layout orizzontale SOLO per schermi molto piccoli */
      .services-compact{display:flex;flex-direction:row;gap:8px;overflow-x:auto;padding-bottom:6px;scroll-snap-type:x mandatory;width:100%}
      .services-compact::-webkit-scrollbar{height:4px}
      .services-compact::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:999px}
      .service-compact{display:flex;padding:8px;gap:8px;min-width:160px;scroll-snap-align:start;flex-direction:row;align-items:center;flex-shrink:0;box-sizing:border-box}
      .service-icon{font-size:1.3rem;width:35px;height:35px;flex-shrink:0}
      .service-info{flex:1;min-width:0}
      .service-info h4{font-size:0.95rem;margin-bottom:3px;word-wrap:break-word}
      .service-price-compact{font-size:1rem;margin-bottom:3px}
      .service-info p{font-size:0.8rem;margin:0;word-wrap:break-word}
      .service-info p:last-child{font-size:0.75rem;margin-top:2px}
      
      /* Paquetes Populares - Layout verticale anche su mobile piccolo */
      .packages-compact{display:flex;flex-direction:column;gap:10px;width:100%}
      .package-compact{display:flex;padding:10px;gap:8px;flex-direction:column;align-items:stretch;text-align:center;width:100%;box-sizing:border-box}
      .package-info{text-align:center;margin-bottom:8px;width:100%}
      .package-info h4{font-size:0.95rem;margin-bottom:3px;word-wrap:break-word}
      .package-price{font-size:1.1rem;margin-bottom:3px}
      .package-info p{font-size:0.8rem;margin:0;word-wrap:break-word}
      .package-cta{width:100%;padding:8px 12px;font-size:0.85rem;border-radius:6px;box-sizing:border-box}
      
      /* Deal badge pi√π compatto */
      .deal-badge{padding:4px 10px;font-size:0.8rem;margin-bottom:8px}
    }
    
      .service-compact, .package-compact{word-break:break-word}
    }
    
    /* OTTIMIZZAZIONE MOBILE PAGINA VOLUMEN */
    @media (max-width: 768px) {
      /* Riduci padding e margini per ottimizzare spazi */
      .services-packages {
        padding: 20px 0;
      }
      
      .services-packages-header {
        margin-bottom: 24px;
      }
      
      .services-packages-header h2 {
        font-size: 1.8rem;
        margin-bottom: 12px;
      }
      
      .services-packages-header p {
        font-size: 1rem;
        margin-bottom: 20px;
      }
      
      /* Pacchetti pi√π compatti */
      .packages-section {
        padding: 16px;
      }
      
      .packages-header h3 {
        font-size: 1.3rem;
        margin-bottom: 16px;
      }
      
      .package-compact {
        padding: 12px;
        margin-bottom: 8px;
      }
      
      .package-info h4 {
        font-size: 1rem;
        margin-bottom: 6px;
      }
      
      .package-price {
        font-size: 1.1rem;
        margin-bottom: 6px;
      }
      
      .package-info p {
        font-size: 0.85rem;
        margin-bottom: 8px;
      }
      
      .package-cta {
        padding: 8px 16px;
        font-size: 0.9rem;
        width: 100%;
        margin-top: 8px;
      }
      
      /* Calcolatrice pi√π compatta - RIMOSSA DUPLICATA */
      
      .calc-hero h2 {
        font-size: 1.6rem;
        margin-bottom: 12px;
      }
      
      .calc-hero p {
        font-size: 0.95rem;
        margin-bottom: 20px;
      }
      
      .calculator-card {
        padding: 16px;
        margin: 0 16px;
      }
      
      .calc-input {
        margin-bottom: 20px;
      }
      
      .calc-label {
        font-size: 0.95rem;
        margin-bottom: 8px;
      }
      
      .calc-field {
        padding: 10px;
        font-size: 1rem;
        margin-bottom: 8px;
      }
      
      .quantity-examples {
        font-size: 0.8rem;
        gap: 8px;
      }
      
      .calc-options {
        gap: 8px;
        margin-bottom: 16px;
      }
      
      .calc-option {
        padding: 12px;
      }
      
      .option-icon {
        font-size: 1.2rem;
      }
      
      .option-content strong {
        font-size: 0.9rem;
      }
      
      .option-content br + * {
        font-size: 0.8rem;
      }
      
      /* Bottoni toggle per facce */
      .face-toggle {
        display: flex;
        gap: 6px;
        justify-content: center;
      }
      
      .face-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
        border: 1px solid var(--cta1);
        border-radius: 6px;
        background: linear-gradient(45deg, var(--cta1), var(--cta2));
        color: #000;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
      }
      
      .face-btn.active {
        background: linear-gradient(45deg, var(--cta1), var(--cta2));
        color: #000;
        border-color: var(--cta1);
        font-weight: 700;
        box-shadow: 0 2px 8px rgba(181,255,0,0.3);
      }
      
      .face-btn:hover:not(.active) {
        background: linear-gradient(45deg, var(--cta2), var(--cta1));
        border-color: var(--cta2);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(181,255,0,0.2);
      }
    }
    .package-cta{background:linear-gradient(45deg,var(--cta1),var(--cta2));color:#000;padding:8px 16px;border-radius:8px;font-weight:700;cursor:pointer;border:none;font-size:0.9rem;transition:all 0.3s ease}
    .package-cta:hover{transform:scale(1.05);box-shadow:0 4px 15px rgba(181,255,0,0.3)}



    /* Calculator */
    .calculator-section{background:linear-gradient(135deg,var(--primary1),var(--primary2));color:#fff;padding:64px 0}
    
    /* Calculator Hero */
    .calc-hero{text-align:center;margin-bottom:40px}
    
    .calc-hero h2{
      font-size:2.5rem;font-weight:800;color:var(--cta1);margin-bottom:1rem;line-height:1.2
    }
    
    .calc-hero p{
      font-size:1.2rem;color:rgba(255,255,255,0.9);margin-bottom:2rem;line-height:1.6;max-width:600px;margin-left:auto;margin-right:auto
    }
    .calc-subtitle{font-size:1.1rem;color:rgba(255,255,255,0.9);margin-bottom:30px}
    .calc-progress{display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:20px}
    .progress-step{display:flex;flex-direction:column;align-items:center;gap:8px}
    .step-number{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,0.2);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.1rem;border:2px solid rgba(255,255,255,0.3)}
    .progress-step.active .step-number{background:var(--cta1);border-color:var(--cta1);color:#000}
    .step-text{font-size:0.9rem;color:rgba(255,255,255,0.8);font-weight:600}
    .progress-line{width:40px;height:2px;background:rgba(255,255,255,0.3)}
    .calc-social-proof{background:rgba(255,255,255,0.1);padding:12px 24px;border-radius:20px;display:inline-block;backdrop-filter:blur(10px)}
    .calc-social-proof span{font-size:0.9rem;color:rgba(255,255,255,0.9)}
    
    /* Calculator Card */
    .calculator-card{background:#fff;border-radius:24px;padding:32px;max-width:680px;margin:0 auto;color:#333;box-shadow:0 25px 80px rgba(0,0,0,0.25);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(10px)}
    .calculator-title{text-align:center;font-size:1.8rem;font-weight:800;margin-bottom:14px;color:var(--cta1)}
    
    /* Quantity Controls */
    .calc-input{margin-bottom:24px}
    .calc-label{display:block;margin-bottom:12px;font-weight:600;color:#4a5568;font-size:1.1rem}
    .calc-field{width:100%;padding:16px;border:2px solid #e2e8f0;border-radius:16px;font-size:1.1rem;text-align:center;background:#fff;transition:all 0.3s ease;font-weight:500}
    .calc-field:focus{outline:none;border-color:var(--primary1);box-shadow:0 0 0 3px rgba(181,255,0,0.1);transform:translateY(-1px)}
    .calc-field:hover{border-color:#cbd5e1}
    
    /* Styling for number input stepper controls */
    .calc-field::-webkit-outer-spin-button,
    .calc-field::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
      opacity: 1;
      height: 20px;
      width: 20px;
      cursor: pointer;
      background: #f1f5f9;
      border-radius: 4px;
      border: 1px solid #e2e8f0;
    }
    
    .calc-field::-webkit-inner-spin-button {
      background: linear-gradient(to bottom, #f8fafc 0%, #e2e8f0 100%);
    }
    
    .calc-field::-webkit-outer-spin-button {
      background: linear-gradient(to top, #f8fafc 0%, #e2e8f0 100%);
    }
    
    .calc-field::-webkit-inner-spin-button:hover {
      background: linear-gradient(to bottom, #e2e8f0 0%, #cbd5e1 100%);
    }
    
    .calc-field::-webkit-outer-spin-button:hover {
      background: linear-gradient(to top, #e2e8f0 0%, #cbd5e1 100%);
    }

    .page-input{width:100%;padding:12px;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;text-align:center}
    .page-input:focus{outline:none;border-color:var(--primary1)}
    .quantity-examples{display:flex;justify-content:center;gap:20px;font-size:0.9rem;color:#6b7280;margin-top:12px;text-align:center}
    
    /* Options with Icons */
    .calc-options{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:20px 0;position:relative}
    .calc-options::after{content:'';position:absolute;bottom:-10px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#e2e8f0,transparent)}
    .calc-option{padding:16px;border:2px solid #e2e8f0;border-radius:16px;cursor:pointer;transition:all 0.3s ease;font-weight:600;display:flex;align-items:center;gap:12px;position:relative;background:#fff}
    .calc-option:hover{border-color:var(--primary1);transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.1)}
    .option-icon{font-size:1.5rem;flex-shrink:0}
    .option-content{flex:1}
    .option-check{font-size:1.2rem;opacity:0;transition:opacity 0.3s ease}
    
    /* CALCOLATRICE - STATO STABILE */
    .calc-option.active {
      border-color: var(--primary1) !important;
      background: linear-gradient(135deg, var(--primary1), var(--primary2)) !important;
      color: #fff !important;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
    }
    
    .calc-option:not(.active) {
      border-color: #e2e8f0 !important;
      background: #fff !important;
      color: #333 !important;
    }
    
    .calc-option:not(.active) .option-check {
      opacity: 0 !important;
    }
    
    .calc-option.active .option-check {
      opacity: 1 !important;
    }
    
    /* Result Section */
    .calc-result{background:linear-gradient(45deg,var(--cta1),var(--cta2));color:#000;padding:28px;border-radius:20px;text-align:center;margin:28px 0;box-shadow:0 20px 50px rgba(181,255,0,0.3);border:2px solid rgba(255,255,255,0.2);position:relative;overflow:hidden}
    .calc-result::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent,rgba(255,255,255,0.1),transparent);animation:shine 2s infinite;pointer-events:none}
    @keyframes shine{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
    .result-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .result-header div:first-child{font-size:1.1rem;font-weight:600;color:#1a1a1a}
    .scarcity-badge{background:rgba(0,0,0,0.1);padding:6px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;color:#1a1a1a}
    .calc-total{font-size:3rem;font-weight:900;text-shadow:0 2px 4px rgba(0,0,0,0.1);color:#1a1a1a;margin:8px 0}
    .result-badge{font-size:0.9rem;color:#1a1a1a;opacity:0.8;font-weight:500}
    
    /* Action Buttons */
    .calc-actions{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:24px}
    .cta-whatsapp,.cta-online,.cta-call{display:flex;align-items:center;justify-content:center;gap:12px;padding:16px 24px;border-radius:16px;font-weight:700;font-size:1.1rem;transition:all 0.3s ease;border:none;cursor:pointer;position:relative;overflow:hidden;word-wrap:break-word;text-decoration:none}
    .cta-whatsapp{background:linear-gradient(135deg,#25d366,#128c7e);color:#fff}
    .cta-online{background:linear-gradient(135deg,var(--cta1),var(--cta2));color:#000}
    .cta-call{background:transparent;color:#000;border:2px solid #000}
    .cta-whatsapp:hover,.cta-online:hover,.cta-call:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,0.2)}
    .cta-icon{font-size:1.3rem;flex-shrink:0}
    .cta-text{font-weight:700;word-wrap:break-word}
    
    /* Color Details Styles */
    .color-type-option.active div{border-color:#10b981;background:#f0fdf4}
    .color-type-option:hover div{border-color:#d1d5db;background:#f9fafb}
    .mixed-inputs{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    
    /* BOTTONI CALCOLATRICE - STILI NORMALI */
    .calc-actions .cta-primary,
    .calc-actions .cta-whatsapp,
    .calc-actions .cta-online,
    .calc-actions .cta-call {
      cursor: pointer;
      position: relative;
    }
    
    .mini{text-align:center;color:#6b7280;font-size:.9rem;margin-top:8px}

    /* Order Page Styles */
    .order-page{min-height:100vh;padding:80px 0 100px;background:var(--bg);display:none}
    .order-page.active{display:block}
    .order-container{max-width:900px;margin:0 auto;padding:0 24px}
    .order-header{text-align:center;margin-bottom:40px}
    .order-steps{display:flex;justify-content:center;gap:20px;margin:30px 0;flex-wrap:wrap}
    .step{display:flex;align-items:center;gap:10px;padding:10px 20px;background:#fff;border-radius:999px;box-shadow:0 2px 10px rgba(0,0,0,.1);position:relative;transition:all 0.3s ease}
    .step.active{background:var(--primary1);color:#fff;transform:scale(1.05)}
    .step.completed{background:var(--ok);color:#fff}
    .step-number{width:24px;height:24px;border-radius:50%;background:var(--gold);color:#000;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.9rem;transition:all 0.3s ease}
    .step.active .step-number{background:#fff;color:var(--primary1)}
    .step.completed .step-number{background:#fff;color:var(--ok)}
    
    /* Step Progress Indicators */
    .step-progress{position:absolute;bottom:-2px;left:50%;transform:translateX(-50%);width:0;height:3px;background:var(--primary1);border-radius:2px;transition:width 0.5s ease}
    .step.active .step-progress{width:80%}
    .step.completed .step-progress{width:100%;background:var(--ok)}
    
    /* Order Progress Bar */
    .order-progress-bar{width:100%;height:6px;background:#e5e7eb;border-radius:3px;margin:20px 0;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--primary1),var(--primary2));width:25%;transition:width 0.5s ease;border-radius:3px}
    
    /* Payment Requirements */
    .payment-requirements{margin:20px 0}
    .requirement-alert{display:flex;gap:16px;padding:20px;background:linear-gradient(135deg,#fef3c7,#fde68a);border:2px solid #f59e0b;border-radius:16px;align-items:flex-start}
    .alert-icon{font-size:2rem;flex-shrink:0}
    .alert-content{flex:1}
    .alert-content strong{display:block;font-size:1.1rem;color:#92400e;margin-bottom:8px}
    .alert-content p{color:#92400e;margin:0 0 12px 0;line-height:1.5}
    .anticipo-details{display:flex;gap:20px;font-size:0.9rem}
    .anticipo-details span{color:#92400e}
    .anticipo-details strong{color:#92400e;font-weight:700}
    
    /* SISTEMA CONFERMA PAGAMENTO */
    .payment-confirmation {
      background: #f0f9ff;
      border: 2px solid #0ea5e9;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      animation: slideIn 0.3s ease-out;
    }
    
    .payment-confirmation-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }
    
    .payment-confirmation-header h4 {
      margin: 0;
      color: #0c4a6e;
      font-size: 1.1rem;
    }
    
    .payment-details {
      margin-bottom: 16px;
    }
    
    .payment-method-info {
      font-size: 0.95rem;
      color: #0369a1;
      line-height: 1.5;
    }
    
    .payment-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .payment-actions button {
      flex: 1;
      min-width: 120px;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .payment-actions .cta-secondary {
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #d1d5db;
    }
    
    .payment-actions .cta-secondary:hover {
      background: #e5e7eb;
      border-color: #9ca3af;
    }
    
    .payment-actions .cta-primary {
      background: #0ea5e9;
      color: white;
    }
    
    .payment-actions .cta-primary:hover {
      background: #0284c7;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Responsive per conferma pagamento */
    @media (max-width: 768px) {
      .payment-confirmation {
        padding: 16px;
        margin-top: 16px;
      }
      
      .payment-actions {
        flex-direction: column;
      }
      
      .payment-actions button {
        min-width: auto;
      }
    }
    
    @media (max-width: 480px) {
      .payment-confirmation {
        padding: 12px;
        margin-top: 12px;
      }
      
      .payment-confirmation-header h4 {
        font-size: 1rem;
      }
      
      .payment-method-info {
        font-size: 0.9rem;
      }
    }
    
    /* Stili per dati bancari */
    #bank-details {
      animation: slideIn 0.3s ease-out;
    }
    
    #bank-details h4 {
      font-size: 1.1rem;
      font-weight: 700;
    }
    
    #bank-details p {
      margin: 6px 0;
    }
    
    @media (max-width: 768px) {
      #bank-details {
        padding: 16px;
        margin: 16px 0;
      }
      
      #bank-details h4 {
        font-size: 1rem;
      }
    }
    
    @media (max-width: 480px) {
      #bank-details {
        padding: 12px;
        margin: 12px 0;
      }
      
      #bank-details h4 {
        font-size: 0.95rem;
      }
      
      #bank-details div {
        font-size: 0.9rem;
      }
    }
    
    /* File Upload Improvements */
    .file-preview-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin:20px 0}
    .file-preview-item{background:#fff;border:2px solid #e5e7eb;border-radius:12px;padding:16px;position:relative;transition:all 0.3s ease}
    .file-preview-item:hover{border-color:var(--primary1);box-shadow:0 4px 20px rgba(0,0,0,0.1)}
    .file-preview-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .file-icon{font-size:1.5rem}
    .file-info{flex:1}
    .file-name{font-weight:600;color:var(--text);font-size:0.9rem;word-break:break-word}
    .file-size{font-size:0.8rem;color:var(--muted)}
    .file-actions{display:flex;gap:8px}
    .file-action-btn{background:none;border:1px solid #e5e7eb;border-radius:6px;padding:4px 8px;font-size:0.8rem;cursor:pointer;transition:all 0.2s ease}
    .file-action-btn:hover{background:var(--primary1);color:#fff;border-color:var(--primary1)}
    .file-action-btn.remove:hover{background:#ef4444;border-color:#ef4444}
    
    /* Upload Progress */
    .upload-progress{margin:20px 0;text-align:center}
    .progress-bar{width:100%;height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden;margin-bottom:8px}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--primary1),var(--primary2));width:0%;transition:width 0.3s ease}
    .progress-text{font-size:0.9rem;color:var(--muted)}
    
    /* Upload Stats */
    .upload-stats{display:flex;gap:20px;justify-content:center;margin:20px 0;padding:16px;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0}
    .upload-stats .stat-item{display:flex;flex-direction:column;align-items:center;gap:4px}
    .upload-stats .stat-label{font-size:0.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
    .upload-stats .stat-value{font-size:1.2rem;font-weight:700;color:var(--text)}
    
    /* Input Validation */
    .input-group{position:relative}
    .validation-message{font-size:0.8rem;margin-top:4px;min-height:16px;transition:all 0.3s ease;line-height:1.3}
    .validation-message.error{color:#ef4444}
    .validation-message.success{color:var(--ok)}
    .validation-message.warning{color:#f59e0b}
    
    .calc-field.error{border-color:#ef4444;box-shadow:0 0 0 3px rgba(239,68,68,0.1)}
    .calc-field.success{border-color:var(--ok);box-shadow:0 0 0 3px rgba(34,197,94,0.1)}
    .calc-field.warning{border-color:#f59e0b;box-shadow:0 0 0 3px rgba(245,158,11,0.1)}
    
    .order-section{background:#fff;border-radius:20px;padding:30px;margin:20px 0;box-shadow:0 10px 30px rgba(0,0,0,.06);word-wrap:break-word}
    .section-header{font-size:1.3rem;font-weight:800;color:var(--text);margin-bottom:15px;display:flex;align-items:center;gap:10px}
    
    /* File Upload */
    .file-upload{border:2px dashed #e2e8f0;border-radius:12px;padding:30px;text-align:center;transition:.2s;cursor:pointer}
    .file-upload:hover{border-color:var(--primary1);background:#f8fafc}
    .file-upload.dragover{border-color:var(--primary1);background:var(--primary1);color:#fff}
    .upload-icon{font-size:3rem;margin-bottom:15px}
    .uploaded-files{margin-top:20px}
    .file-item{display:flex;align-items:center;justify-content:space-between;padding:10px;background:#f8fafc;border-radius:8px;margin:5px 0}
    
    /* Calculator File Upload */
    .calc-file-upload{border:2px dashed #e2e8f0;border-radius:12px;padding:20px;text-align:center;transition:.2s;cursor:pointer;background:#f8fafc}
    .calc-file-upload:hover{border-color:var(--primary1);background:#f0f9ff}
    .calc-file-upload.dragover{border-color:var(--primary1);background:var(--primary1);color:#fff}
    .calc-upload-icon{font-size:2rem;margin-bottom:10px}
    .calc-file-upload h4{font-size:1rem;margin-bottom:8px;color:var(--text)}
    .calc-file-upload p{font-size:0.9rem;margin:8px 0;color:var(--muted)}
    
    .calc-file-preview{background:#f0f9ff;border:1px solid #0ea5e9;border-radius:8px;padding:12px}
    .calc-remove-file{background:#ef4444;color:white;border:none;border-radius:4px;padding:4px 8px;cursor:pointer;font-size:0.8rem;transition:all 0.2s ease}
    .calc-remove-file:hover{background:#dc2626;transform:scale(1.05)}
    
    /* Summary */
    .order-summary{background:#f8fafc;padding:20px;border-radius:12px;margin:20px 0}
    .summary-row{display:flex;justify-content:space-between;margin:8px 0;padding:8px 0}
    .summary-row.total{font-weight:800;font-size:1.2rem;border-top:2px solid #e2e8f0;margin-top:15px;padding-top:15px}
    
    /* Delivery Options */
    .delivery-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin:15px 0}
    .delivery-option{border:2px solid #e2e8f0;border-radius:12px;padding:20px;cursor:pointer;transition:.2s}
    .delivery-option:hover{border-color:var(--primary1)}
    .delivery-option.selected{border-color:var(--primary1);background:#f8fafc}
.delivery-option.disabled{border-color:#cbd5e1;background:#f1f5f9;cursor:not-allowed;opacity:0.5}
.delivery-option.disabled:hover{border-color:#cbd5e1;background:#f1f5f9}
    .delivery-title{font-weight:700;margin-bottom:5px}
    .delivery-price{color:var(--primary1);font-weight:800}
    .delivery-time{color:var(--muted);font-size:.9rem}
    
    /* Order Confirmation Page */
    .order-confirmation{text-align:center;padding:40px 20px}
    .order-confirmation .order-section{text-align:center;padding:40px 20px}
    .confirmation-icon{font-size:4rem;margin-bottom:20px;display:block}
    .confirmation-title{color:var(--ok);margin-bottom:15px;font-size:2rem;font-weight:800;line-height:1.2}
    .confirmation-message{color:var(--muted);margin-bottom:25px;font-size:1.1rem;line-height:1.5}
    .confirmation-details{background:#f0fdf4;padding:20px;border-radius:12px;margin:20px 0;border:1px solid #bbf7d0;text-align:left}
    .confirmation-details p{font-size:1rem;margin:8px 0;line-height:1.4}
    .confirmation-details strong{color:var(--text);font-weight:700}
    .confirmation-actions{display:flex;gap:15px;justify-content:center;margin-top:30px;flex-wrap:wrap}
    .confirmation-actions .cta-primary{min-width:200px;text-align:center}

    /* Mobile Order Page */
    @media(max-width:768px){
      .order-page{padding:40px 0 60px}
      .order-container{padding:0 16px}
      .order-header{position:relative;z-index:1}
      .order-steps{gap:8px;margin:20px 0;flex-wrap:wrap}
      .step{padding:8px 12px;font-size:0.85rem;flex:1;min-width:100px;justify-content:center}
      .step-number{width:20px;height:20px;font-size:0.8rem}
      .order-section{padding:20px;margin:16px 0}
      .section-header{font-size:1.1rem;margin-bottom:12px}
      .file-preview-grid{grid-template-columns:1fr;gap:12px}
      .file-preview-item{padding:12px}
      .file-actions{flex-direction:column;gap:6px}
      .order-progress-bar{height:4px;margin:16px 0}
      .step-progress{height:2px}
      .requirement-alert{flex-direction:column;text-align:center;padding:16px}
      .anticipo-details{flex-direction:column;gap:8px}
      .delivery-options{grid-template-columns:1fr;gap:12px}
      .delivery-option{padding:16px}
    }
    
    /* Mobile molto piccolo - Ultra compatto per Order Page */
    @media(max-width:480px){
      .order-page{padding:32px 0 40px}
      .order-container{padding:0 12px}
      .order-header h1{font-size:1.8rem;margin-bottom:8px}
      .order-header p{font-size:0.9rem}
      
      /* Steps ultra compatti */
      .order-steps{gap:6px;margin:16px 0;flex-wrap:wrap}
      .step{padding:6px 8px;font-size:0.8rem;min-width:80px;justify-content:center}
      .step-number{width:18px;height:18px;font-size:0.75rem}
      
      /* Progress bar ultra compatta */
      .order-progress-bar{height:3px;margin:12px 0}
      
      /* Sezioni ultra compatte */
      .order-section{padding:16px;margin:12px 0;border-radius:16px}
      .section-header{font-size:1rem;margin-bottom:10px;gap:8px}
      .section-header span{font-size:1rem}
      
      /* File upload ultra compatto */
      .file-upload{padding:20px;border-radius:10px}
      .upload-icon{font-size:2.5rem;margin-bottom:12px}
      .file-upload h3{font-size:1.1rem;margin-bottom:8px}
      .file-upload p{font-size:0.85rem;margin:8px 0}
      
      /* File preview ultra compatto */
      .file-preview-grid{gap:8px}
      .file-preview-item{padding:10px;border-radius:10px}
      .file-preview-header{gap:8px;margin-bottom:8px}
      .file-icon{font-size:1.3rem}
      .file-name{font-size:0.85rem}
      .file-size{font-size:0.75rem}
      .file-actions{gap:4px}
      .file-action-btn{padding:3px 6px;font-size:0.75rem;border-radius:4px}
      
      /* Upload stats ultra compatte */
      .upload-stats{padding:12px;gap:16px;border-radius:10px}
      .upload-stats .stat-item{gap:3px}
      .upload-stats .stat-label{font-size:0.75rem}
      .upload-stats .stat-value{font-size:1.1rem}
      
      /* Delivery options ultra compatte */
      .delivery-options{gap:8px}
      .delivery-option{padding:12px;border-radius:10px}
      .delivery-title{font-size:0.95rem;margin-bottom:4px}
      .delivery-price{font-size:1rem;margin-bottom:4px}
      .delivery-time{font-size:0.8rem}
      
      /* Order summary ultra compatto */
      .order-summary{padding:16px;border-radius:10px}
      .summary-row{padding:6px 0;font-size:0.9rem}
      .summary-row.total{font-size:1.1rem;padding-top:12px;margin-top:12px}
      
      /* Input fields ultra compatti */
      .calc-field{padding:12px;font-size:1rem;border-radius:12px}
      .calc-label{font-size:0.95rem;margin-bottom:8px}
      
      /* Buttons ultra compatti */
      .cta-primary{padding:12px 18px;font-size:0.9rem;border-radius:12px}
      
      /* Payment requirements ultra compatte */
      .requirement-alert{padding:12px;border-radius:10px;gap:12px}
      .alert-icon{font-size:1.5rem}
      .alert-content strong{font-size:1rem;margin-bottom:6px}
      .alert-content p{font-size:0.85rem;margin:0 0 10px 0}
      .anticipo-details{gap:6px;font-size:0.8rem}
      
      /* Upload progress ultra compatto */
      .upload-progress{margin:16px 0}
      .progress-bar{height:6px;margin-bottom:6px}
      .progress-text{font-size:0.8rem}
      
      /* Order confirmation ultra compatto */
      .order-confirmation{padding:20px 10px}
      .order-confirmation .order-section{padding:20px 10px}
      .confirmation-icon{font-size:3rem;margin-bottom:16px}
      .confirmation-title{font-size:1.6rem;margin-bottom:12px}
      .confirmation-message{font-size:1rem;margin-bottom:20px}
      .confirmation-details{padding:16px;border-radius:10px;margin:16px 0}
      .confirmation-details p{font-size:0.9rem;margin:6px 0}
      .confirmation-actions{gap:12px;margin-top:24px}
      .confirmation-actions .cta-primary{min-width:180px;padding:12px 16px;font-size:0.9rem}
      
      /* Input fields e buttons ultra compatti */
      .calc-actions{grid-template-columns:1fr;gap:12px;margin-top:20px}
    .cta-whatsapp, .cta-online, .cta-call{padding:14px 20px;font-size:1rem;border-radius:14px}
    .cta-icon{font-size:1.2rem}
    .cta-text{font-size:1rem}
    
    /* Color Details Mobile */
    .color-type-options{grid-template-columns:1fr;gap:8px}
    .mixed-inputs{grid-template-columns:1fr;gap:8px}
      
      /* File upload ultra compatto */
      .file-upload{border-width:1px;padding:24px}
      .file-upload h3{font-size:1.2rem}
      .file-upload p{font-size:0.9rem}
      
      /* Calculator file upload ultra compatto ma confortevole */
      .calc-file-upload{padding:18px;border-radius:10px}
      .calc-upload-icon{font-size:1.8rem;margin-bottom:10px}
      .calc-file-upload h4{font-size:0.95rem;margin-bottom:8px}
      .calc-file-upload p{font-size:0.85rem;margin:8px 0}
      .calc-file-preview{padding:12px;border-radius:6px}
      
      /* Validation messages ultra compatte ma leggibili */
      .validation-message{font-size:0.8rem;margin-top:4px;min-height:16px}
    }
    
    /* Mobile extra piccolo - Ultra compatto per Order Page */
    @media(max-width:320px){
      .order-page{padding:28px 0 36px}
      .order-container{padding:0 12px}
      .order-header h1{font-size:1.6rem;margin-bottom:8px}
      .order-header p{font-size:0.85rem}
      
      /* Fix per schermi molto piccoli */
      .container {
        padding: 0 12px;
      }
      
      .hero {
        padding: 50px 0 30px;
      }
      
      .hero h1 {
        font-size: 1.8rem;
        line-height: 1.2;
      }
      
      .hero-subtitle {
        font-size: 0.9rem;
      }
      
      /* Steps extra compatti ma confortevoli */
      .order-steps{gap:6px;margin:16px 0}
      .step{padding:6px 8px;font-size:0.75rem;min-width:70px}
      .step-number{width:16px;height:16px;font-size:0.7rem}
      
      /* Progress bar extra compatta */
      .order-progress-bar{height:2px;margin:10px 0}
      
      /* Sezioni extra compatte ma confortevoli */
      .order-section{padding:14px;margin:10px 0;border-radius:12px}
      .section-header{font-size:0.95rem;margin-bottom:10px;gap:8px}
      .section-header span{font-size:0.95rem}
      
      /* File upload extra compatto ma confortevole */
      .file-upload{padding:18px;border-radius:8px}
      .upload-icon{font-size:2rem;margin-bottom:12px}
      .file-upload h3{font-size:1rem;margin-bottom:8px}
      .file-upload p{font-size:0.8rem;margin:8px 0}
      
      /* File preview extra compatto ma confortevole */
      .file-preview-grid{gap:8px}
      .file-preview-item{padding:10px;border-radius:8px}
      .file-preview-header{gap:8px;margin-bottom:8px}
      .file-icon{font-size:1.2rem}
      .file-name{font-size:0.8rem}
      .file-size{font-size:0.7rem}
      .file-actions{gap:3px}
      .file-action-btn{padding:2px 5px;font-size:0.7rem;border-radius:3px}
      
      /* Upload stats extra compatte */
      .upload-stats{padding:10px;gap:12px;border-radius:8px}
      .upload-stats .stat-item{gap:2px}
      .upload-stats .stat-label{font-size:0.7rem}
      .upload-stats .stat-value{font-size:1rem}
      
      /* Delivery options extra compatte */
      .delivery-options{gap:6px}
      .delivery-option{padding:10px;border-radius:8px}
      .delivery-title{font-size:0.9rem;margin-bottom:3px}
      .delivery-price{font-size:0.95rem;margin-bottom:3px}
      .delivery-time{font-size:0.75rem}
      
      /* Order summary extra compatto */
      .order-summary{padding:12px;border-radius:8px}
      .summary-row{padding:4px 0;font-size:0.85rem}
      .summary-row.total{font-size:1rem;padding-top:10px;margin-top:10px}
      
      /* Input fields extra compatti */
      .calc-field{padding:10px;font-size:0.95rem;border-radius:10px}
      .calc-label{font-size:0.9rem;margin-bottom:6px}
      
      /* Buttons extra compatti */
      .cta-primary{padding:10px 16px;font-size:0.85rem;border-radius:10px}
      
      /* Payment requirements extra compatte */
      .requirement-alert{padding:10px;border-radius:8px;gap:10px}
      .alert-icon{font-size:1.3rem}
      .alert-content strong{font-size:0.95rem;margin-bottom:5px}
      .alert-content p{font-size:0.8rem;margin:0 0 8px 0}
      .anticipo-details{gap:4px;font-size:0.75rem}
      
      /* Upload progress extra compatto */
      .upload-progress{margin:12px 0}
      .progress-bar{height:4px;margin-bottom:4px}
      .progress-text{font-size:0.75rem}
      
      /* Order confirmation extra compatto */
      .order-confirmation{padding:12px 6px}
      .order-confirmation .order-section{padding:12px 6px}
      .confirmation-icon{font-size:2rem;margin-bottom:8px}
      .confirmation-title{font-size:1.2rem;margin-bottom:8px}
      .confirmation-message{font-size:0.8rem;margin-bottom:12px}
      .confirmation-details{padding:8px;border-radius:6px;margin:8px 0}
      .confirmation-details p{font-size:0.8rem;margin:3px 0}
      .confirmation-actions{gap:8px;margin-top:16px}
      .confirmation-actions .cta-primary{min-width:140px;padding:8px 12px;font-size:0.8rem}
      
      /* Input fields e buttons extra compatti */
      .calc-actions{grid-template-columns:1fr;gap:10px;margin-top:16px}
      .cta-whatsapp, .cta-online, .cta-call{padding:12px 16px;font-size:0.9rem;border-radius:12px}
      .cta-icon{font-size:1.1rem}
      .cta-text{font-size:0.9rem}
      
      /* File upload extra compatto */
      .file-upload{border-width:1px;padding:20px}
      .file-upload h3{font-size:1.1rem}
      .file-upload p{font-size:0.8rem}
      
      /* Calculator file upload extra compatto */
      .calc-file-upload{padding:14px;border-radius:8px}
      .calc-upload-icon{font-size:1.6rem;margin-bottom:6px}
      .calc-file-upload h4{font-size:0.9rem;margin-bottom:5px}
      .calc-file-upload p{font-size:0.8rem;margin:5px 0}
      .calc-file-preview{padding:8px;border-radius:5px}
      
      /* Validation messages extra compatte */
      .validation-message{font-size:0.7rem;margin-top:2px;min-height:12px}
    }

    /* About / Trust - Redesigned */
    .about{padding:64px 0;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}
    .about-hero{display:grid;grid-template-columns:1fr 1fr;gap:40px;align-items:center;max-width:1100px;margin:0 auto}
    
    /* About Content */
    .about-content{display:flex;flex-direction:column;gap:24px}
    .about-badge{display:inline-block;background:linear-gradient(135deg,var(--cta1),var(--cta2));color:#000;padding:8px 16px;border-radius:999px;font-size:0.9rem;font-weight:700;letter-spacing:0.5px;width:fit-content}
    .about-title{font-size:2.2rem;font-weight:900;color:var(--text);line-height:1.2;margin:0}
    .about-description{font-size:1.05rem;color:var(--muted);line-height:1.5;margin:0}
    
    /* About Stats */
    .about-stats{display:grid;grid-template-columns:1fr;gap:14px}
    .about-stat{display:flex;align-items:center;gap:12px;padding:14px;background:#fff;border-radius:14px;box-shadow:0 3px 14px rgba(0,0,0,0.08);border:1px solid rgba(181,255,0,0.2);transition:all 0.3s ease}
    .about-stat:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(181,255,0,0.15);border-color:var(--cta1)}
    .stat-icon{font-size:1.6rem;width:42px;height:42px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--cta1),var(--cta2));border-radius:10px;color:#000;font-weight:800}
    .stat-info{flex:1}
    .stat-info strong{display:block;font-size:1rem;font-weight:700;color:var(--text);margin-bottom:2px}
    .stat-info span{font-size:0.85rem;color:var(--muted)}
    
    /* About Features Grid */
    .about-features-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .feature-item{display:flex;align-items:center;gap:10px;padding:10px 14px;background:#fff;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.06);border:1px solid #e2e8f0;transition:all 0.3s ease}
    .feature-item:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(181,255,0,0.1);border-color:var(--cta1)}
    .feature-icon{font-size:1.2rem;color:var(--ok)}
    .feature-item span{font-size:0.9rem;color:var(--text);font-weight:500}
    
    /* About Actions */
    .about-actions{display:flex;gap:12px;flex-wrap:wrap}
    .cta-secondary{background:linear-gradient(135deg,#fff,#f8fafc);color:var(--text);border:2px solid var(--cta1);padding:14px 24px;border-radius:12px;font-weight:700;text-decoration:none;transition:all 0.3s ease;display:inline-flex;align-items:center;gap:8px}
    .cta-secondary:hover{background:var(--cta1);color:#000;transform:translateY(-2px);box-shadow:0 8px 25px rgba(181,255,0,0.3)}
    
    /* About Visual */
    .about-visual{position:relative}
    .about-image-container{position:relative;border-radius:20px;overflow:hidden;box-shadow:0 18px 60px rgba(0,0,0,0.12);background:linear-gradient(135deg,var(--cta1),var(--cta2))}
    .about-image-container img{width:100%;height:380px;object-fit:cover;transition:all 0.5s ease}
    .about-image-container:hover img{transform:scale(1.05)}
    
    /* Image Overlay */
    .image-overlay{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,rgba(0,0,0,0.8));padding:24px 18px;color:#fff}
    .overlay-content{display:flex;align-items:center;gap:12px;justify-content:center}
    .overlay-icon{font-size:1.6rem}
    .overlay-text{font-size:1rem;font-weight:600;text-align:center}

    /* Testimonials */
    .reviews{background:var(--bg);padding:56px 0}
    .rev-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;align-items:start}
    .rev-card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:18px;position:relative;overflow:hidden}
    .rev-top{display:flex;gap:12px;align-items:center;margin-bottom:6px}
    .avatar{width:50px;height:50px;border-radius:50%;overflow:hidden;border:3px solid #f0f0f0;box-shadow:0 4px 16px rgba(0,0,0,0.1)}
    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .stars{color:#fbbf24;font-weight:800}
    
    /* Controlli di navigazione per le recensioni */
    .reviews-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 30px;
    }
    
    .review-nav-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: #000;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2rem;
      font-weight: 700;
      backdrop-filter: blur(10px);
    }
    
    .review-nav-btn:hover {
      background: rgba(255, 255, 255, 0.4);
      border-color: rgba(255, 255, 255, 0.6);
      transform: scale(1.1);
    }
    
    .review-dots {
      display: flex;
      gap: 8px;
    }
    
    .review-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .review-dot.active {
      background: var(--cta1);
      transform: scale(1.2);
    }

    /* FAQ */
    .faq{padding:56px 0;background:#fff}
    
    /* Galleria Foto - Carousel */
    .gallery{padding:56px 0 0;background:var(--bg)}
    .gallery-container{position:relative;max-width:1200px;margin:0 auto;overflow:hidden}
    .gallery-carousel{display:flex;transition:transform 0.5s ease-in-out;gap:24px;padding:20px 0}
    .gallery-item{min-width:420px;position:relative;border-radius:20px;overflow:hidden;box-shadow:0 24px 60px rgba(0,0,0,0.18);transition:all 0.4s ease;cursor:pointer;flex-shrink:0;border:1px solid rgba(255,255,255,0.06);background:radial-gradient(120% 120% at 0% 0%, rgba(255,255,255,0.06) 0%, rgba(0,0,0,0) 40%)}
    .gallery-item:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 30px 60px rgba(0,0,0,0.2)}
    .gallery-item img{width:100%;height:280px;object-fit:cover;transition:all 0.4s ease;filter:saturate(1.05)}
    .gallery-item:hover img{transform:scale(1.1)}
    .gallery-overlay{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,rgba(0,0,0,0.8));color:#fff;padding:20px;transform:translateY(100%);transition:all 0.4s ease}
    .gallery-item:hover .gallery-overlay{transform:translateY(0)}
    .gallery-title{font-size:1.2rem;font-weight:700;margin-bottom:8px}
    .gallery-description{font-size:0.9rem;opacity:0.9}
    
    /* Carousel Controls */
    .gallery-controls{display:flex;justify-content:center;gap:16px;margin-top:40px}
    .gallery-btn{background:rgba(255,255,255,0.2);border:2px solid rgba(255,255,255,0.3);color:#fff;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s ease;font-size:1.2rem;backdrop-filter:blur(10px)}
    .gallery-btn:hover{background:rgba(255,255,255,0.3);border-color:rgba(255,255,255,0.5);transform:scale(1.1)}
    .gallery-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
    
    /* Gallery Indicators */
    .gallery-indicators{display:flex;justify-content:center;gap:8px;margin-top:20px}
    .gallery-indicator{width:12px;height:12px;border-radius:50%;background:rgba(255,255,255,0.3);cursor:pointer;transition:all 0.3s ease}
    .gallery-indicator.active{background:rgba(255,255,255,0.8);transform:scale(1.2)}
    @media(max-width:768px){
      .gallery-container{padding:16px}
      .gallery-item{min-width:320px}
    }
    
    /* Books Section - Carosello Libri de Ingl√©s */
    .books-section{padding:80px 0;background:linear-gradient(135deg,var(--primary1),var(--primary2))}
    
    .books-header{text-align:center;margin-bottom:60px}
    
    .books-title{
      font-size:3rem;font-weight:800;color:var(--primary1);
      margin-bottom:1rem;line-height:1.2
    }
    
    .books-subtitle{
      font-size:1.3rem;color:var(--text);max-width:700px;
      margin:0 auto;line-height:1.6
    }
    
    .books-grid-container{position:relative;max-width:1200px;margin:0 auto;padding:0 60px}
    
    .books-grid{
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      padding: 20px 0;
    }
    
    .book-item{
      background:#fff;border-radius:16px;overflow:hidden;
      box-shadow:0 8px 20px rgba(0,0,0,0.08);transition:all 0.4s ease;
      cursor:pointer;border:1px solid rgba(0,0,0,0.05);max-width:200px
    }
    
    .book-item:hover{
      transform:translateY(-10px) scale(1.02);box-shadow:0 25px 50px rgba(0,0,0,0.15);
      border-color:var(--cta1)
    }
    
    .book-image{position:relative;overflow:hidden}
    
    .book-image img{
      width:100%;height:160px;object-fit:cover;transition:all 0.4s ease
    }
    
    .book-item:hover .book-image img{transform:scale(1.05)}
    
    .book-info{
      padding:16px;text-align:center;background:#fff
    }
    
    .book-title{
      font-size:0.95rem;font-weight:700;color:var(--primary1);
      margin-bottom:6px;line-height:1.3;min-height:2.2rem
    }
    
    .book-edition{
      font-size:0.8rem;color:var(--muted);margin-bottom:6px;
      font-style:italic
    }
    
    .book-price{
      font-size:1rem;font-weight:800;color:var(--cta1);
      background:var(--primary1);color:#fff;padding:6px 12px;
      border-radius:16px;display:inline-block
    }
    

    
    .books-controls{
      display:flex;justify-content:center;gap:16px;margin-top:40px
    }
    
    .books-btn{
      background:var(--primary1);border:2px solid var(--primary1);color:#fff;
      width:50px;height:50px;border-radius:50%;display:flex;align-items:center;
      justify-content:center;cursor:pointer;font-size:1.5rem;font-weight:700;
      transition:all 0.3s ease;box-shadow:0 5px 15px rgba(0,0,0,0.2)
    }
    
    .books-btn:hover{
      background:var(--cta1);border-color:var(--cta1);color:var(--primary1);
      transform:scale(1.1);box-shadow:0 8px 25px rgba(0,0,0,0.3)
    }
    
    .books-btn:disabled{
      opacity:0.5;cursor:not-allowed;transform:none
    }
    
    .books-indicators{
      display:flex;justify-content:center;gap:8px;margin-top:20px
    }
    
    .books-indicator{
      width:12px;height:12px;border-radius:50%;background:var(--muted);
      cursor:pointer;transition:all 0.3s ease
    }
    
    .books-indicator.active{
      background:var(--cta1);transform:scale(1.2)
    }
    
    .ver-mas-container{
      display:flex;justify-content:center;margin-top:60px;margin-bottom:40px
    }
    
    .ver-mas-btn{
      background:linear-gradient(145deg, #ffffff, #e5e7eb);color:var(--primary1);padding:14px 28px;border-radius:25px;
      text-decoration:none;font-weight:600;font-size:1rem;transition:all 0.3s ease;
      box-shadow:0 4px 15px rgba(0,0,0,0.1);display:inline-block;border:2px solid var(--primary1)
    }
    
    .ver-mas-btn:hover{
      background:var(--primary1);color:#fff;transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.15)
    }
    
    /* Stili per libri clonati */
    .book-item.cloned {
      opacity: 0.8;
    }
    
    /* Responsive per la griglia libri */
    @media (max-width: 768px) {
      .books-grid-container {
        max-width: 100%;
        padding: 0 20px;
      }
      
      .books-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
        padding: 16px 0;
      }
      
      .book-item {
        min-width: auto;
        max-width: none;
      }
      
      .book-image img {
        height: 120px;
      }
      
      .book-info {
        padding: 12px;
      }
      
      .book-title {
        font-size: 0.85rem;
        min-height: 2rem;
      }
      
      .book-edition {
        font-size: 0.75rem;
      }
      
      .book-price {
        font-size: 0.9rem;
        padding: 5px 10px;
      }
    }
    
    /* Sezione Legale */
    .books-legal{
      max-width:800px;margin:60px auto 0;padding:40px;background:var(--bg);
      border-radius:20px;text-align:center
    }
    
    .legal-title{
      font-size:2rem;font-weight:700;color:var(--primary1);
      margin-bottom:30px
    }
    
    .legal-content{text-align:left}
    
    .legal-content p{
      margin-bottom:15px;color:var(--text);line-height:1.6
    }
    
    .legal-content ul{
      margin:20px 0;padding-left:20px
    }
    
    .legal-content li{
      margin-bottom:8px;color:var(--text)
    }
    
    .legal-highlights{
      background:rgba(255,255,255,0.3);padding:20px;border-radius:15px;
      margin:25px 0
    }
    
    .legal-cta{
      background:var(--primary1);color:#fff;padding:25px;border-radius:15px;
      margin-top:25px
    }
    
    .legal-cta p{
      color:#fff;margin-bottom:8px
    }
    
    /* Blog Secci√≥n */
    .blog{padding:56px 0;background:#fff}
    .blog-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:32px;margin-top:40px}
    .blog-card{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.1);transition:all 0.4s ease;border:1px solid #f0f0f0}
    .blog-card:hover{transform:translateY(-8px);box-shadow:0 20px 50px rgba(0,0,0,0.15)}
    .blog-image{width:100%;height:200px;overflow:hidden}
    .blog-image img{width:100%;height:100%;object-fit:cover;transition:all 0.4s ease}
    .blog-card:hover .blog-image img{transform:scale(1.1)}
    .blog-content{padding:24px}
    .blog-tag{display:inline-block;background:var(--bg);color:var(--primary1);padding:6px 12px;border-radius:20px;font-size:0.8rem;font-weight:600;margin-bottom:16px;text-transform:uppercase}
    .blog-title{font-size:1.3rem;font-weight:700;color:var(--primary1);margin-bottom:12px;line-height:1.4}
    .blog-excerpt{color:var(--muted);line-height:1.6;margin-bottom:20px}
    .blog-meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:0.9rem}
    .blog-date{display:flex;align-items:center;gap:6px}
    .blog-read{color:var(--cta1);font-weight:600;text-decoration:none;transition:color 0.3s ease}
    .blog-read:hover{color:var(--primary1)}
    
    /* Blog Page */
    .blog-page{padding:80px 0;background:#fff}
    .blog-header{text-align:center;margin-bottom:60px}
    .blog-header h1{font-size:3.5rem;font-weight:800;color:var(--primary1);margin-bottom:20px;background:linear-gradient(135deg,var(--cta1),var(--cta2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .blog-header p{font-size:1.2rem;color:var(--muted);max-width:600px;margin:0 auto}
    details{border:1px solid #e5e7eb;border-radius:12px;padding:14px;background:#fff}
    details+details{margin-top:12px}
    summary{cursor:pointer;font-weight:700;color:#111827}

    /* Map + Contact */
    .contact{background:#2d3748;color:#fff;padding:64px 0}
    .contact-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:22px}
    .contact-grid .contact-horarios-social{grid-column:1/-1;display:flex;justify-content:space-between;align-items:flex-start;gap:20px;width:100%;margin-top:10px}
    .contact-grid .contact-horarios-social .contact-horarios{flex:1;min-width:0}
    .contact-grid .contact-horarios-social .social-icons{display:flex;gap:12px;flex-shrink:0;margin-left:20px}
    .contact-title{font-size:1.1rem;font-weight:800;margin-bottom:4px}
    .contact-info{color:#cbd5e1}
    .map-wrap{margin-top:18px;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    
    /* Contact Horarios + Social Layout */
    .contact-horarios-social{display:flex;justify-content:space-between;align-items:flex-start;gap:20px;width:100%}
    .contact-horarios{flex:1;min-width:0}
    .social-icons{display:flex;gap:12px;flex-shrink:0;margin-left:20px}
    .social-icon{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;text-decoration:none;transition:all 0.3s ease;border:2px solid rgba(255,255,255,0.2);color:#fff}
    .social-icon:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,0.3)}
    .social-icon svg{width:16px;height:16px;fill:currentColor}
    .social-icon.facebook{background:linear-gradient(135deg,#1877f2,#0d6efd);color:#fff}
    .social-icon.facebook:hover{border-color:#1877f2}
    .social-icon.instagram{background:linear-gradient(135deg,#e4405f,#f77737);color:#fff}
    .social-icon.instagram:hover{border-color:#e4405f}
    .social-icon.tiktok{background:linear-gradient(135deg,#000000,#25f4ee);color:#fff}
    .social-icon.tiktok:hover{border-color:#25f4ee}

    /* Footer */
    .footer{
  background:linear-gradient(135deg,var(--primary1),var(--primary2)); /* STESSO GRADIENTE HERO */
  color:#fff;text-align:center;padding:16px 0
    }
    
    .footer-links a:hover{color:var(--cta1)}
    
    /* Floating WhatsApp */
    .floating-whatsapp{position:fixed;right:18px;bottom:86px;background:var(--whatsapp);width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.6rem;box-shadow:0 8px 24px rgba(37,211,102,.35);z-index:900;animation:pulse 2s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}



    /* Upsells */
    .upsells{margin:20px 0}
    .upsell-item{display:flex;align-items:center;justify-content:space-between;padding:12px;border:1px solid #e2e8f0;border-radius:8px;margin:8px 0}
    .upsell-checkbox{margin-right:12px;transform:scale(1.2)}
    .upsell-info{flex:1}
    .upsell-title{font-weight:600;color:var(--text)}
    .upsell-desc{font-size:.9rem;color:var(--muted)}
    .upsell-price{font-weight:700;color:var(--primary1)}

    /* Responsive - Mobile Optimization */
    @media(max-width:768px){
      /* Hero Section - Ultra Compact */
      .hero {
        padding: 80px 0 40px;
      }
      .hero h1 {
        font-size: 2.2rem;
        margin-bottom: 1rem;
      }
      .hero-subtitle {
        font-size: 1rem;
        margin-bottom: 1.5rem;
      }
      .hero-main {
        flex-direction: column;
        gap: 30px;
        margin-bottom: 30px;
      }
      .hero-photo-container {
        height: 250px;
        border-radius: 20px;
      }
      
      /* Stats - Compact */
      .hero-stats {
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-top: 20px;
        margin-bottom: 20px;
        padding: 15px 0;
      }
      .stat-number {
        font-size: 1.8rem;
        margin-bottom: 0.2rem;
      }
      .stat-label {
        font-size: 0.75rem;
      }
      
      /* CTA Buttons - Compact */
      .hero-cta {
        gap: 12px;
        flex-wrap: wrap;
        flex-direction: column;
      }
      .cta-primary {
        padding: 12px 20px;
        font-size: 0.9rem;
      }
      /* Reorder hero CTAs on mobile: first VER PRECIOS Y PAQUETES, then COTIZAR AHORA */
      .hero-cta a[href="#services-packages"]{order:1}
      .hero-cta a[href="#calculator"]{order:2}
      
      /* Section Titles - Smaller */
      .section-title {
        font-size: 1.8rem;
        margin: 32px 0 16px;
      }
      
      /* About Section - Extra Compact */
      .about { padding: 28px 0; }
      .about-hero { grid-template-columns: 1fr; gap: 20px; text-align: center; }
      .about-title { font-size: 1.6rem; }
      .about-description { font-size: 0.95rem; }
      .about-stats { gap: 10px; }
      .about-stat { padding: 10px; gap: 10px; }
      .stat-icon { width: 36px; height: 36px; font-size: 1.2rem; }
      .stat-info strong { font-size: 0.95rem; }
      .stat-info span { font-size: 0.8rem; }
      .about-features-grid { grid-template-columns: 1fr; gap: 10px; }
      .feature-item { padding: 10px 12px; }
      .feature-item span { font-size: 0.9rem; }
      .about-image-container img { height: 240px; }
      .image-overlay { padding: 14px; }
      .overlay-icon { font-size: 1.2rem; }
      .overlay-text { font-size: 0.9rem; }
      .about-actions { justify-content: center; gap: 10px; }
      
      /* Services & Packages - Ultra Compact */
      .services-packages {
        padding: 32px 0;
      }
      .services-packages-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      .services-section, .packages-section {
        padding: 16px;
      }
      .subsection-title {
        font-size: 1.2rem;
        margin-bottom: 16px;
      }
      .service-compact {
        padding: 10px;
        gap: 12px;
        
      /* Books Section - Mobile Responsive */
      .books-section {
        padding: 40px 0;
      }
      .books-title {
        font-size: 2.2rem;
        margin-bottom: 0.8rem;
      }
      .books-subtitle {
        font-size: 1.1rem;
        margin-bottom: 40px;
      }
      .book-item {
        min-width: 250px;
      }
      .book-image img {
        height: 280px;
      }
      .book-title {
        font-size: 1rem;
        min-height: 2.4rem;
      }
      .book-edition {
        font-size: 0.8rem;
      }
      .book-price {
        font-size: 1rem;
        padding: 6px 12px;
      }
      .books-legal {
        padding: 25px;
        margin: 40px auto 0;
      }
      .legal-title {
        font-size: 1.6rem;
        margin-bottom: 20px;
      }
      .legal-content p {
        font-size: 0.9rem;
        margin-bottom: 12px;
      }
      .legal-highlights {
        padding: 15px;
        margin: 20px 0;
      }
      .legal-cta {
        padding: 20px;
        margin-top: 20px;
      }
      .legal-cta p {
        font-size: 0.9rem;
        margin-bottom: 6px;
      }
      }
      .service-icon {
        width: 35px;
        height: 35px;
        font-size: 1.2rem;
      }
      .service-info h4 {
        font-size: 1rem;
      }
      .service-price-compact {
        font-size: 1.1rem;
      }
      .service-info p {
        font-size: 0.8rem;
      }
      .package-compact {
        padding: 10px;
        gap: 8px;
      }
      .package-info h4 {
        font-size: 1rem;
      }
      .package-price {
        font-size: 1.2rem;
      }
      .package-info p {
        font-size: 0.8rem;
      }
      .package-cta {
        padding: 6px 12px;
        font-size: 0.8rem;
      }
      
      /* Calculator - Compact */
      .calculator-section {
        padding: 32px 0;
      }
      .calculator-card {
        padding: 16px;
        margin: 0 16px;
      }
      .calculator-title {
        font-size: 1.2rem;
        margin-bottom: 8px;
      }
      .calc-field {
        padding: 12px;
        font-size: 1rem;
        border-radius: 12px;
      }
      .calc-input {
        margin-bottom: 16px;
      }
      .calc-label {
        font-size: 1rem;
        margin-bottom: 8px;
      }
      .calc-options {
        gap: 6px;
        margin: 6px 0;
      }
      .calc-option {
        padding: 8px;
        font-size: 0.85rem;
        gap: 8px;
      }
      .option-icon {
        font-size: 1.2rem;
      }
      .calc-result {
        padding: 12px;
        margin: 12px 0;
      }
      .calc-total {
        font-size: 1.8rem;
      }
      .calc-actions {
        gap: 8px;
        margin-top: 16px;
        justify-content: center;
        display: flex;
      }
      .cta-whatsapp, .cta-online, .cta-call {
        padding: 12px 16px;
        font-size: 0.9rem;
      }
      .quantity-examples {
        gap: 4px;
        font-size: 0.75rem;
        margin-top: 8px;
      }
      
      /* PDF pages input responsive */
      #pdf-pages-input {
        font-size: 0.9rem;
        padding: 8px 12px;
      }
      
      /* Reviews - Compact */
      .reviews {
        padding: 24px 0;
      }
      .rev-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }
      .rev-card {
        padding: 10px;
        font-size: 0.85rem;
      }
      .avatar {
        width: 35px;
        height: 35px;
      }
      
      /* Gallery - Compact */
      .gallery {
        padding: 24px 0;
      }
      .gallery-item {
        min-width: 200px;
      }
      .gallery-carousel {
        gap: 8px;
        padding: 8px 0;
      }
      .gallery-controls {
        margin-top: 16px;
      }
      .gallery-btn {
        width: 35px;
        height: 35px;
        font-size: 0.8rem;
      }
      
      /* FAQ - Compact */
      .faq {
        padding: 24px 0;
      }
      details {
        padding: 8px;
      }
      summary {
        font-size: 0.85rem;
      }
      
      /* Contact - Compact */
      .contact {
        padding: 24px 0;
      }
      .contact-grid {
        gap: 12px;
      }
      
      /* Footer - Compact */
      .footer-links {
        gap: 1rem;
        margin-bottom: 0.5rem;
      }
      
      /* Contact Horarios + Social Mobile */
      .contact-grid .contact-horarios-social {
        flex-direction: column;
        gap: 16px;
        align-items: center;
      }
      .contact-grid .contact-horarios-social .contact-horarios {
        text-align: center;
      }
      .contact-grid .contact-horarios-social .social-icons {
        gap: 10px;
        margin-left: 0;
      }
      .contact-grid .contact-horarios-social .social-icon {
        width: 35px;
        height: 35px;
      }
      .contact-grid .contact-horarios-social .social-icon svg {
        width: 14px;
        height: 14px;
      }
      
      /* Hero - Compact */
      .hero {
        padding: 40px 0;
        min-height: 60vh;
      }
      .hero-main {
        gap: 24px;
      }
      .hero-left h1 {
        font-size: 2rem;
        margin-bottom: 12px;
      }
      .hero-subtitle {
        font-size: 1rem;
        margin-bottom: 20px;
      }
      .hero-stats {
        gap: 12px;
        margin-bottom: 20px;
      }
      .stat-item {
        gap: 4px;
      }
      .stat-number {
        font-size: 1.5rem;
        padding: 6px 10px;
      }
      .stat-label {
        font-size: 0.75rem;
      }
      .hero-cta {
        gap: 10px;
      }
      .cta-primary {
        padding: 12px 18px;
        font-size: 0.9rem;
      }
      
      /* About - Compact */
      .about {
        padding: 40px 0;
      }
      .about-hero {
        grid-template-columns: 1fr;
        gap: 32px;
        text-align: center;
      }
      .about-title {
        font-size: 2.2rem;
      }
      .about-description {
        font-size: 1.1rem;
      }
      .about-stats {
        gap: 16px;
      }
      .about-stat {
        padding: 16px;
      }
      .stat-icon {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
      }
      .about-features-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }
      .feature-item {
        padding: 10px 14px;
      }
      .about-actions {
        justify-content: center;
      }
      .about-image-container img {
        height: 350px;
      }
      
      /* Header - Compact */
      .nav {
        padding: 8px 16px;
      }
      .logo {
        height: 35px;
      }
      .logo img {
        height: 35px;
      }
      .contact-header {
        gap: 8px;
        font-size: 0.8rem;
      }
      .whatsapp-btn, .blog-btn, .nosotros-btn, .servicios-btn, .contacto-btn {
        padding: 6px 10px;
        font-size: 0.8rem;
      }
      
      /* Container - Tighter */
      .container {
        padding: 0 16px;
      }
      
      /* Floating WhatsApp - Adjusted */
      .floating-whatsapp {bottom: 70px;width: 50px;height: 50px;font-size: 1.4rem;z-index: 600}
    }

    /* Hidden by default */
    .hidden{display:none !important}
    
    /* Mobile molto piccolo - Ultra Compact */
    @media(max-width:480px){
      /* Hero - Extra Compact */
      .hero {
        padding: 60px 0 30px;
      }
      .hero h1 {
        font-size: 1.8rem;
      }
      .hero-subtitle {
        font-size: 0.9rem;
      }
      .hero-photo-container {
        height: 200px;
      }
      
      /* Stats - Extra Small */
      .hero-stats {
        gap: 10px;
        margin-top: 15px;
        margin-bottom: 15px;
        padding: 10px 0;
      }
      .stat-number {
        font-size: 1.5rem;
      }
      .stat-label {
        font-size: 0.7rem;
      }
      
      /* CTA - Stacked */
      .hero-cta {
        flex-direction: column;
        gap: 8px;
      }
      .cta-primary {
        padding: 10px 16px;
        font-size: 0.85rem;
      }
      
      /* Reviews - Single Column */
      .rev-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }
      
      /* Services & Packages - Extra Compact */
      .services-section, .packages-section {
        padding: 12px;
      }
      .service-compact {
        padding: 8px;
      }
      .package-compact {
        padding: 8px;
      }
      
      /* Calculator - Extra Compact */
      .calculator-card {
        padding: 12px;
        margin: 0 8px;
      }
      .calc-title {
        font-size: 1.1rem;
        margin-bottom: 6px;
      }
      .calc-field {
        padding: 10px;
        font-size: 0.9rem;
        border-radius: 10px;
      }
      .calc-input {
        margin-bottom: 12px;
      }
      .calc-label {
        font-size: 0.9rem;
        margin-bottom: 6px;
      }
      .calc-options {
        grid-template-columns: 1fr;
        gap: 4px;
        margin: 4px 0;
      }
      .calc-option {
        padding: 6px;
        font-size: 0.8rem;
        gap: 6px;
      }
      .option-icon {
        font-size: 1.1rem;
      }
      .calc-result {
        padding: 8px;
        margin: 8px 0;
      }
      .calc-total {
        font-size: 1.5rem;
      }
      .calc-actions {
        gap: 6px;
        margin-top: 12px;
      }
      .cta-whatsapp, .cta-online, .cta-call {
        padding: 10px 14px;
        font-size: 0.8rem;
      }
      .quantity-examples {
        gap: 3px;
        font-size: 0.7rem;
        margin-top: 6px;
      }
      
      /* Header - Extra Compact */
      .nav {
        padding: 6px 12px;
      }
      .logo {
        height: 30px;
      }
      .logo img {
        height: 30px;
      }
      .contact-header {
        font-size: 0.7rem;
      }
      .whatsapp-btn, .blog-btn, .nosotros-btn, .servicios-btn, .contacto-btn {
        padding: 4px 8px;
        font-size: 0.7rem;
      }
      
      /* Container - Extra Tight */
      .container {
        padding: 0 12px;
      }
      
      /* Section Titles - Extra Small */
      .section-title {
        font-size: 1.5rem;
        margin: 24px 0 12px;
      }
    }
    
    /* Stili per la sezione legale estesa - Design Invertito CORRETTO */
    .legal-section-extended {
      margin-top: 50px;
      padding: 60px 0 60px 0; /* spazio di respiro dal footer, sfondo bianco */
      background: #ffffff;
      width: 100%;
      margin-left: 0;
      margin-right: 0;
    }
    
    /* Fix per mobile - evita overflow orizzontale */
    @media (max-width: 768px) {
      .legal-section-extended {
        margin-top: 30px;
        padding: 40px 0;
        width: 100%;
        margin-left: 0;
        margin-right: 0;
      }
    }
    
    .legal-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      justify-items: center; /* centra le card nella colonna */
      align-items: start;
    }
    
    .legal-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px; /* ~20% in meno */
      background: #000000;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      max-width: 340px; /* restringe la card e la centra */
      width: 100%;
    }
    
    .legal-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.3);
      background: #111111;
    }
    
    .legal-icon {
      font-size: 2rem;
      min-width: 50px;
      text-align: center;
      filter: brightness(1.2);
    }
    
    .legal-content h4 {
      margin: 0 0 5px 0;
      font-size: 0.9rem;
      font-weight: 700;
      color: #ffffff;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    
    .legal-content p {
      margin: 0;
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.8);
      line-height: 1.4;
    }
    
    /* Stili per i libri migliorati - Design Apple Style */
    .book-item-enhanced {
      position: relative;
      overflow: hidden;
      border-radius: 16px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 16px 40px rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.06);
    }
    .book-item-enhanced::before{
      content:'';
      position:absolute;inset:0;
      pointer-events:none;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0));
    }
    
    .book-item-enhanced:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.25);
    }
    
    .book-item-enhanced img {
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .book-item-enhanced:hover img {
      transform: scale(1.05);
    }
    
    .book-item-enhanced .gallery-overlay {
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 30px;
      background: linear-gradient(180deg, 
        transparent 0%, 
        rgba(0,0,0,0.4) 20%, 
        rgba(0,0,0,0.8) 60%, 
        rgba(0,0,0,0.95) 100%);
      backdrop-filter: blur(10px);
    }
    
    .book-item-enhanced .gallery-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: #fff;
      text-shadow: 0 3px 6px rgba(0,0,0,0.6);
      line-height: 1.3;
      letter-spacing: -0.01em;
    }
    
    .book-item-enhanced .book-edition {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.85);
      margin-bottom: 12px;
      font-weight: 500;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .book-item-enhanced .book-price {
      font-size: 1.4rem;
      font-weight: 800;
      color: var(--cta1);
      margin-bottom: 10px;
      text-shadow: 0 3px 6px rgba(0,0,0,0.8);
      letter-spacing: 0.2px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 14px;
      background: rgba(0,0,0,0.85);
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.04), 0 8px 24px rgba(0,0,0,0.25);
    }
    
    .book-item-enhanced .book-price::before {
      content: 'üí∞';
      font-size: 1.2rem;
    }
    
    .book-item-enhanced .book-service {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.9);
      font-weight: 600;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
      background: rgba(181, 255, 0, 0.18);
      padding: 6px 12px;
      border-radius: 20px;
      display: inline-block;
      border: 1px solid rgba(181, 255, 0, 0.35);
      backdrop-filter: blur(3px);
    }
    
    /* Responsive per la sezione legale */
    @media (max-width: 768px) {
      .legal-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        padding: 0 15px;
      }
      
      .legal-item {
        padding: 15px;
      }
      
      .legal-icon {
        font-size: 1.5rem;
        min-width: 40px;
      }
      
      .legal-content h4 {
        font-size: 0.8rem;
      }
      
      .legal-content p {
        font-size: 0.8rem;
      }
    }
    
    /* Stili per il carosello migliorato - FIXED */
    .gallery-container {
      position: relative;
      overflow: hidden;
      width: 100%;
      background: linear-gradient(135deg, var(--primary1), var(--primary2));
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .gallery-carousel {
      display: flex;
      gap: 20px;
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 10px 0;
      width: max-content; /* Importante per il carosello */
      min-height: 300px; /* Altezza minima per evitare salti */
    }
    
    .gallery-item {
      min-width: 400px;
      flex-shrink: 0;
      height: 280px; /* Altezza fissa per consistenza */
    }
    
    .gallery-controls {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      display: flex;
      justify-content: space-between;
      pointer-events: none;
      z-index: 10;
    }
    
    .gallery-btn {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: auto;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .gallery-btn:hover {
      background: rgba(0, 0, 0, 0.9);
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }
    
    .gallery-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .gallery-indicators {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }
    
    .gallery-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid transparent;
    }
    
    .gallery-indicator:hover {
      background: rgba(255, 255, 255, 0.6);
      transform: scale(1.2);
    }
    
    .gallery-indicator.active {
      background: var(--cta1);
      border-color: rgba(255, 255, 255, 0.8);
      box-shadow: 0 0 10px rgba(181, 255, 0, 0.5);
    }
    
    /* Stili per le recensioni */
    .avatar-placeholder {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary1);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }
    
    .review-info {
      flex: 1;
      margin-left: 15px;
    }
    
    .rev-top {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .review-name {
      font-weight: bold;
      color: var(--text);
      margin-bottom: 5px;
    }
    
    .review-stars {
      color: #ffd700;
      margin-bottom: 5px;
    }
    
    .review-date {
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    .review-text {
      margin-top: 15px;
      color: var(--text);
      line-height: 1.5;
    }
    
    /* Mobile navigation and layout tuning (non-intrusive) */
    @media(max-width:768px){
      .header{position:sticky;top:0;z-index:1000;background:linear-gradient(135deg,var(--primary1),var(--primary2));backdrop-filter:blur(10px)}
      .nav{padding:8px 16px}
      .logo{height:40px}
      .logo img{height:40px}
      
      .hero{padding-top:20px}
      .hero-left{text-align:center;margin:0 auto}
      .hero-stats{justify-content:center}
      .section-title{font-size:1.5rem}
      .contact-header{display:none}
      
      /* Fix per prevenire overflow orizzontale */
      .container {
        padding: 0 16px;
        max-width: 100%;
        overflow-x: hidden;
      }
      
      /* Assicura che tutti gli elementi rispettino la larghezza del viewport */
      * {
        max-width: 100%;
        box-sizing: border-box;
      }
      
      /* Fix per elementi che potrebbero causare scroll infinito */
      .floating-whatsapp {
        bottom: 20px;
        right: 20px;
      }
      
      .main-navigation{display:none}
    }
    

  </style>
</head>
  <body>
    <!-- Menu Mobile Semplificato -->
    <button class="mobile-nav-button" onclick="toggleMobileMenu()">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <nav class="mobile-slide-menu" id="mobileSlideMenu">
      <div class="slide-menu-header">
        <span class="mobile-logo">COPIMAX</span>
        <button class="close-slide-menu" onclick="closeMobileSlideMenu()">√ó</button>
      </div>
      <div class="slide-menu-nav">
        <a href="/" onclick="closeMobileSlideMenu()">üè† Inicio</a>
        <a href="/servicios" onclick="closeMobileSlideMenu()">üñ®Ô∏è Servicios</a>
        <a href="/copias-volumen-cdmx" onclick="closeMobileSlideMenu()">üì¶ Volumen</a>
        <a href="/nosotros" onclick="closeMobileSlideMenu()">üè¢ Nosotros</a>
        <a href="/blog" onclick="closeMobileSlideMenu()">üìù Blog</a>
        <a href="/contacto" onclick="closeMobileSlideMenu()">üìç Contacto</a>
      </div>
      
      <!-- Sezione contatti mobile -->
      <div class="slide-menu-footer">
        <div class="mobile-contact">
          <span>üìû 55-4021-9892</span>
          <a href="https://wa.me/525540219892?text=Hola%20COPIMAX,%20necesito%20cotizaci√≥n%20para%20copias%20e%20impresiones.%20¬øPueden%20ayudarme?" class="whatsapp" target="_blank" onclick="closeMobileSlideMenu()">üí¨ WhatsApp</a>
        </div>
      </div>
    </nav>

    <!-- Header -->
  <header class="header">
    <nav class="nav">
      <div class="logo" onclick="window.location.href='/'">
        <img src="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="COPIMAX Logo">
      </div>
      
      <!-- Menu Principale Elegante in Stile Apple -->
      <div class="main-navigation">
        <a href="/" class="nav-link active">Inicio</a>
        <a href="/servicios" class="nav-link">Servicios</a>
        <a href="/copias-volumen-cdmx" class="nav-link">Volumen</a>
        <a href="/nosotros" class="nav-link">Nosotros</a>
        <a href="/blog" class="nav-link">Blog</a>
        <a href="/contacto" class="nav-link">Contacto</a>
      </div>
      
      <div class="contact-header">
        <span>üìû 55-4021-9892</span>
                    <a class="whatsapp-btn" href="https://wa.me/525540219892?text=Hola%20COPIMAX,%20necesito%20cotizaci√≥n%20para%20copias%20e%20impresiones.%20¬øPueden%20ayudarme?" target="_blank" rel="noopener">üí¨ WhatsApp</a>
      </div>
    </nav>
    </header>
  

  
  <!-- HOME PAGE -->
  <div id="homepage">
    <!-- Hero -->
    <section class="hero">
      <div class="hero-content">
        <div class="hero-main">
          <div class="hero-left">
            <div class="hero-logo">
              <img src="https://images.unsplash.com/photo-1756072560912-1812dd261cf1?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="COPIMAX Logo">
            </div>
            <h1>Centro de Copias e Impresiones</h1>
            <p class="hero-description">Imprenta con m√°s de 25 a√±os de experiencia, COPIMAX es tu centro de copias de confianza en Iztacalco.</p>
            
            <div class="hero-stats">
              <div class="stat-item">
                <div class="stat-number">25+</div>
                <div class="stat-label">A√±os de experiencia</div>
              </div>
              <div class="stat-item">
                <div class="stat-number">4.9‚≠ê</div>
                <div class="stat-label">Clientes felices</div>
              </div>
              <div class="stat-item">
                <div class="stat-number" id="counter-copias">12.2M+</div>
                <div class="stat-label">Copias realizadas</div>
              </div>
            </div>
          </div>
          
          <div class="hero-right">
            <div class="hero-photo-container">
                <img src="https://images.unsplash.com/photo-1756066685329-16873485da1d?q=80&w=870&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="COPIMAX - Centro de Copias e Impresiones Iztacalco">
            </div>
          </div>
        </div>
        

        
        <div class="hero-cta">
          <a href="#calculator" class="cta-primary">üõí COTIZAR AHORA</a>
          <a href="#services-packages" class="cta-primary">üí∞ VER PRECIOS Y PAQUETES</a>
        </div>
      </div>
    </section>

    <!-- Video Reels Section - COPIMAX in Action -->
    <section class="video-reels-section">
      <div class="container">
        <div class="reels-header">
          <h2 class="section-title">COPIMAX en Acci√≥n</h2>
          <p class="reels-subtitle">Descubre c√≥mo trabajamos para ti</p>
        </div>
        
        <div class="reels-container">
          <div class="reels-grid">
            <!-- Video Reel 1 -->
            <div class="video-reel-card" data-video="reel1">
              <div class="video-container">
                <iframe 
                  src="https://player.vimeo.com/video/1114635953?autoplay=0&muted=0&loop=1&controls=1&title=0&byline=0&portrait=0&transparent=0" 
                  class="reel-video"
                  frameborder="0" 
                  allowfullscreen>
                </iframe>
                <div class="video-overlay">
                  <div class="play-button">‚ñ∂</div>
                  <h3 class="video-title">Impresi√≥n R√°pida</h3>
                  <p class="video-description">Proceso de impresi√≥n en tiempo real</p>
                </div>
              </div>
            </div>

            <!-- Video Reel 2 -->
            <div class="video-reel-card" data-video="reel2">
              <div class="video-container">
                <iframe 
                  src="https://player.vimeo.com/video/1114635200?autoplay=0&muted=0&loop=1&controls=1&title=0&byline=0&portrait=0&transparent=0" 
                  class="reel-video"
                  frameborder="0" 
                  allowfullscreen>
                </iframe>
                <div class="video-overlay">
                  <div class="play-button">‚ñ∂</div>
                  <h3 class="video-title">Calidad Profesional</h3>
                  <p class="video-description">Nuestros equipos de √∫ltima generaci√≥n</p>
                </div>
              </div>
            </div>

            <!-- Video Reel 3 -->
            <div class="video-reel-card" data-video="reel3">
              <div class="video-container">
                <iframe 
                  src="https://player.vimeo.com/video/1114634874?autoplay=0&muted=0&loop=1&controls=1&title=0&byline=0&portrait=0&transparent=0" 
                  class="reel-video"
                  frameborder="0" 
                  allowfullscreen>
                </iframe>
                <div class="video-overlay">
                  <div class="play-button">‚ñ∂</div>
                  <h3 class="video-title">Servicio Express</h3>
                  <p class="video-description">Entrega r√°pida y confiable</p>
                </div>
              </div>
            </div>

            <!-- Video Reel 4 -->
            <div class="video-reel-card" data-video="reel4">
              <div class="video-container">
                <iframe 
                  src="https://player.vimeo.com/video/1114635067?autoplay=0&muted=0&loop=1&controls=1&title=0&byline=0&portrait=0&transparent=0" 
                  class="reel-video"
                  frameborder="0" 
                  allowfullscreen>
                </iframe>
                <div class="video-overlay">
                  <div class="play-button">‚ñ∂</div>
                  <h3 class="video-title">Atenci√≥n Personalizada</h3>
                  <p class="video-description">Equipo especializado para ti</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Servicios y Paquetes - Secci√≥n Unificada -->
    <section id="services-packages" class="services-packages">
      <div class="container">
        <div class="services-packages-header">
          <h2 class="section-title">Nuestros Servicios de Imprenta y Paquetes</h2>
          <p style="text-align:center;color:var(--muted);margin-bottom:40px;font-size:1.1rem">Todos tus documentos con la mejor calidad</p>
        </div>
        
        <div class="services-packages-grid">
          <!-- Servicios -->
          <div class="services-section">
            <h3 class="subsection-title">Servicios Principales</h3>
            <div class="services-compact">
              <div class="service-compact">
                <div class="service-icon">üìÑ</div>
                <div class="service-info">
                  <h4><a href="/servicios" style="color:#111">Copias BN ‚Ä¢ m√°s de 100</a></h4>
                  <div class="service-price-compact">$0.35 - $0.40</div>
                  <p>Una/doble cara</p>
                  <p style="font-size: 0.85rem; color: #059669; margin-top: 4px; font-weight: 600;">1-100 copias: $1 MXN</p>
                </div>
              </div>
              <div class="service-compact">
                <div class="service-icon">üé®</div>
                <div class="service-info">
                  <h4><a href="/servicios" style="color:#111">Impresi√≥n Color $5 - $10</a></h4>
                  <div class="service-price-compact">$5 - $10</div>
                  <p>Textos y fotos</p>
                </div>
              </div>
              <div class="service-compact">
                <div class="service-icon">üìö</div>
                <div class="service-info">
                  <h4>Engargolado</h4>
                  <div class="service-price-compact">Desde $20</div>
                  <p>Profesional</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Paquetes -->
          <div class="packages-section">
            <div class="packages-header">
              <span class="deal-badge">PRECIOS COPIAS</span>
              <h3 class="subsection-title">Paquetes Populares</h3>
            </div>
            <div class="packages-compact">
              <div class="package-compact">
                <div class="package-info">
                  <h4>1000 copias BN</h4>
                  <div class="package-price">$350 MXN</div>
                  <p id="package-face-type">BN una cara, mismo d√≠a</p>
                  <div class="face-toggle" style="margin-top: 8px;">
                    <button class="face-btn active" data-face="single" onclick="toggleFace(this, 'single')">Una Cara</button>
                    <button class="face-btn" data-face="double" onclick="toggleFace(this, 'double')">Doble Cara</button>
                  </div>
                </div>
                <button class="package-cta" data-deal="1000 BN una cara $350" id="package-cta-btn">Pedir</button>
              </div>
              <div class="package-compact">
                <div class="package-info">
                  <h4>200 color</h4>
                  <div class="package-price">$1000 MXN</div>
                  <p>Textos/logos</p>
                </div>
                <button class="package-cta" data-deal="200 color texto/logos $1000">Pedir</button>
              </div>
              <div class="package-compact">
                <div class="package-info">
                  <h4>25,000 copias BN</h4>
                  <div class="package-price">$8,750 / $10,000 MXN</div>
                  <p>Tarifa fija por p√°gina ‚Ä¢ 24‚Äì48h</p>
                </div>
                <a class="package-cta" href="/copias-volumen-cdmx">Cotizar volumen</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Calculator -->
    <section id="calculator" class="calculator-section">
      <div class="container">
        <div class="calc-hero">
          <h2>Calculadora de precios COPIMAX</h2>
          <p>Calcula tu precio exacto y cotiza tu orden al instante. Precios claros y sin sorpresas.</p>
        </div>
        
        <div class="calculator-card">
                  <div class="calc-input">
          <label class="calc-label">üìÑ Cantidad de copias</label>
          <input type="number" class="calc-field" id="quantity" placeholder="Ej: 100" value="100" min="1">
          <div class="quantity-examples">
            <span>100 copias = 1 tesis</span>
            <span>500 = material de oficina</span>
          </div>
          
          <!-- INPUT PAGINE PDF -->
          <div style="margin-top: 16px;">
            <label class="calc-label">üìã N√∫mero de p√°ginas del PDF</label>
            <input type="number" class="calc-field" id="pdf-pages-input" placeholder="Ej: 123" value="1" min="1" max="1000">
            <div class="quantity-examples" style="margin-top: 8px;">
              <span>Si no sabes, deja en 1</span>
              <span>El precio se calcula: copias √ó p√°ginas</span>
            </div>
          </div>
          

        </div>

          <div class="calc-options">
            <div class="calc-option active" data-type="copies">
              <div class="option-icon">üìã</div>
              <div class="option-content">
                <strong>Copias</strong><br>Documentos existentes
              </div>
              <div class="option-check">‚úÖ</div>
            </div>
            <div class="calc-option" data-type="prints">
              <div class="option-icon">üíª</div>
              <div class="option-content">
                <strong>Impresiones</strong><br>Desde archivo digital
              </div>
              <div class="option-check">‚úÖ</div>
            </div>
          </div>

          <div class="calc-options">
            <div class="calc-option active" data-color="bw">
              <div class="option-icon">‚ö´</div>
              <div class="option-content">
                <strong>Blanco y Negro</strong><br>$0.35 - $0.40
              </div>
              <div class="option-check">‚úÖ</div>
            </div>
            <div class="calc-option" data-color="color">
              <div class="option-icon">üé®</div>
              <div class="option-content">
                <strong>A Color</strong><br>$5 - $10
              </div>
              <div class="option-check">‚úÖ</div>
            </div>
          </div>

          <!-- Opzioni dettagliate per stampa a colori -->
          <div class="color-details" id="color-details" style="display: none; margin-top: 16px; padding: 16px; background: #f8f9fa; border-radius: 12px; border: 1px solid #e9ecef;">
            <h4 style="margin-bottom: 12px; font-weight: 600; color: #374151;">Tipo de impresi√≥n a color</h4>
            <div class="color-type-options" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
              <div class="color-type-option" data-color-type="text-logo">
                <div style="padding: 12px; background: #fff; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                  <div style="font-weight: 600; margin-bottom: 4px;">üìù Texto y Logo</div>
                  <div style="font-size: 0.9rem; color: #6b7280;">$5 MXN por copia</div>
                </div>
              </div>
              <div class="color-type-option" data-color-type="images">
                <div style="padding: 12px; background: #fff; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                  <div style="font-weight: 600; margin-bottom: 4px;">üñºÔ∏è Im√°genes</div>
                  <div style="font-size: 0.9rem; color: #6b7280;">$10 MXN por copia</div>
                </div>
              </div>
            </div>
            
            <!-- Opzione per calcolo misto -->
            <div class="mixed-calculation" style="margin-top: 16px;">
              <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                <input type="checkbox" id="mixed-calculation" style="margin: 0;">
                <label for="mixed-calculation" style="font-weight: 600; color: #374151;">Calcular precio mixto</label>
              </div>
              
              <div class="mixed-inputs" id="mixed-inputs" style="display: none; grid-template-columns: 1fr 1fr; gap: 12px;">
                <div>
                  <label style="display: block; font-size: 0.9rem; color: #6b7280; margin-bottom: 4px;">Copias texto/logo:</label>
                  <input type="number" id="text-logo-qty" min="0" value="0" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
                </div>
                <div>
                  <label style="display: block; font-size: 0.9rem; color: #6b7280; margin-bottom: 4px;">Copias con im√°genes:</label>
                  <input type="number" id="images-qty" min="0" value="0" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
                </div>
              </div>
            </div>
          </div>

          <div class="calc-options">
            <div class="calc-option active" data-sides="double">
              <div class="option-icon">üìÑ</div>
              <div class="option-content">
                <strong>Doble Cara</strong><br>$0.35 por copia
              </div>
              <div class="option-check">‚úÖ</div>
            </div>
            <div class="calc-option" data-sides="single">
              <div class="option-icon">üìÉ</div>
              <div class="option-content">
                <strong>Una Cara</strong><br>$0.40 por copia
              </div>
              <div class="option-check">‚úÖ</div>
            </div>
          </div>

          <!-- Upsells -->
          <div class="upsells">
            <h4 style="margin-bottom:15px;font-weight:700;color:#374151">Servicios Adicionales</h4>
            <div class="upsell-item">
              <input type="checkbox" class="upsell-checkbox" id="engargolado" data-price="20">
              <div class="upsell-info">
                <div class="upsell-title">Engargolado</div>
                <div class="upsell-desc">Encuadernado profesional con espiral</div>
                <div class="engargolado-options" style="margin-top: 8px; display: none;">
                  <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 8px;">
                    <label style="font-size: 0.9rem; color: #666;">Cantidad:</label>
                    <input type="number" id="engargolado-qty" min="1" value="1" style="width: 60px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                    <label style="font-size: 0.9rem; color: #666;">de</label>
                    <select id="engargolado-size" style="padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                      <option value="100">100 p√°ginas</option>
                      <option value="200">200 p√°ginas</option>
                      <option value="300">300 p√°ginas</option>
                      <option value="500">500 p√°ginas</option>
                    </select>
                  </div>
                  <div style="font-size: 0.8rem; color: #666;">
                    Precio: <span id="engargolado-price">$20</span> por engargolado
                  </div>
                </div>
              </div>
              <div class="upsell-price">+$20</div>
            </div>
            <div class="upsell-item">
              <input type="checkbox" class="upsell-checkbox" id="folders" data-price="15">
              <div class="upsell-info">
                <div class="upsell-title">Folders</div>
                <div class="upsell-desc">Carpeta protectora individual</div>
                <div class="folders-options" style="margin-top: 8px; display: none;">
                  <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 8px;">
                    <label style="font-size: 0.9rem; color: #666;">Cantidad:</label>
                    <input type="number" id="folders-qty" min="1" value="1" style="width: 60px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                    <span style="font-size: 0.9rem; color: #666;">(1 folder individual)</span>
                  </div>
                  <div style="font-size: 0.8rem; color: #666;">
                    Precio: <span id="folders-price">$15</span> por folder
                  </div>
                </div>
              </div>
              <div class="upsell-price">+$15</div>
            </div>
            <div class="upsell-item">
              <input type="checkbox" class="upsell-checkbox" id="laminated" data-price="25">
              <div class="upsell-info">
                <div class="upsell-title">Enmicado</div>
                <div class="upsell-desc">Protecci√≥n con pl√°stico</div>
                <div class="laminated-options" style="margin-top: 8px; display: none;">
                  <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 8px;">
                    <label style="font-size: 0.9rem; color: #666;">Cantidad de hojas:</label>
                    <input type="number" id="laminated-pages" min="1" value="1" step="1" style="width: 80px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;">
                    <span style="font-size: 0.9rem; color: #666;">hojas</span>
                  </div>
                  <div style="font-size: 0.8rem; color: #666;">
                    Precio: <span id="laminated-price">$25</span> por hoja
                  </div>
                </div>
              </div>
              <div class="upsell-price">+$25</div>
            </div>
          </div>

          <div class="calc-result">
            <div class="result-header">
              <div>Precio estimado</div>
              <div class="scarcity-badge" id="dynamic-scarcity-badge">‚è∞ √öltimos 3 lugares para entrega hoy</div>
            </div>
            <div class="calc-total" id="total">$70.00 MXN</div>
                            <div class="result-badge">Precio garantizado ‚Ä¢ Sin costos ocultos</div>
          </div>

          <div class="calc-actions">
            <button id="btn-wa" class="cta-primary cta-whatsapp">
              <span class="cta-icon">üì±</span>
              <span class="cta-text">COTIZAR AHORA</span>
            </button>
            <a href="tel:+525540219892" class="cta-primary cta-call">
              <span class="cta-icon">üìû</span>
              <span class="cta-text">LLAMAR</span>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Continue with Homepage content -->
  <div id="homepage-content">
    <!-- About / Human - Redesigned -->
    <section class="about">
      <div class="container">
        <div class="about-hero">
          <div class="about-content">
            <div class="about-badge">üè† Negocio Familiar</div>
            <h2 class="about-title">No solo somos copias, somos una imprenta tradicional en Iztacalco.</h2>
            <p class="about-description">Con m√°s de 25 a√±os de experiencia COPIMAX te ayuda con tus tareas, manuales, libros, proyectos y m√°s. Oscar dio inicio a un negocio familiar fomentando un trato cercano, precios justos y entregas de emergencia con la mejor calidad.</p>
            
            <div class="about-stats">
              <div class="about-stat">
                <div class="stat-icon">üì±</div>
                <div class="stat-info">
                  <strong>WhatsApp & Email</strong>
                  <span>Archivos digitales</span>
                </div>
              </div>
              <div class="about-stat">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-info">
                  <strong>Mismo D√≠a</strong>
                  <span>Entrega express</span>
                </div>
              </div>
              <div class="about-stat">
                <div class="stat-icon">üí∞</div>
                <div class="stat-info">
                  <strong>Descuentos</strong>
                  <span>+100 copias</span>
                </div>
              </div>
            </div>
            
            <div class="about-features-grid">
              <div class="feature-item">
                <div class="feature-icon">‚úÖ</div>
                <span>Facturaci√≥n disponible</span>
              </div>
              <div class="feature-item">
                <div class="feature-icon">‚úÖ</div>
                <span>Calidad revisada hoja por hoja</span>
              </div>
              <div class="feature-item">
                <div class="feature-icon">‚úÖ</div>
                <span>Delivery en toda la CDMX</span>
              </div>
              <div class="feature-item">
                <div class="feature-icon">‚úÖ</div>
                <span>Precios justos y transparentes</span>
              </div>
            </div>
            
            <div class="about-actions">
              <a href="#contact" class="cta-primary">üìç C√≥mo llegar</a>
            </div>
          </div>
          
          <div class="about-visual">
            <div class="about-image-container">
              <img src="https://images.unsplash.com/photo-1756067520753-dd852da7ddb1?q=80&w=870&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="COPIMAX - Negocio familiar en Iztacalco">
              <div class="image-overlay">
                <div class="overlay-content">
                  <div class="overlay-icon">üè†</div>
                  <div class="overlay-text">25+ a√±os de confianza</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="reviews">
      <div class="container">
        <h2 class="section-title">Opiniones de nuestros clientes</h2>
        <div class="rev-grid" id="reviewsGrid">
          <div class="rev-card">
            <div class="rev-top">
              <div class="avatar"><img src="https://images.unsplash.com/photo-1544005313-ff6d9a16f38a?w=96&h=96&fit=crop&crop=faces" alt="Editorial MX"></div>
              <div class="review-info">
                <div class="review-name">Editorial MX</div>
                <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="review-date">Hace 5 d√≠as</div>
              </div>
            </div>
            <div class="review-text">Hicimos un tiraje de 35,000 copias BN para una distribuci√≥n escolar. Entrega en 48h, empaquetado por lotes y calidad constante. Volveremos a trabajar con COPIMAX.</div>
          </div>
          <div class="rev-card">
            <div class="rev-top">
              <div class="avatar"><img src="https://images.unsplash.com/photo-1552374196-c4e7ffc6e126?w=96&h=96&fit=crop&crop=faces" alt="Carlos M."></div>
              <div class="review-info">
                <div class="review-name">Carlos M.</div>
                <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="review-date">Hace 2 semanas</div>
              </div>
            </div>
            <div class="review-text">Excelente servicio, imprimieron mi tesis de 150 p√°ginas en menos de 2 horas. El engargolado qued√≥ perfecto y el precio s√∫per accesible. ¬°Totalmente recomendado!</div>
          </div>
          <div class="rev-card">
            <div class="rev-top">
              <div class="avatar"><img src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=96&h=96&fit=crop&crop=faces" alt="Ana L."></div>
              <div class="review-info">
                <div class="review-name">Ana L.</div>
                <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <div class="review-date">Hace 1 mes</div>
              </div>
            </div>
            <div class="review-text">Hicieron mis men√∫s a color con acabado premium. El servicio fue r√°pido y profesional. Los precios son justos para la calidad que ofrecen.</div>
          </div>
        </div>
        
        
        <div style="text-align:center;margin-top:16px">
          <a class="cta-primary" href="https://www.google.com/maps/search/?api=1&query=COPIMAX%20Iztacalco" target="_blank" rel="noopener">‚≠ê Ver rese√±as en Google</a>
        </div>
      </div>
    </section>

     <!-- FAQ -->
    <section class="faq">
      <div class="container">
        <h2 class="section-title">Preguntas Frecuentes</h2>
        <details>
          <summary>¬øC√≥mo hago un pedido online?</summary>
          <p>Usa nuestro calculador, selecciona tus opciones, sube tus archivos, elige entrega y procede al checkout. Te confirmamos por WhatsApp y email.</p>
        </details>
        <details>
          <summary>¬øQu√© tipos de archivo aceptan?</summary>
          <p>PDF, JPG, PNG, DOC, DOCX. M√°ximo 10MB por archivo. Si tienes otros formatos, cons√∫ltanos por WhatsApp.</p>
        </details>
        <details>
          <summary>¬øCu√°ndo aplica $0.35 y $0.40?</summary>
          <p>$0.35 por copia en doble cara desde 100+ p√°ginas. $0.40 por copia en una cara desde 100+ p√°ginas.</p>
        </details>
        <details>
          <summary>¬øCu√°nto cuesta impresi√≥n a color?</summary>
          <p>Textos/logos con poco color $5 por p√°gina. Fotos o im√°genes con mucho color $10 por p√°gina.</p>
        </details>
        <details>
          <summary>¬øC√≥mo funciona la entrega?</summary>
          <p>Pickup gratis en tienda. Entrega local (3km) $50. Toda CDMX $120. Express mismo d√≠a +$150 (pedido antes 2pm).</p>
        </details>
        <details>
          <summary>¬øQu√© formas de pago aceptan?</summary>
                      <p>Efectivo al entregar/recoger, transferencia bancaria Banorte, dep√≥sito OXXO, SPEI. Para pedidos online preferimos transferencia.</p>
        </details>
        <details>
          <summary>¬øEngargolado?</summary>
          <p>Desde $20 (hasta 100 hojas), +100 hojas $40, +200 hojas $50. Incluye espiral pl√°stico y tapas transparentes.</p>
        </details>
        <details>
          <summary>¬øDan factura?</summary>
          <p>S√≠, manejamos facturaci√≥n fiscal. Solo av√≠sanos al hacer el pedido y proporciona tus datos fiscales.</p>
        </details>
      </div>
    </section>
    
    <!-- Carosello Libri de Ingl√©s Cambridge -->
    <!-- Carosello Libri de Ingl√©s Cambridge -->
    <section class="gallery">
      <div class="container">
        <h2 class="section-title">Libros de Ingl√©s Disponibles</h2>
        <p style="text-align:center;color:var(--muted);margin-bottom:20px;font-size:1.1rem">Material Did√°ctico Cambridge - Servicio de Engargolado Profesional</p>
        
        <div class="books-carousel-container">
          <!-- Frecce completamente fuori dal wrapper -->
          <div class="books-grid">
            <!-- Close Up Series -->
            <div class="book-item">
              <div class="book-image">
                <img src="https://images.unsplash.com/photo-1756681746498-440eedd02907?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Close Up Series">
              </div>
              <div class="book-info">
                <div class="book-title">Close Up Series</div>
                <div class="book-edition">Cambridge English</div>
                <div class="book-price">$350 MXN</div>
              </div>
            </div>
            
            <!-- Evolve Series -->
            <div class="book-item">
              <div class="book-image">
                <img src="https://images.unsplash.com/photo-1756596273303-a885ccdfb903?q=80&w=914&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Evolve Series">
              </div>
              <div class="book-info">
                <div class="book-title">Evolve Series</div>
                <div class="book-edition">Cambridge English</div>
                <div class="book-price">$350 MXN</div>
              </div>
            </div>
            
            <!-- Empower Series -->
            <div class="book-item">
              <div class="book-image">
                <img src="https://images.unsplash.com/photo-1756720648877-8212d71fdc6b?q=80&w=928&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Empower Series">
              </div>
              <div class="book-info">
                <div class="book-title">Empower Series</div>
                <div class="book-edition">Cambridge English</div>
                <div class="book-price">$350 MXN</div>
              </div>
            </div>
            
            <!-- Interchange Series -->
            <div class="book-item">
              <div class="book-image">
                <img src="https://images.unsplash.com/photo-1756729750437-c37be37160d8?q=80&w=928&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Interchange Series">
              </div>
              <div class="book-info">
                <div class="book-title">Interchange Series</div>
                <div class="book-edition">Cambridge English</div>
                <div class="book-price">$350 MXN</div>
              </div>
            </div>
          </div>
          
          <!-- Pulsante Ver m√°s -->
          <div class="ver-mas-container">
            <a href="libros-ingles.html" class="ver-mas-btn">Ver m√°s libros</a>
          </div>
        </div>
        

      </div>
    </section>
    

    

  </div>

  <!-- BLOG PAGE -->
  <div id="blogpage" class="blog-page hidden">
    <div class="container">
      <div class="blog-header">
        <h1 style="color:var(--text);margin-bottom:10px">Blog - Consejos y Tips</h1>
        <p style="color:var(--muted);margin-bottom:40px">Art√≠culos √∫tiles sobre impresi√≥n, dise√±o y mejores pr√°cticas</p>
      </div>
      
      <div class="blog-grid">
        <div class="blog-card">
          <div class="blog-image">
            <img src="https://images.unsplash.com/photo-1586281380349-632531db7ed4?w=400&h=200&fit=crop" alt="Gu√≠a de Impresi√≥n">
          </div>
          <div class="blog-content">
            <div class="blog-tag">Impresi√≥n</div>
            <h3 class="blog-title">Gu√≠a Completa: C√≥mo Preparar Archivos para Impresi√≥n</h3>
            <p class="blog-excerpt">Aprende los formatos correctos, resoluciones y configuraciones para obtener impresiones perfectas en tu proyecto.</p>
            <div class="blog-meta">
              <div class="blog-date">üìÖ 15 Ene 2025</div>
              <a href="#" class="blog-read">Leer m√°s ‚Üí</a>
            </div>
          </div>
        </div>
        
        <div class="blog-card">
          <div class="blog-image">
            <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=200&fit=crop" alt="Dise√±o de Men√∫s">
          </div>
          <div class="blog-content">
            <div class="blog-tag">Dise√±o</div>
            <h3 class="blog-title">Dise√±o de Men√∫s que Venden: Tips para Restaurantes</h3>
            <p class="blog-excerpt">Descubre c√≥mo dise√±ar men√∫s atractivos que aumenten las ventas y mejoren la experiencia del cliente.</p>
            <div class="blog-meta">
              <div class="blog-date">üìÖ 12 Ene 2025</div>
              <a href="#" class="blog-read">Leer m√°s ‚Üí</a>
            </div>
          </div>
        </div>
        
        <div class="blog-card">
          <div class="blog-image">
            <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400&h=200&fit=crop" alt="Tesis Universitaria">
          </div>
          <div class="blog-content">
            <div class="blog-tag">Educaci√≥n</div>
            <h3 class="blog-title">C√≥mo Preparar tu Tesis para Impresi√≥n Profesional</h3>
            <p class="blog-excerpt">Todo lo que necesitas saber sobre formato, encuadernaci√≥n y presentaci√≥n de tu trabajo acad√©mico.</p>
            <div class="blog-meta">
              <div class="blog-date">üìÖ 10 Ene 2025</div>
              <a href="#" class="blog-read">Leer m√°s ‚Üí</a>
            </div>
          </div>
        </div>
        
        <div class="blog-card">
          <div class="blog-image">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=200&fit=crop" alt="Marketing Impreso">
          </div>
          <div class="blog-content">
            <div class="blog-tag">Marketing</div>
            <h3 class="blog-title">Marketing Impreso vs Digital: ¬øCu√°l Elegir?</h3>
            <p class="blog-excerpt">An√°lisis comparativo de las ventajas del marketing impreso en la era digital y cu√°ndo usarlo.</p>
            <div class="blog-meta">
              <div class="blog-date">üìÖ 8 Ene 2025</div>
              <a href="#" class="blog-read">Leer m√°s ‚Üí</a>
            </div>
          </div>
        </div>
        
        <div class="blog-card">
          <div class="blog-image">
            <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&h=200&fit=crop" alt="Papel y Materiales">
          </div>
          <div class="blog-content">
            <div class="blog-tag">Materiales</div>
            <h3 class="blog-title">Gu√≠a de Papeles: Elegir el Material Perfecto</h3>
            <p class="blog-excerpt">Desde papel bond hasta couch√© premium: descubre qu√© tipo de papel usar para cada proyecto.</p>
            <div class="blog-meta">
              <div class="blog-date">üìÖ 5 Ene 2025</div>
              <a href="#" class="blog-read">Leer m√°s ‚Üí</a>
            </div>
          </div>
        </div>
        
        <div class="blog-card">
          <div class="blog-image">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=200&fit=crop" alt="Ahorro en Impresi√≥n">
          </div>
          <div class="blog-content">
            <div class="blog-tag">Ahorro</div>
            <h3 class="blog-title">10 Tips para Ahorrar en Impresi√≥n sin Perder Calidad</h3>
            <p class="blog-excerpt">Estrategias inteligentes para reducir costos de impresi√≥n manteniendo la excelencia en tus proyectos.</p>
            <div class="blog-meta">
              <div class="blog-date">üìÖ 3 Ene 2025</div>
              <a href="#" class="blog-read">Leer m√°s ‚Üí</a>
            </div>
          </div>
        </div>
      </div>
      
      <div style="text-align:center;margin-top:40px">
        <a href="#" class="cta-primary" onclick="showHomePage()">üè† Volver al Inicio</a>
      </div>
    </div>
  </div>

  <!-- ORDER PAGE -->
  <div id="orderpage" class="order-page">
    <div class="order-container">
      <div class="order-header">
        <h1 style="color:var(--text);margin-bottom:10px">Hacer Pedido</h1>
        <p style="color:var(--muted)">Completa tu orden paso a paso</p>
      </div>

      <div class="order-steps">
        <div class="step active" data-step="1">
          <div class="step-number">1</div>
          <span>Archivos</span>
          <div class="step-progress"></div>
        </div>
        <div class="step" data-step="2">
          <div class="step-number">2</div>
          <span>Resumen</span>
          <div class="step-progress"></div>
        </div>
        <div class="step" data-step="3">
          <div class="step-number">3</div>
          <span>Entrega</span>
          <div class="step-progress"></div>
        </div>
        <div class="step" data-step="4">
          <div class="step-number">4</div>
          <span>Pago</span>
          <div class="step-progress"></div>
        </div>
      </div>
      
      <!-- Progress Bar -->
      <div class="order-progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>

      <!-- STEP 1: File Upload -->
      <div class="order-section" id="step1">
        <div class="section-header">
          üìÅ <span>Subir Archivos</span>
        </div>
        <div class="file-upload" id="calc-file-upload">
          <div class="upload-icon">üìé</div>
          <h3>Arrastra tus archivos aqu√≠</h3>
          <p style="color:var(--muted);margin:10px 0">o haz clic para seleccionar</p>
          <p style="font-size:.9rem;color:var(--muted)">PDF, JPG, PNG, DOC, DOCX (m√°x 10MB c/u)</p>
          <input type="file" id="calc-file-input" multiple accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" style="display:none">
          
          <!-- Upload Progress -->
          <div class="upload-progress hidden" id="upload-progress">
            <div class="progress-bar">
              <div class="progress-fill" id="file-progress-fill"></div>
            </div>
            <div class="progress-text">Procesando archivos...</div>
          </div>
        </div>
        
        
        <div id="calc-file-preview" style="display:none; margin-top:12px; padding:12px; background:#f8fafc; border:1px solid #e2e8f0; border-radius:8px">
          <strong id="calc-file-name"></strong>
          <span style="margin-left:8px;color:#475569">P√°ginas: <span id="calc-file-pages">0</span></span>
          <button id="calc-remove-file" class="calc-remove-file" style="margin-left:12px">Quitar</button>
        </div>
        
        <!-- File Preview Grid -->
        <div class="file-preview-grid" id="file-preview-grid"></div>
        
        <!-- Upload Stats -->
        <div class="upload-stats" id="upload-stats">
          <div class="stat-item">
            <span class="stat-label">Archivos:</span>
            <span class="stat-value" id="file-count">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Tama√±o total:</span>
            <span class="stat-value" id="total-size">0 MB</span>
          </div>
        </div>
        
        <!-- Rango de p√°ginas a imprimir (opcional) -->
        <div style="margin-top:12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <label class="calc-label" style="margin:0">Imprimir p√°ginas:</label>
          <input type="number" id="page-start" class="calc-field" value="1" min="1" style="width:110px">
          <span style="color:#475569">a</span>
                          <input type="number" id="page-end" class="calc-field" value="" min="1" style="width:110px" placeholder="Todas">
          <div style="color:#64748b;font-size:0.9rem">(opcional, deja vac√≠o para todas)</div>
        </div>

        <div style="text-align:center;margin-top:30px">
          <button class="cta-primary" onclick="nextStep(2)" id="continue-files">Continuar ‚Üí Resumen</button>
        </div>
      </div>

      <!-- STEP 2: Order Summary -->
      <div class="order-section hidden" id="step2">
        <div class="section-header">
          üìã <span>Resumen del Pedido</span>
        </div>
        <div class="order-summary">
          <div class="summary-row">
            <span>Servicio:</span>
            <span id="summary-service">Copias Blanco y Negro</span>
          </div>
          <div class="summary-row">
            <span>Cantidad:</span>
            <span id="summary-quantity">100 p√°ginas</span>
          </div>
          <div class="summary-row">
            <span>Tipo:</span>
            <span id="summary-details">Doble cara</span>
          </div>
          <div id="summary-upsells"></div>
          <div class="summary-row total">
            <span>Total Base:</span>
            <span id="summary-total">$35.00 MXN</span>
          </div>
        </div>
        
        <div style="margin-top:20px">
          <label class="calc-label">Notas especiales (opcional)</label>
          <textarea id="special-notes" class="calc-field" rows="3" placeholder="Ej: Sin grapar, papel bond, tama√±o oficio, etc."></textarea>
        </div>
        
        <div style="text-align:center;margin-top:30px;display:flex;gap:15px;justify-content:center">
          <button class="cta-primary" onclick="prevStep(1)" style="background:#6b7280">‚Üê Volver</button>
          <button class="cta-primary" onclick="nextStep(3)">Continuar ‚Üí Entrega</button>
        </div>
      </div>

      <!-- STEP 3: Delivery Options -->
      <div class="order-section hidden" id="step3">
        <div class="section-header">
          üöö <span>Opciones de Entrega</span>
        </div>
        
        <div class="delivery-options">
          <div class="delivery-option selected" data-delivery="pickup" data-price="0">
            <div class="delivery-title">üè™ Recoger en Tienda</div>
            <div class="delivery-price">GRATIS</div>
            <div class="delivery-time">Vainilla 474, Iztacalco</div>
          </div>
          <div class="delivery-option" data-delivery="local" data-price="50">
            <div class="delivery-title">üö≤ Entrega Local</div>
            <div class="delivery-price">+$50</div>
            <div class="delivery-time">Radio 3km, mismo d√≠a</div>
          </div>
          <div class="delivery-option" data-delivery="cdmx" data-price="120">
            <div class="delivery-title">üöó Entrega CDMX</div>
            <div class="delivery-price">+$120</div>
            <div class="delivery-time">Toda la CDMX, 1-2 d√≠as</div>
          </div>
        </div>

        <div style="margin-top:25px">
          <label class="calc-label">Tiempo de Entrega</label>
          <div class="delivery-options" style="margin-top:10px">
            <div class="delivery-option selected" data-timing="standard" data-price="0">
              <div class="delivery-title">‚è∞ Est√°ndar</div>
              <div class="delivery-price">GRATIS</div>
              <div class="delivery-time">1-2 d√≠as h√°biles</div>
            </div>
            <div class="delivery-option" data-timing="express1" data-price="80">
              <div class="delivery-title">‚ö° Express 1 d√≠a</div>
              <div class="delivery-price">+$80</div>
              <div class="delivery-time">Listo ma√±ana</div>
            </div>
            <div class="delivery-option" data-timing="express-same" data-price="150">
              <div class="delivery-title">üî• Mismo d√≠a</div>
              <div class="delivery-price">+$150</div>
              <div class="delivery-time">Pedido antes 2pm</div>
            </div>
          </div>
        </div>

        <div id="delivery-address" class="hidden" style="margin-top:20px">
          <label class="calc-label">Direcci√≥n de entrega</label>
          <input type="text" class="calc-field" id="address" placeholder="Calle, n√∫mero, colonia, delegaci√≥n">
          <input type="text" class="calc-field" id="phone" placeholder="Tel√©fono de contacto" style="margin-top:10px">
        </div>

        <div style="text-align:center;margin-top:30px;display:flex;gap:15px;justify-content:center">
          <button class="cta-primary" onclick="prevStep(2)" style="background:#6b7280">‚Üê Volver</button>
          <button class="cta-primary" onclick="nextStep(4)">Continuar ‚Üí Pago</button>
        </div>
      </div>

      <!-- STEP 4: Checkout -->
      <div class="order-section hidden" id="step4">
        <div class="section-header">
          üí≥ <span>Datos de Contacto y Pago</span>
        </div>
        
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:25px">
          <div class="input-group">
            <label class="calc-label">Nombre completo *</label>
            <input type="text" class="calc-field" id="customer-name" placeholder="Tu nombre" required>
            <div class="validation-message" id="name-validation"></div>
          </div>
          <div class="input-group">
            <label class="calc-label">Email *</label>
            <input type="email" class="calc-field" id="customer-email" placeholder="tu@email.com" required>
            <div class="validation-message" id="email-validation"></div>
          </div>
        </div>

        <div style="margin-bottom:25px">
          <label class="calc-label">Tel√©fono WhatsApp *</label>
          <input type="tel" class="calc-field" id="customer-phone" placeholder="55-1234-5678" required>
          <div class="validation-message" id="phone-validation"></div>
        </div>

        <!-- Final Order Summary -->
        <div class="order-summary">
          <h4 style="margin-bottom:15px;color:var(--text)">Resumen Final del Pedido</h4>
          <div class="summary-row">
            <span>Referencia de pago:</span>
            <span id="final-reference">‚Äî</span>
          </div>
          <div class="summary-row">
            <span>Subtotal:</span>
            <span id="final-subtotal">$35.00</span>
          </div>
          <div class="summary-row" id="final-delivery-row">
            <span>Entrega:</span>
            <span id="final-delivery">GRATIS</span>
          </div>
          <div class="summary-row" id="final-timing-row" style="display:none">
            <span>Express:</span>
            <span id="final-timing">$0</span>
          </div>
          <div class="summary-row total" style="font-size:1.4rem">
            <span>TOTAL:</span>
            <span id="final-total">$35.00 MXN</span>
          </div>
        </div>

        <!-- Payment Methods -->
        <div style="margin:25px 0">
          <label class="calc-label">M√©todo de Pago</label>
          <div class="delivery-options">
            <div class="delivery-option selected" data-payment="cash">
              <div class="delivery-title">üíµ Efectivo</div>
              <div class="delivery-time">Pago al recoger/recibir</div>
            </div>
            <div class="delivery-option" data-payment="transfer">
              <div class="delivery-title">üè¶ Transferencia</div>
              <div class="delivery-time">Banorte, Oxxo, SPEI</div>
            </div>
          </div>
          
          <!-- SISTEMA CONFERMA PAGAMENTO -->
          <div class="payment-confirmation" id="payment-confirmation" style="display: none; margin-top: 20px; padding: 20px; background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 12px;">
            <div class="payment-confirmation-header" style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
              <span style="font-size: 1.5rem;">‚úÖ</span>
              <h4 style="margin: 0; color: #0c4a6e;">Confirmaci√≥n de Pago</h4>
            </div>
            
            <div class="payment-details" style="margin-bottom: 16px;">
              <div class="payment-method-info" id="payment-method-info" style="font-size: 0.95rem; color: #0369a1;">
                <!-- Dettagli metodo pagamento -->
              </div>
            </div>
            
            <div class="payment-actions" style="display: flex; gap: 12px; flex-wrap: wrap;">
              <button type="button" class="cta-secondary" id="change-payment-btn" style="flex: 1; min-width: 120px;">
                üîÑ Cambiar M√©todo
              </button>
              <button type="button" class="cta-primary" id="confirm-payment-btn" style="flex: 1; min-width: 120px;">
                ‚úÖ Confirmar Pago
              </button>
            </div>
          </div>
        </div>
        
        <!-- Payment Requirements -->
        <div id="payment-requirements" class="payment-requirements hidden">
          <div class="requirement-alert">
            <div class="alert-icon">‚ö†Ô∏è</div>
            <div class="alert-content">
              <strong>Anticipo Requerido</strong>
              <p>Para pedidos de +1000 copias, se requiere transferencia del 50% por adelantado. Usar la referencia indicada. Si el monto o la referencia no coinciden, el pedido puede ser cancelado por seguridad.</p>
              <div class="anticipo-details">
                <span>Anticipo: <strong id="anticipo-amount">$0.00</strong></span>
                <span>Resto: <strong id="resto-amount">$0.00</strong></span>
              </div>
              
              <!-- DATOS BANCARIOS PARA ANTICIPO -->
              <div style="margin-top: 16px; padding: 12px; background: rgba(255,255,255,0.7); border-radius: 8px; border-left: 4px solid #0ea5e9;">
                <h5 style="margin: 0 0 8px 0; color: #0c4a6e; font-size: 0.95rem;">üè¶ Datos para Transferencia:</h5>
                <div style="font-size: 0.9rem; color: #0369a1; line-height: 1.4;">
                  <p style="margin: 4px 0;"><strong>Banco:</strong> Banorte</p>
                  <p style="margin: 4px 0;"><strong>Cuenta:</strong> 5264246819339226</p>
                  <p style="margin: 4px 0;"><strong>Titular:</strong> MAGALI GUADALUPE JUAREZ ZARCO</p>
                  <p style="margin: 4px 0;"><strong>Referencia:</strong> <span id="anticipo-reference">PENDIENTE</span></p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align:center;margin-top:30px;display:flex;gap:15px;justify-content:center">
          <button class="cta-primary" onclick="prevStep(3)" style="background:#6b7280">‚Üê Volver</button>
          <button class="cta-primary" onclick="submitOrder()" id="submit-order" style="font-size:1.1rem;padding:1.2rem 2rem">üöÄ CONFIRMAR PEDIDO</button>
        </div>
      </div>

      <!-- Order Confirmation -->
      <div class="order-section hidden" id="order-confirmation">
        <div style="text-align:center;padding:40px 20px">
          <div style="font-size:4rem;margin-bottom:20px">‚úÖ</div>
          <h2 style="color:var(--ok);margin-bottom:15px">¬°Pedido Confirmado!</h2>
          <p style="color:var(--muted);margin-bottom:25px">Te hemos enviado los detalles por email y WhatsApp</p>
          
          <div style="background:#f0fdf4;padding:20px;border-radius:12px;margin:20px 0;border:1px solid #bbf7d0">
            <p><strong>N√∫mero de pedido:</strong> <span id="order-number"></span></p>
            <p><strong>Total:</strong> <span id="confirmed-total"></span></p>
            <p><strong>Entrega estimada:</strong> <span id="estimated-delivery"></span></p>
          </div>
          
          <!-- DATOS BANCARIOS PARA TRANSFERENCIA -->
          <div id="bank-details" style="display: none; background:#f0f9ff;padding:20px;border-radius:12px;margin:20px 0;border:2px solid #0ea5e9;">
            <h4 style="color:#0c4a6e;margin-bottom:15px;display:flex;align-items:center;gap:8px;">
              üè¶ Datos Bancarios para Transferencia
            </h4>
            <div style="font-size:0.95rem;color:#0369a1;line-height:1.6;">
              <p><strong>Banco:</strong> Banorte</p>
              <p><strong>Cuenta:</strong> 5264246819339226</p>
              <p><strong>Titular:</strong> MAGALI GUADALUPE JUAREZ ZARCO</p>
              <p><strong>Referencia:</strong> <span id="bank-reference"></span></p>
              <p style="margin-top:12px;font-weight:600;color:#0c4a6e;">
                ‚ö†Ô∏è Importante: Enviar comprobante por WhatsApp
              </p>
            </div>
          </div>

          <div style="display:flex;gap:15px;justify-content:center;margin-top:30px;flex-wrap:wrap">
            <button class="cta-primary" onclick="showHomePage()">üè† Volver al Inicio</button>
            <a class="cta-primary" id="wa-order-link" href="#" target="_blank">üí¨ Ver en WhatsApp</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cont√°ctanos - ULTIMA SEZIONE -->
  <section id="contact" class="contact">
    <div class="container">
      <h2 class="section-title" style="color:#fff;margin-top:0">Cont√°ctanos</h2>
      <div class="contact-grid">
        <div>
          <div class="contact-title">WhatsApp</div>
          <div class="contact-info">55-4021-9892</div>
        </div>
        <div>
          <div class="contact-title">Email</div>
          <div class="contact-info">copimax474@hotmail.com</div>
        </div>
        <div>
          <div class="contact-title">Direcci√≥n</div>
          <div class="contact-info">Vainilla 474, Iztacalco 08400, CDMX</div>
        </div>
        <div class="contact-horarios-social">
          <div class="contact-horarios">
            <div class="contact-title">Horarios</div>
            <div class="contact-info">Lun-Vie 8:30am-6pm ‚Ä¢ S√°b-Dom 8:30am-2pm</div>
          </div>
          <div class="social-icons">
            <a href="https://www.facebook.com/profile.php?viewas=100000686899395&id=61576341796622" class="social-icon facebook" target="_blank" rel="noopener" aria-label="Facebook COPIMAX">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
            <a href="https://www.instagram.com/copimax_upiicsa/" class="social-icon instagram" target="_blank" rel="noopener" aria-label="Instagram COPIMAX">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.947-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
            <a href="https://www.tiktok.com/@copimax_upiicsa" class="social-icon tiktok" target="_blank" rel="noopener" aria-label="TikTok COPIMAX">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>

      <div class="map-wrap">
        <!-- Google Maps con direcci√≥n real -->
        <iframe src="https://www.google.com/maps?q=Vainilla+474,+Iztacalco+08400,+CDMX&output=embed" width="100%" height="340" style="border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-links" style="display:flex;gap:2rem;justify-content:center;margin-bottom:1rem;flex-wrap:wrap">
        <a href="/" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Inicio</a>
        <a href="/#calculator" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Cotizar</a>
        <a href="/#services-packages" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Servicios</a>
        <a href="/#blog" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Blog</a>
        <a href="/nosotros" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Nosotros</a>
        <a href="/servicios" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Servicios</a>
        <a href="/contacto" style="color:#fff;text-decoration:none;transition:color 0.3s ease">Contacto</a>
      </div>
      <p>&copy; 2025 COPIMAX ‚Äî Imprenta centro de copias e impresiones Iztacalco. 100% negocio familiar.</p>
      <p style="font-size:.9rem;margin-top:8px;color:#9ca3af">Vainilla 474, Iztacalco 08400, CDMX ‚Ä¢ 55-4021-9892 ‚Ä¢ copimax474@hotmail.com</p>
    </div>
  </footer>

  <!-- Floating WhatsApp -->
              <a class="floating-whatsapp" id="float-wa" href="https://wa.me/525540219892?text=Hola%20COPIMAX,%20necesito%20cotizaci√≥n%20para%20copias%20e%20impresiones.%20¬øPueden%20ayudarme?" target="_blank" rel="noopener" aria-label="WhatsApp">üí¨</a>



  <!-- Schema.org LocalBusiness -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"CopyShop",
    "name":"COPIMAX",
    "address":{"@type":"PostalAddress","streetAddress":"Vainilla 474","addressLocality":"Iztacalco","postalCode":"08400","addressRegion":"CDMX","addressCountry":"MX"},
    "telephone":"+52-55-4021-9892",
    "email":"copimax474@hotmail.com",
    "openingHours":["Mo-Fr 08:30-18:00","Sa-Su 08:30-14:00"],
    "priceRange":"$",
            "url":"https://copimax.store",
    "sameAs":[]
  }
  </script>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // Global state
    let orderData = {
      quantity: 100,
      type: 'copies', // copies or prints
      color: 'bw', // bw or color
      sides: 'double', // single or double
      upsells: {},
      delivery: { method: 'pickup', price: 0 },
      timing: { method: 'standard', price: 0 },
      files: [],
      reference: '',
      customer: {},
      total: 35,
      pdfPages: 1, // Pagine del PDF caricato
      pdfFile: null, // File PDF caricato
      payment: 'cash', // Metodo di pagamento predefinito
      paymentConfirmed: false // Stato conferma pagamento
    };

    // Google Sheets / Webhook configuration (fill after deploying Apps Script)
         // Example: const ORDERS_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzCZ81riMFnaGBv7b2qO_EfFjHMIg1prtacwQsm88WWtqEJJKlc5nTpv-yZY-te2eRjCg/exec';
     const ORDERS_ENDPOINT = 'https://script.google.com/macros/s/AKfycbw2cSUA25aho1NdelA5RWlL6_HwhX_sk0Ul56tQ6wr4G88vw99OdYoUmI2CvbPdaC5wdg/exec';
    const ADMIN_EMAIL = 'copimax474@gmail.com';

    // Calculator elements
    console.log('Initializing calculator elements...');
    const quantityInput = document.getElementById('quantity');
    const totalElement = document.getElementById('total');
    const options = document.querySelectorAll('.calc-option');
    const upsellCheckboxes = document.querySelectorAll('.upsell-checkbox');
    const btnWA = document.getElementById('btn-wa');
    const btnOrder = document.getElementById('btn-order');
    const dealCTAs = document.querySelectorAll('.deal-cta');
    
    console.log('Calculator elements found:', {
      quantityInput: !!quantityInput,
      totalElement: !!totalElement,
      options: options.length,
      upsellCheckboxes: upsellCheckboxes.length,
      btnWA: !!btnWA,
      btnOrder: !!btnOrder,
      dealCTAs: dealCTAs.length
    });

    // Page navigation
    const homepage = document.getElementById('homepage');
    const orderPage = document.getElementById('orderpage');
    const homepageContent = document.getElementById('homepage-content');
    const blogPage = document.getElementById('blogpage');

    // Order elements
    const steps = document.querySelectorAll('.step');
    const orderSections = document.querySelectorAll('.order-section');

    // Initialize
    console.log('üöÄ Inizializzazione calcolatrice...');
    calculate();
    setupEventListeners();
    setupValidationListeners();
    
    // Funzione per gestire le opzioni dettagliate di colore
    function setupColorDetailsListeners() {
      // Event listeners per i tipi di colore
      document.querySelectorAll('.color-type-option').forEach(option => {
        option.addEventListener('click', () => {
          // Rimuovi active da tutti
          document.querySelectorAll('.color-type-option').forEach(opt => opt.classList.remove('active'));
          // Aggiungi active al selezionato
          option.classList.add('active');
          
          // Aggiorna orderData
          orderData.colorType = option.dataset.colorType;
          calculate();
        });
      });
      
      // Event listener per il checkbox calcolo misto
      const mixedCheckbox = document.getElementById('mixed-calculation');
      const mixedInputs = document.getElementById('mixed-inputs');
      
      if (mixedCheckbox) {
        mixedCheckbox.addEventListener('change', () => {
          if (mixedCheckbox.checked) {
            mixedInputs.style.display = 'grid';
            orderData.mixedCalculation = true;
          } else {
            mixedInputs.style.display = 'none';
            orderData.mixedCalculation = false;
          }
          calculate();
        });
      }
      
      // Event listeners per gli input del calcolo misto
      const textLogoQty = document.getElementById('text-logo-qty');
      const imagesQty = document.getElementById('images-qty');
      
      if (textLogoQty) {
        textLogoQty.addEventListener('input', () => {
          orderData.textLogoQty = parseInt(textLogoQty.value) || 0;
          calculate();
        });
      }
      
      if (imagesQty) {
        imagesQty.addEventListener('input', () => {
          orderData.imagesQty = parseInt(imagesQty.value) || 0;
          calculate();
        });
      }
    }
    
    // Test rapido della calcolatrice dopo 2 secondi - RIMOSSO per evitare selezione automatica opzione color
    
    // Inizializza recensioni (semplificato). Evita errori se le funzioni non esistono
    try {
      if (typeof displayReviews === 'function') {
    displayReviews();
      }
    } catch (e) {
      console.warn('Reviews init skipped:', e);
    }
    
    // Verifica iniziale elementi pagamento
    setTimeout(() => {
      verifyPaymentElements();
      
      // Controlla URL iniziale per mostrare la sezione corretta
      checkInitialURL();
    }, 500);
    
    // Gestione navigazione browser (pulsante Indietro)
    window.addEventListener('popstate', function(event) {
      if (event.state && event.state.page === 'order') {
        showOrderPage(false);
      } else if (event.state && event.state.page === 'blog') {
        showBlogPage();
      } else {
        showHomePage(false);
      }
    });

    // Video Reels Functionality
    initializeVideoReels();

    function setupEventListeners() {
      // Calculator options
      console.log('Setting up calculator options event listeners...');
      options.forEach(opt => {
        console.log('Adding click listener to option:', opt.dataset);
        opt.addEventListener('click', (e) => {
          console.log('Option clicked:', opt.dataset, e);
          const group = opt.dataset.type || opt.dataset.color || opt.dataset.sides;
          if (group) {
            console.log('Processing option group:', group);
            // Remove active from same group
            const groupKey = Object.keys(opt.dataset)[0];
            document.querySelectorAll(`[data-${groupKey}]`).forEach(el => {
              el.classList.remove('active');
              console.log('Removed active from:', el);
            });
            opt.classList.add('active');
            console.log('Added active to:', opt);
            
            // Update order data
            if (opt.dataset.type) orderData.type = opt.dataset.type;
            if (opt.dataset.color) orderData.color = opt.dataset.color;
            if (opt.dataset.sides) {
              orderData.sides = opt.dataset.sides;
              console.log('üîÑ Sides cambiato a:', opt.dataset.sides);
            }
            
            console.log('Updated orderData:', orderData);
            calculate();
            
            // Gestisci la visualizzazione delle opzioni dettagliate per colore
            if (opt.dataset.color === 'color') {
              document.getElementById('color-details').style.display = 'block';
            } else {
              document.getElementById('color-details').style.display = 'none';
            }
          }
        });
      });

      // Event listeners per le nuove opzioni di colore
      setupColorDetailsListeners();

      // Quantity input
      quantityInput.addEventListener('input', () => {
        const value = Math.max(1, parseInt(quantityInput.value || '1'));
        orderData.quantity = value;
        calculate();
      });
      
      // PDF pages input
      const pdfPagesInput = document.getElementById('pdf-pages-input');
      if (pdfPagesInput) {
        pdfPagesInput.addEventListener('input', () => {
          const value = Math.max(1, parseInt(pdfPagesInput.value || '1'));
          // Aggiorna orderData.pdfPages quando l'utente modifica l'input
          orderData.pdfPages = value;
          console.log('üìÑ PDF pages input modificato a:', value);
          calculate();
          updatePdfInfo();
        });
      }





      // Upsells
      upsellCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
          const price = parseInt(checkbox.dataset.price);
          const id = checkbox.id;
          
          if (checkbox.checked) {
            orderData.upsells[id] = { name: checkbox.parentElement.querySelector('.upsell-title').textContent, price };
            
            // Show engargolado options if it's the engargolado checkbox
            if (id === 'engargolado') {
              const options = checkbox.parentElement.querySelector('.engargolado-options');
              if (options) {
                options.style.display = 'block';
                updateEngargoladoPrice();
              }
            }
            
            // Show folders options if it's the folders checkbox
            if (id === 'folders') {
              const options = checkbox.parentElement.querySelector('.folders-options');
              if (options) {
                options.style.display = 'block';
                updateFoldersPrice();
              }
            }
            
            // Show laminated options if it's the laminated checkbox
            if (id === 'laminated') {
              const options = checkbox.parentElement.querySelector('.laminated-options');
              if (options) {
                options.style.display = 'block';
                updateLaminatedPrice();
              }
            }
          } else {
            delete orderData.upsells[id];
            
            // Hide engargolado options if unchecked
            if (id === 'engargolado') {
              const options = checkbox.parentElement.querySelector('.engargolado-options');
              if (options) {
                options.style.display = 'none';
              }
            }
            
            // Hide folders options if unchecked
            if (id === 'folders') {
              const options = checkbox.parentElement.querySelector('.folders-options');
              if (options) {
                options.style.display = 'none';
              }
            }
            
            // Hide laminated options if unchecked
            if (id === 'laminated') {
              const options = checkbox.parentElement.querySelector('.laminated-options');
              if (options) {
                options.style.display = 'none';
              }
            }
          }
          calculate();
        });
      });
      
      // Calculator PDF upload
      const calcFileUpload = document.getElementById('calc-file-upload');
      const calcFileInput = document.getElementById('calc-file-input');
      const calcFilePreview = document.getElementById('calc-file-preview');
      const calcRemoveFile = document.getElementById('calc-remove-file');
      
      if (calcFileUpload && calcFileInput) {
        calcFileUpload.addEventListener('click', () => calcFileInput.click());
        calcFileUpload.addEventListener('dragover', (e) => {
          e.preventDefault();
          calcFileUpload.classList.add('dragover');
        });
        calcFileUpload.addEventListener('dragleave', () => calcFileUpload.classList.remove('dragover'));
        calcFileUpload.addEventListener('drop', handleCalcFileUpload);
        calcFileInput.addEventListener('change', (e) => handleCalcFileUpload(e, true));
      }
      
      if (calcRemoveFile) {
        calcRemoveFile.addEventListener('click', removeCalcFile);
      }

      // Engargolado options event listeners
      const engargoladoQty = document.getElementById('engargolado-qty');
      const engargoladoSize = document.getElementById('engargolado-size');
      
      if (engargoladoQty && engargoladoSize) {
        engargoladoQty.addEventListener('input', updateEngargoladoPrice);
        engargoladoSize.addEventListener('change', updateEngargoladoPrice);
      }

      // Folders options event listeners
      const foldersQty = document.getElementById('folders-qty');
      if (foldersQty) {
        foldersQty.addEventListener('input', updateFoldersPrice);
      }

      // Laminated options event listeners
      const laminatedPages = document.getElementById('laminated-pages');
      if (laminatedPages) {
        laminatedPages.addEventListener('input', updateLaminatedPrice);
      }

      function updateEngargoladoPrice() {
        const qty = parseInt(engargoladoQty.value) || 1;
        const size = parseInt(engargoladoSize.value) || 100;
        
        // Calculate price based on size
        let pricePerUnit = 20; // Base price for 100 pages
        if (size > 100) pricePerUnit = 40;
        if (size > 200) pricePerUnit = 50;
        if (size > 300) pricePerUnit = 60;
        
        const totalPrice = qty * pricePerUnit;
        
        // Update display
        const priceDisplay = document.getElementById('engargolado-price');
        if (priceDisplay) {
          priceDisplay.textContent = `$${pricePerUnit}`;
        }
        
        // Update checkbox data price
        const engargoladoCheckbox = document.getElementById('engargolado');
        if (engargoladoCheckbox) {
          engargoladoCheckbox.dataset.price = totalPrice;
        }
        
        // Update the right side price display
        const upsellPriceElement = engargoladoCheckbox?.parentElement?.querySelector('.upsell-price');
        if (upsellPriceElement) {
          upsellPriceElement.textContent = `+$${totalPrice}`;
        }
        
        // Update order data if checked
        if (orderData.upsells.engargolado) {
          orderData.upsells.engargolado.price = totalPrice;
          orderData.upsells.engargolado.details = `${qty} engargolados de ${size} p√°ginas`;
          calculate();
        }
      }

      function updateFoldersPrice() {
        const qty = parseInt(foldersQty.value) || 1;
        const pricePerFolder = 15; // $15 por folder individual
        const totalPrice = qty * pricePerFolder;
        
        // Update checkbox data price
        const foldersCheckbox = document.getElementById('folders');
        if (foldersCheckbox) {
          foldersCheckbox.dataset.price = totalPrice;
        }
        
        // Update the right side price display
        const upsellPriceElement = foldersCheckbox?.parentElement?.querySelector('.upsell-price');
        if (upsellPriceElement) {
          upsellPriceElement.textContent = `+$${totalPrice}`;
        }
        
        // Update order data if checked
        if (orderData.upsells.folders) {
          orderData.upsells.folders.price = totalPrice;
          orderData.upsells.folders.details = `${qty} packs de 5 folders`;
          calculate();
        }
      }

      function updateLaminatedPrice() {
        const pages = parseInt(laminatedPages.value) || 1;
        const pricePerPage = 25; // $25 por hoja
        const totalPrice = pages * pricePerPage;
        
        // Update display
        const priceDisplay = document.getElementById('laminated-price');
        if (priceDisplay) {
          priceDisplay.textContent = `$${pricePerPage} por hoja`;
        }
        
        // Update checkbox data price
        const laminatedCheckbox = document.getElementById('laminated');
        if (laminatedCheckbox) {
          laminatedCheckbox.dataset.price = totalPrice;
        }
        
        // Update the right side price display
        const upsellPriceElement = laminatedCheckbox?.parentElement?.querySelector('.upsell-price');
        if (upsellPriceElement) {
          upsellPriceElement.textContent = `+$${totalPrice}`;
        }
        
        // Update order data if checked
        if (orderData.upsells.laminated) {
          orderData.upsells.laminated.price = totalPrice;
          orderData.upsells.laminated.details = `${pages} hojas enmicadas`;
          calculate();
        }
      }

      // Order buttons
      console.log('Setting up order button event listeners...');
      if (btnOrder) {
        console.log('Adding click listener to order button');
        btnOrder.addEventListener('click', (e) => {
          console.log('Order button clicked:', e);
          // Track order start
          if (typeof trackOrderStart === 'function') {
            const service = `${orderData.type === 'copies' ? 'Copias' : 'Impresiones'} ${orderData.color === 'bw' ? 'BN' : 'Color'}`;
            trackOrderStart(service, orderData.total);
          }
          // Open in-page order flow
          showOrderPage();
        });
      } else {
        console.error('Order button not found!');
      }
      
      if (btnWA) {
        console.log('Adding click listener to WhatsApp button');
        btnWA.addEventListener('click', (e) => {
          console.log('WhatsApp button clicked:', e);
          sendWhatsAppOrder();
        });
      } else {
        console.error('WhatsApp button not found!');
      }

      // Deal CTAs
      dealCTAs.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const dealInfo = btn.dataset.deal;
          const msg = `Hola COPIMAX üëã Me interesa el paquete: ${dealInfo}. ¬øPuedo enviar el archivo por aqu√≠?`;
          
          // Track package deal click
          if (typeof trackWhatsAppClick === 'function') {
            const price = dealInfo.match(/\$(\d+)/)?.[1] || 0;
            trackWhatsAppClick(`Paquete: ${dealInfo}`, parseInt(price));
          }
          
          window.open('https://wa.me/525540219892?text=' + encodeURIComponent(msg), '_blank');
        });
      });
      
      // Funzione toggle per facce del pacchetto
      function toggleFace(btn, faceType) {
        // Rimuovi active da tutti i bottoni
        document.querySelectorAll('.face-btn').forEach(b => b.classList.remove('active'));
        
        // Aggiungi active al bottone cliccato
        btn.classList.add('active');
        
        // Aggiorna il testo, il prezzo e il data-deal
        const packageFaceType = document.getElementById('package-face-type');
        const packageCtaBtn = document.getElementById('package-cta-btn');
        const packagePrice = document.querySelector('.package-price');
        
        if (faceType === 'single') {
          // Una Cara: 1000 copie √ó $0.40 = $400
          packageFaceType.textContent = 'BN una cara, mismo d√≠a';
          packagePrice.textContent = '$400 MXN';
          packageCtaBtn.textContent = 'Pedir';
          packageCtaBtn.dataset.deal = '1000 BN una cara $400';
        } else {
          // Doble Cara: 1000 copie √ó $0.35 = $350
          packageFaceType.textContent = 'BN doble cara, mismo d√≠a';
          packagePrice.textContent = '$350 MXN';
          packageCtaBtn.textContent = 'Pedir';
          packageCtaBtn.dataset.deal = '1000 BN doble cara $350';
        }
      }
      
      // Rendi la funzione globale
      window.toggleFace = toggleFace;

      // File upload
      const fileUpload = document.getElementById('file-upload');
      const fileInput = document.getElementById('file-input');
      
      if (fileUpload && fileInput) {
        fileUpload.addEventListener('click', () => fileInput.click());
        fileUpload.addEventListener('dragover', (e) => {
          e.preventDefault();
          fileUpload.classList.add('dragover');
        });
        fileUpload.addEventListener('dragleave', () => fileUpload.classList.remove('dragover'));
        fileUpload.addEventListener('drop', handleFileUpload);
        fileInput.addEventListener('change', (e) => handleFileUpload(e, true));
        
        // Initialize upload stats
        updateUploadStats();
      }

      // Delivery options
      setupDeliveryOptions();
    }

    function setupValidationListeners() {
      // Real-time validation with debouncing
      const nameInput = document.getElementById('customer-name');
      const emailInput = document.getElementById('customer-email');
      const phoneInput = document.getElementById('customer-phone');
      
      if (nameInput) {
        nameInput.addEventListener('input', debounce(() => validateName(nameInput.value), 500));
      }
      
      if (emailInput) {
        emailInput.addEventListener('input', debounce(() => validateEmail(emailInput.value), 500));
      }
      
      if (phoneInput) {
        phoneInput.addEventListener('input', debounce(() => validatePhone(phoneInput.value), 500));
      }
    }

    // Debouncing utility
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Validation functions
    function validateName(name) {
      const validation = document.getElementById('name-validation');
      const input = document.getElementById('customer-name');
      
      if (!name.trim()) {
        showFieldValidation(input, validation, 'El nombre es requerido', 'error');
        return false;
      }
      
      if (name.length < 2) {
        showFieldValidation(input, validation, 'El nombre debe tener al menos 2 caracteres', 'warning');
        return false;
      }
      
      showFieldValidation(input, validation, '‚úì Nombre v√°lido', 'success');
      return true;
    }

    function validateEmail(email) {
      const validation = document.getElementById('email-validation');
      const input = document.getElementById('customer-email');
      
      if (!email.trim()) {
        showFieldValidation(input, validation, 'El email es requerido', 'error');
        return false;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showFieldValidation(input, validation, 'Formato de email inv√°lido', 'error');
        return false;
      }
      
      showFieldValidation(input, validation, '‚úì Email v√°lido', 'success');
      return true;
    }

    function validatePhone(phone) {
      const validation = document.getElementById('phone-validation');
      const input = document.getElementById('customer-phone');
      
      if (!phone.trim()) {
        showFieldValidation(input, validation, 'El tel√©fono es requerido', 'error');
        return false;
      }
      
      const phoneRegex = /^[0-9\-\+\(\)\s]{10,15}$/;
      if (!phoneRegex.test(phone)) {
        showFieldValidation(input, validation, 'Formato de tel√©fono inv√°lido', 'warning');
        return false;
      }
      
      showFieldValidation(input, validation, '‚úì Tel√©fono v√°lido', 'success');
      return true;
    }

    function showFieldValidation(input, validation, message, type) {
      if (input && validation) {
        validation.textContent = message;
        validation.className = `validation-message ${type}`;
        
        input.className = `calc-field ${type}`;
        
        // Remove validation classes after 3 seconds
        setTimeout(() => {
          input.className = 'calc-field';
        }, 3000);
      }
    }

    // Video Reels Functionality
    function initializeVideoReels() {
      const videoCards = document.querySelectorAll('.video-reel-card');
      
      if (videoCards.length === 0) return;
      
      videoCards.forEach((card, index) => {
        const iframe = card.querySelector('.reel-video');
        const playButton = card.querySelector('.play-button');
        
        if (!iframe) return;
        
        // Click handler for play button
        if (playButton) {
          playButton.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Hide overlay and play video
            const overlay = card.querySelector('.video-overlay');
            if (overlay) {
              overlay.style.display = 'none';
            }
            
            // Enable autoplay on iframe
            const currentSrc = iframe.src;
            if (currentSrc.includes('autoplay=0')) {
              iframe.src = currentSrc.replace('autoplay=0', 'autoplay=1');
            }
          });
        }
        
        // Click handler for entire card
        card.addEventListener('click', (e) => {
          if (e.target === playButton) return;
          
          const overlay = card.querySelector('.video-overlay');
          if (overlay && overlay.style.display !== 'none') {
            overlay.style.display = 'none';
            const currentSrc = iframe.src;
            if (currentSrc.includes('autoplay=0')) {
              iframe.src = currentSrc.replace('autoplay=0', 'autoplay=1');
            }
          }
        });
        // Users can click directly on Vimeo player controls
      });
      
      // Mobile horizontal scroll enhancement
      if (window.innerWidth <= 768) {
        const reelsGrid = document.querySelector('.reels-grid');
        if (reelsGrid) {
          let isScrolling = false;
          
          reelsGrid.addEventListener('scroll', () => {
            if (!isScrolling) {
              isScrolling = true;
              setTimeout(() => {
                isScrolling = false;
              }, 150);
            }
          });
        }
      }
      
      // Handle window resize
      window.addEventListener('resize', () => {
        // Reinitialize video behavior on resize
        setTimeout(() => {
          initializeVideoReels();
        }, 100);
      });
    }

    function calculate() {
      console.log('üîÑ calculate() chiamata con orderData:', orderData);
      const q = orderData.quantity; // Numero di copie richieste
      
      // Usa SOLO orderData.pdfPages, non l'input HTML
      const pdfPages = orderData.pdfPages && orderData.pdfPages > 0 ? orderData.pdfPages : 1;
      
      console.log('üìä calculate() - Dettagli calcolo:');
      console.log('üìä orderData.pdfPages:', orderData.pdfPages);
      console.log('üìä pdfPages finale:', pdfPages);
      console.log('üìä quantity:', q);
      console.log('üìä orderData.sides:', orderData.sides);
      console.log('üìä orderData.color:', orderData.color);
      
      let unitPrice = 0;

      // Base price calculation
      if (orderData.color === 'bw') {
        // Prezzo per copie BN: $1.00 per 1-100 copie, $0.35/$0.40 per pi√π di 100 copie
        if (q <= 100) {
          unitPrice = 1.00; // $1 per 1-100 copie BN
        } else {
          unitPrice = orderData.sides === 'double' ? 0.35 : 0.40;
        }
      } else if (orderData.color === 'color') {
        // Calcolo per stampa a colori
        if (orderData.mixedCalculation && orderData.textLogoQty > 0 && orderData.imagesQty > 0) {
          // Calcolo misto: testo/logo + immagini
          const textLogoTotal = orderData.textLogoQty * 5; // $5 per testo/logo
          const imagesTotal = orderData.imagesQty * 10; // $10 per immagini
          const totalMixed = textLogoTotal + imagesTotal;
          const totalQty = orderData.textLogoQty + orderData.imagesQty;
          unitPrice = totalMixed / totalQty; // Prezzo medio
        } else if (orderData.colorType === 'text-logo') {
          unitPrice = 5.00; // $5 per testo e logo
        } else if (orderData.colorType === 'images') {
          unitPrice = 10.00; // $10 per immagini
        } else {
          unitPrice = 7.50; // Prezzo medio di default
        }
      }
      
      console.log('üìä calculate() - Prezzo unitario calcolato:', unitPrice);

      // Calcolo corretto: (Numero copie) √ó (Pagine da stampare) √ó (Prezzo per pagina)
      const pageStart = parseInt(document.getElementById('page-start')?.value || '1');
      const pageEndInput = document.getElementById('page-end')?.value || '';
      const pageEnd = pageEndInput === '' ? 0 : parseInt(pageEndInput);
      const hasRange = !isNaN(pageStart) && !isNaN(pageEnd) && pageEnd >= pageStart && pageEnd > 0;
      const pagesToPrint = hasRange ? (pageEnd - pageStart + 1) : pdfPages;
      
      // Calcolo del subtotal in base al tipo di calcolo
      let subtotal;
      if (orderData.color === 'color' && orderData.mixedCalculation && orderData.textLogoQty > 0 && orderData.imagesQty > 0) {
        // Calcolo misto: usa le quantit√† specifiche per testo/logo e immagini
        const textLogoTotal = orderData.textLogoQty * pagesToPrint * 5; // $5 per testo/logo
        const imagesTotal = orderData.imagesQty * pagesToPrint * 10; // $10 per immagini
        subtotal = textLogoTotal + imagesTotal;
      } else {
        // Calcolo normale
        subtotal = q * pagesToPrint * unitPrice;
      }
      
      console.log('üìä calculate() - Calcolo prezzo:');
      console.log('üìä unitPrice:', unitPrice);
      console.log('üìä pagesToPrint:', pagesToPrint);
      if (orderData.color === 'color' && orderData.mixedCalculation && orderData.textLogoQty > 0 && orderData.imagesQty > 0) {
        console.log('üìä Calcolo misto - Texto/Logo:', orderData.textLogoQty, '√ó', pagesToPrint, '√ó $5 =', orderData.textLogoQty * pagesToPrint * 5);
        console.log('üìä Calcolo misto - Im√°genes:', orderData.imagesQty, '√ó', pagesToPrint, '√ó $10 =', orderData.imagesQty * pagesToPrint * 10);
        console.log('üìä subtotal calcolo misto:', subtotal);
      } else {
        console.log('üìä subtotal calcolo normale:', q, '√ó', pagesToPrint, '√ó', unitPrice, '=', subtotal);
      }
      
      // Add upsells
      let upsellTotal = 0;
      Object.values(orderData.upsells).forEach(upsell => {
        upsellTotal += upsell.price;
      });

      const total = subtotal + upsellTotal;
      orderData.total = total;
      
      console.log('üìä calculate() - Totale finale:');
      console.log('üìä subtotal:', subtotal);
      console.log('üìä upsellTotal:', upsellTotal);
      console.log('üìä total finale:', total);
      console.log('üìä orderData.total impostato a:', orderData.total);
      
      // Aggiorna le informazioni del PDF nel calcolatore
      updatePdfInfo();
      
      if (totalElement) {
        animateNumber(totalElement, total);
      }
      updateOrderSummary();
      console.log('‚úÖ calculate() completata, totale:', total);
    }

    // Animate number with count-up effect
    function animateNumber(element, targetValue) {
      // Pulisce completamente il contenuto dell'elemento prima di iniziare l'animazione
      element.textContent = '';
      const currentValue = 0;
      const startValue = currentValue;
      const duration = 800; // milliseconds
      const startTime = performance.now();
      
      function updateNumber(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Easing function for smooth animation
        const easeOutQuart = 1 - Math.pow(1 - progress, 4);
        const currentNumber = startValue + (targetValue - startValue) * easeOutQuart;
        
        // Sostituisce completamente il contenuto con il nuovo prezzo
        element.textContent = `$${currentNumber.toFixed(2)} MXN`;
        
        if (progress < 1) {
          requestAnimationFrame(updateNumber);
        }
      }
      
      requestAnimationFrame(updateNumber);
    }

    function updateOrderSummary() {
      // Update step 1 summary
      const summaryService = document.getElementById('summary-service');
      const summaryQuantity = document.getElementById('summary-quantity');
      const summaryDetails = document.getElementById('summary-details');
      const summaryTotal = document.getElementById('summary-total');

      if (summaryService) {
        summaryService.textContent = 
          `${orderData.type === 'copies' ? 'Copias' : 'Impresiones'} ${orderData.color === 'bw' ? 'Blanco y Negro' : 'a Color'}`;
      }
      
      if (summaryQuantity) {
        // Usa direttamente orderData.pdfPages invece dell'input HTML
        const basePages = (orderData.pdfPages && orderData.pdfPages > 0) ? orderData.pdfPages : 1;
        const pageStart = parseInt(document.getElementById('page-start')?.value || '1');
        const pageEndInput = document.getElementById('page-end')?.value || '';
        const pageEnd = pageEndInput === '' ? 0 : parseInt(pageEndInput);
        const hasRange = !isNaN(pageStart) && !isNaN(pageEnd) && pageEnd >= pageStart && pageEnd > 0;
        const pagesToPrint = hasRange ? (pageEnd - pageStart + 1) : basePages;
        const totalPages = orderData.quantity * pagesToPrint;
        
        console.log('üìä updateOrderSummary - Dettagli calcolo:');
        console.log('üìä orderData.pdfPages:', orderData.pdfPages);
        console.log('üìä basePages:', basePages);
        console.log('üìä pageStart:', pageStart);
        console.log('üìä pageEnd:', pageEnd);
        console.log('üìä hasRange:', hasRange);
        console.log('üìä pagesToPrint:', pagesToPrint);
        console.log('üìä orderData.quantity:', orderData.quantity);
        console.log('üìä totalPages:', totalPages);
        
        summaryQuantity.textContent = `${orderData.quantity} copias √ó ${pagesToPrint} p√°ginas = ${totalPages} p√°ginas totales`;
      }
      if (summaryDetails) summaryDetails.textContent = orderData.sides === 'double' ? 'Doble cara' : 'Una cara';
      if (summaryTotal) summaryTotal.textContent = `${orderData.total.toFixed(2)} MXN`;

      // Update upsells summary
      const upsellsContainer = document.getElementById('summary-upsells');
      if (upsellsContainer) {
        upsellsContainer.innerHTML = '';
        Object.values(orderData.upsells).forEach(upsell => {
          const row = document.createElement('div');
          row.className = 'summary-row';
          const displayText = upsell.details ? `${upsell.name}: ${upsell.name}` : upsell.name;
          row.innerHTML = `<span>${displayText}:</span><span>+$${upsell.price}</span>`;
          upsellsContainer.appendChild(row);
        });
      }
    }
    
    // Funzione per aggiornare le informazioni del PDF nel calcolatore
    function updatePdfInfo() {
      const pdfInfo = document.getElementById('pdf-info');
      const pdfPages = document.getElementById('pdf-pages');
      const totalPages = document.getElementById('total-pages');
      
      if (pdfInfo && pdfPages && totalPages) {
        // Usa direttamente orderData.pdfPages invece dell'input HTML
        const basePages = (orderData.pdfPages && orderData.pdfPages > 0) ? orderData.pdfPages : 1;
        const pageStart = parseInt(document.getElementById('page-start')?.value || '1');
        const pageEndInput = document.getElementById('page-end')?.value || '';
        const pageEnd = pageEndInput === '' ? 0 : parseInt(pageEndInput);
        const hasRange = !isNaN(pageStart) && !isNaN(pageEnd) && pageEnd >= pageStart && pageEnd > 0;
        const pages = hasRange ? (pageEnd - pageStart + 1) : basePages;
        const copies = orderData.quantity || 1;
        const total = pages * copies;
        
        pdfPages.textContent = pages;
        totalPages.textContent = total;
        
        // Mostra sempre le informazioni del PDF
        pdfInfo.style.display = 'block';
      }
    }
    
    // Gestione del caricamento del PDF nel calcolatore con LETTURA REALE
    function handleCalcFileUpload(e, isInput = false) {
      e.preventDefault();
      const files = isInput ? e.target.files : e.dataTransfer.files;
      
      if (files.length === 0) return;
      
      const file = files[0]; // Prendi solo il primo file
      
      if (file.type !== 'application/pdf') {
        alert('Por favor sube solo archivos PDF.');
        return;
      }
      
      if (file.size > 10 * 1024 * 1024) {
        alert('El archivo es muy grande. M√°ximo 10MB.');
        return;
      }
      
      // LETTURA PDF REALE con PDF.js
      const reader = new FileReader();
      reader.onload = function(e) {
        const typedarray = new Uint8Array(e.target.result);
        
        // Carica PDF.js se non √® gi√† caricato
        if (typeof pdfjsLib === 'undefined') {
          const script = document.createElement('script');
          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js';
          script.onload = function() {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
            countPdfPages(typedarray, file);
          };
          document.head.appendChild(script);
        } else {
          countPdfPages(typedarray, file);
        }
      };
      reader.readAsArrayBuffer(file);
      
      // Rimuovi la classe dragover
      const calcFileUpload = document.getElementById('calc-file-upload');
      if (calcFileUpload) calcFileUpload.classList.remove('dragover');
    }
    
    function countPdfPages(typedarray, file) {
      pdfjsLib.getDocument(typedarray).promise.then(function(pdf) {
        const realPages = pdf.numPages;
        console.log('üìÑ PDF processato:', file.name, 'pagine reali:', realPages);
        
        orderData.pdfFile = file;
        orderData.pdfPages = realPages;
        
        console.log('üìÑ orderData.pdfPages impostato a:', orderData.pdfPages);
        console.log('üìÑ orderData completo dopo impostazione PDF:', orderData);
        
        // AGGIUNGI ANCHE AL SISTEMA FILE PER ORDINI
        if (!orderData.files) {
          orderData.files = [];
        }
        // Controlla se il file √® gi√† presente per evitare duplicati
        const existingFile = orderData.files.find(f => f.name === file.name);
        if (!existingFile) {
          orderData.files.push(file);
          console.log('üìÅ File aggiunto a orderData.files:', file.name);
          console.log('üìÅ orderData.files.length dopo aggiunta:', orderData.files.length);
          
          // Aggiorna anche la visualizzazione dei file
          displayUploadedFile(file);
          updateUploadStats();
        }
        
        // Mostra preview e informazioni reali
        showCalcFilePreview(file.name, realPages);
        // Aggiorna input visivo pagine per trasparenza
        const inputEl = document.getElementById('pdf-pages-input');
        if (inputEl) {
          inputEl.value = String(realPages);
          console.log('üìÑ Input pdf-pages-input aggiornato a:', inputEl.value);
        }
        updatePdfInfo();
        
        // Ricalcola prezzo con pagine reali
        calculate();
        
        console.log(`‚úÖ PDF caricato: ${realPages} pagine reali`);
      }).catch(function(error) {
        console.error('‚ùå Errore lettura PDF:', error);
        alert('‚ùå Errore nella lettura del PDF. Riprova con un file diverso.');
      });
    }
    
    function showCalcFilePreview(fileName, pages) {
      const calcFilePreview = document.getElementById('calc-file-preview');
      const calcFileName = document.getElementById('calc-file-name');
      const calcFilePages = document.getElementById('calc-file-pages');
      
      if (calcFilePreview && calcFileName && calcFilePages) {
        calcFileName.textContent = fileName;
        calcFilePages.textContent = pages;
        calcFilePreview.style.display = 'block';
      }
    }
    
    function removeCalcFile() {
      // Rimuovi i dati del PDF
      delete orderData.pdfFile;
      delete orderData.pdfPages;
      
      // Nascondi il preview
      const calcFilePreview = document.getElementById('calc-file-preview');
      if (calcFilePreview) calcFilePreview.style.display = 'none';
      
      // Nascondi le informazioni del PDF
      const pdfInfo = document.getElementById('pdf-info');
      if (pdfInfo) pdfInfo.style.display = 'none';
      
      // Ripristina input pagine a 1
      const inputEl = document.getElementById('pdf-pages-input');
      if (inputEl) inputEl.value = '1';
      
      // Ricalcola il prezzo
      calculate();
    }
    
    // SISTEMA IBRIDO GRATUITO: EmailJS + WhatsApp
    function inviaEmailOrdine(orderNumber, name, email, phone, finalTotal) {
      // Prepara i dati per l'email
      const pdfPages = orderData.pdfPages || 1;
      const copies = orderData.quantity || 1;
      const totalPages = pdfPages * copies;
      
      // Calcola se richiede anticipo
      const requiresAnticipo = totalPages >= 1000;
      const anticipoAmount = requiresAnticipo ? (finalTotal * 0.5).toFixed(2) : '0.00';
      
      // Prepara i servizi aggiuntivi
      let upsellsText = '';
      Object.values(orderData.upsells).forEach(upsell => {
        upsellsText += `\n- ${upsell.name}: +$${upsell.price}`;
      });
      
      // Prepara i dettagli di consegna
      const deliveryText = orderData.delivery.method === 'pickup' ? 'Recoger en tienda' : 
                          orderData.delivery.method === 'local' ? 'Entrega local' : 'Entrega CDMX';
      
      const timingText = orderData.timing.method === 'standard' ? 'Est√°ndar' :
                        orderData.timing.method === 'express1' ? 'Express 1 d√≠a' : 'Mismo d√≠a';
      
      // Prepara le note speciali
      const specialNotes = document.getElementById('special-notes')?.value || '';
      
      // Prepara la lista dei file caricati
      let filesList = '';
      if (orderData.files && orderData.files.length > 0) {
        filesList = orderData.files.map(file => `- ${file.name} (${(file.size/1024/1024).toFixed(2)} MB)`).join('\n');
      }
      
      // Template parameters per EmailJS
      const templateParams = {
        orderNumber: orderNumber,
        customerName: name,
        customerEmail: email,
        customerPhone: phone,
        serviceType: `${orderData.type === 'copies' ? 'Copias' : 'Impresiones'} ${orderData.color === 'bw' ? 'Blanco y Negro' : 'a Color'}`,
        orderDetails: `${copies} copias √ó ${pdfPages} p√°ginas = ${totalPages} p√°ginas totales (${orderData.sides === 'double' ? 'doble cara' : 'una cara'})`,
        upsells: upsellsText || 'Ninguno',
        deliveryMethod: deliveryText,
        deliveryTiming: timingText,
        totalAmount: finalTotal.toFixed(2),
        paymentMethod: orderData.payment === 'cash' ? 'Efectivo' : 'Transferencia',
        fileCount: orderData.files.length,
        filesList: filesList || 'Ning√∫n archivo',
        specialNotes: specialNotes || 'Ninguna',
        anticipoAmount: anticipoAmount,
        requiresAnticipo: requiresAnticipo ? 'S√ç' : 'NO'
      };
      
      // Invia email usando EmailJS
      emailjs.send('service_vcncpul', 'template_gj4wo8s', templateParams)
        .then(function(response) {
          console.log('‚úÖ Email inviata con successo:', response);
        }, function(error) {
          console.error('‚ùå Errore invio email:', error);
        });
    }
    
    function inviaOrdineWhatsApp(orderNumber, name, finalTotal) {
      // Prepara il messaggio WhatsApp
      const pdfPages = orderData.pdfPages || 1;
      const copies = orderData.quantity || 1;
      const totalPages = pdfPages * copies;
      
      // Calcola se richiede anticipo
      const requiresAnticipo = totalPages >= 1000;
      const anticipoAmount = requiresAnticipo ? (finalTotal * 0.5).toFixed(2) : '0.00';
      
      // Prepara i servizi aggiuntivi
      let upsellsText = '';
      Object.values(orderData.upsells).forEach(upsell => {
        upsellsText += `\n- ${upsell.name}: +$${upsell.price}`;
      });
      
      // Prepara i dettagli di consegna
      const deliveryText = orderData.delivery.method === 'pickup' ? 'Recoger en tienda' : 
                          orderData.delivery.method === 'local' ? 'Entrega local' : 'Entrega CDMX';
      
      const timingText = orderData.timing.method === 'standard' ? 'Est√°ndar' :
                        orderData.timing.method === 'express1' ? 'Express 1 d√≠a' : 'Mismo d√≠a';
      
      // Prepara le note speciali
      const specialNotes = document.getElementById('special-notes')?.value || '';
      
      // Prepara la lista dei file caricati
      let filesList = '';
      if (orderData.files && orderData.files.length > 0) {
        filesList = orderData.files.map(file => `‚Ä¢ ${file.name} (${(file.size/1024/1024).toFixed(2)} MB)`).join('\n');
      }
      
      // Crea il messaggio WhatsApp
      const message = `üöÄ NUEVO PEDIDO ONLINE - #${orderNumber}

üë§ Cliente: ${name}
üì± Tel: ${orderData.customer?.phone || 'No proporcionado'}

üìã PEDIDO:
- ${orderData.type === 'copies' ? 'Copias' : 'Impresiones'} ${orderData.color === 'bw' ? 'Blanco y Negro' : 'a Color'}
- ${copies} copias √ó ${pdfPages} p√°ginas = ${totalPages} p√°ginas totales (${orderData.sides === 'double' ? 'doble cara' : 'una cara'})${upsellsText}

üöö ENTREGA: ${deliveryText} (${timingText})
üí∞ TOTAL: $${finalTotal.toFixed(2)} MXN
üí≥ Pago: ${orderData.payment === 'cash' ? 'Efectivo' : (requiresAnticipo ? 'Transferencia 50% Anticipo' : 'Transferencia')}

üìÅ ARCHIVOS CARGADOS (${orderData.files.length}):
${filesList || 'Ning√∫n archivo'}

${specialNotes ? 'üìù Notas: ' + specialNotes : ''}

‚ö†Ô∏è REQUIERE ANTICIPO: $${anticipoAmount} MXN (${requiresAnticipo ? 'S√ç' : 'NO'})
${ orderData.payment === 'transfer' || requiresAnticipo ? `
üè¶ DATOS BANCARIOS:
‚Ä¢ Banco: Banorte
‚Ä¢ Cuenta: 5264246819339226
‚Ä¢ Titular: MAGALI GUADALUPE JUAREZ ZARCO
‚Ä¢ Referencia: ${orderData.reference || 'PENDIENTE'}
` : '' }

¬°Pedido listo para procesar!`;
      
      // Codifica il messaggio per WhatsApp
      const encodedMessage = encodeURIComponent(message);
      
      // Apri WhatsApp con il messaggio pre-compilato
      window.open(`https://wa.me/525540219892?text=${encodedMessage}`, '_blank');
    }
    
    function confermaOrdineCompleto(orderNumber, name, email, phone, finalTotal) {
      // 1. Email automatica al proprietario (GRATIS)
      inviaEmailOrdine(orderNumber, name, email, phone, finalTotal);
      
      // 2. WhatsApp si apre automaticamente per il cliente (GRATIS)
      inviaOrdineWhatsApp(orderNumber, name, finalTotal);
      
      // 3. Conferma al cliente
      setTimeout(() => {
        alert('‚úÖ ¬°Pedido confirmado exitosamente!\n\nüìß Email enviado al negocio\nüì± WhatsApp abierto para enviar mensaje\n\nEl negocio se pondr√° en contacto contigo pronto.');
      }, 1000);
    }

    function showOrderPage(shouldPush = true) {
      if (homepage) homepage.style.display = 'none';
      if (homepageContent) homepageContent.style.display = 'none';
      if (orderPage) orderPage.classList.add('active');
      updateOrderSummary();
      window.scrollTo(0, 0);
      
      // Assicurati che le opzioni di pagamento siano configurate
      setTimeout(() => {
        setupDeliveryOptions();
        console.log('‚úÖ Opzioni di pagamento configurate');
      }, 100);
      
      // Aggiungi alla cronologia del browser per gestire il pulsante "Indietro"
      if (shouldPush && window.history && window.history.pushState) {
        window.history.pushState({ page: 'order' }, '', window.location.origin + '/#order');
      }
    }

    // GRIGLIA LIBRI - VERSIONE SEMPLICE E FUNZIONALE
    console.log('üìö Griglia libri - versione semplice...');
    
    // Inizializzazione quando il DOM √® pronto
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ Setup griglia libri...');
      console.log('‚úÖ Griglia libri inizializzata!');
    });

    // Sistema di recensioni VERE di Google di COPIMAX - Solo 3 che cambiano a ogni refresh
    const realGoogleReviews = [
      {
        name: "Carlos M.",
        avatar: "https://images.unsplash.com/photo-1552374196-c4e7ffc6e126?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Excelente servicio, imprimieron mi tesis de 150 p√°ginas en menos de 2 horas. El engargolado qued√≥ perfecto y el precio s√∫per accesible. ¬°Totalmente recomendado!",
        date: "Hace 2 semanas"
      },
      {
        name: "Ana L.",
        avatar: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Hicieron mis men√∫s a color con acabado premium. El servicio fue r√°pido y profesional. Los precios son justos para la calidad que ofrecen.",
        date: "Hace 1 mes"
      },
      {
        name: "Miguel R.",
        avatar: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "COPIMAX es nuestro proveedor de confianza para todos los documentos de la oficina. Copias n√≠tidas, entrega puntual y atenci√≥n personalizada.",
        date: "Hace 3 semanas"
      },
      {
        name: "Patricia S.",
        avatar: "https://images.unsplash.com/photo-1544717305-2782549b5136?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Imprimo material did√°ctico todas las semanas. La calidad es consistente y los precios estudiantiles me ayudan mucho. Excelente servicio.",
        date: "Hace 2 meses"
      },
      {
        name: "Roberto G.",
        avatar: "https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Imprimieron planos t√©cnicos en formato grande con excelente calidad. El servicio t√©cnico entiende perfectamente las necesidades profesionales.",
        date: "Hace 1 mes"
      },
      {
        name: "Mar√≠a E.",
        avatar: "https://images.unsplash.com/photo-1544005316-04ae3b2c1a9b?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Durante toda mi carrera, COPIMAX ha sido mi salvaci√≥n. Copias baratas, impresi√≥n color perfecta y siempre me sacan de apuros.",
        date: "Hace 3 semanas"
      },
      {
        name: "Luis F.",
        avatar: "https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Servicio excepcional. Imprimieron 500 volantes en papel couch√© con acabado premium. La calidad super√≥ mis expectativas y el precio fue muy competitivo.",
        date: "Hace 1 semana"
      },
      {
        name: "Editorial MX",
        avatar: "https://images.unsplash.com/photo-1544005313-ff6d9a16f38a?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Hicimos un tiraje de 35,000 copias BN para una distribuci√≥n escolar. Entrega en 48h, empaquetado por lotes y calidad constante. Volveremos a trabajar con COPIMAX.",
        date: "Hace 5 d√≠as"
      },
      {
        name: "Carmen V.",
        avatar: "https://images.unsplash.com/photo-1544005316-8f7f11f9c7ae?w=96&h=96&fit=crop&crop=faces",
        stars: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ",
        text: "Excelente atenci√≥n al cliente. Me ayudaron con un proyecto urgente de impresi√≥n a color. Entregaron todo en tiempo r√©cord y con calidad profesional.",
        date: "Hace 2 semanas"
      }
    ];
    
    let currentReviewIndex = 0;
    
    function displayReviews() {
      // Render immediato senza placeholder/loading
      const reviewsGrid = document.getElementById('reviewsGrid');
      
      if (!reviewsGrid) {
        console.error('‚ùå ReviewsGrid non trovato!');
        return;
      }
      
      console.log('‚úÖ ReviewsGrid trovato, caricando recensioni...');
      
      // Seleziona 3 recensioni casuali diverse
      const shuffledReviews = [...realGoogleReviews].sort(() => Math.random() - 0.5);
      const selectedReviews = shuffledReviews.slice(0, 3);
      
      console.log('üìù Recensioni selezionate:', selectedReviews.length);
      
      let reviewsHTML = '';
      selectedReviews.forEach(review => {
        reviewsHTML += `
          <div class="rev-card">
            <div class="rev-top">
              <div class="avatar">
                ${review.avatar ? `<img src="${review.avatar}" alt="${review.name}" style="width:50px;height:50px;border-radius:50%;object-fit:cover">` : `<div class=\"avatar-placeholder\">${review.name.charAt(0)}</div>`}
              </div>
              <div class="review-info">
                <div class="review-name">${review.name}</div>
                <div class="review-stars">${review.stars}</div>
                <div class="review-date">${review.date}</div>
            </div>
            </div>
            <div class="review-text">${review.text}</div>
          </div>
        `;
      });
      
      reviewsGrid.innerHTML = reviewsHTML;
      // Fine render recensioni
    }
    
    // Ricarica disabilitata: mostriamo direttamente senza pulsante
    
    // Test immediato delle recensioni
    function testReviews() {
      console.log('üß™ Test recensioni:');
      console.log('- Dati disponibili:', realGoogleReviews.length);
      console.log('- Elemento DOM:', document.getElementById('reviewsGrid'));
      displayReviews();
    }

    function showHomePage(shouldPush = true) {
      if (orderPage) orderPage.classList.remove('active');
      if (homepage) homepage.style.display = 'block';
      if (homepageContent) homepageContent.style.display = 'block';
      if (blogPage) blogPage.classList.add('hidden');
      showStep(1);
      window.scrollTo(0, 0);
      
      // Aggiorna cronologia senza aggiungere una nuova voce inutile
      if (shouldPush && window.history && window.history.replaceState) {
        const cleanUrl = window.location.origin + window.location.pathname;
        window.history.replaceState({ page: 'home' }, '', cleanUrl);
      }
    }

    function showBlogPage() {
      if (orderPage) orderPage.classList.remove('active');
      if (homepage) homepage.style.display = 'none';
      if (homepageContent) homepageContent.style.display = 'none';
      if (blogPage) blogPage.classList.remove('hidden');
      window.scrollTo(0, 0);
      
      // Aggiorna URL e cronologia browser
      if (window.history && window.history.pushState) {
        window.history.pushState({ page: 'blog' }, '', window.location.origin + '/#blog');
      }
    }

    function nextStep(stepNum) {
      console.log('üîÑ nextStep chiamato con stepNum:', stepNum);
      
      // Assicurati che orderData.files sia un array SOLO se √® undefined/null
      if (!orderData.files) {
        console.log('‚ö†Ô∏è orderData.files √® undefined/null, lo inizializzo');
        orderData.files = [];
      } else if (!Array.isArray(orderData.files)) {
        console.log('‚ö†Ô∏è orderData.files non √® un array, lo converto');
        orderData.files = [orderData.files];
      }
      
      console.log('üìÅ orderData.files.length:', orderData.files.length);
      console.log('üìÅ orderData.files:', orderData.files);
      // Validazione: per andare dal Passo 1 ‚Üí 2 o 2 ‚Üí 3 serve almeno un file
      // Controllo semplice: verifica se ci sono file caricati
      const hasFiles = orderData.files.length > 0;
      console.log('üîç Controllo file per step', stepNum, ':', hasFiles, 'orderData.files:', orderData.files);
      
      if ((stepNum === 2 || stepNum === 3) && !hasFiles) {
        console.error('‚ùå Nessun file caricato, impossibile continuare');
        alert('Por favor sube al menos un archivo antes de continuar.');
        showStep(1); // porta l'utente allo step de subida archivos
        return;
      }
      console.log('‚úÖ File validati, procedendo al step:', stepNum);
      showStep(stepNum);
    }

    function prevStep(stepNum) {
      showStep(stepNum);
    }

    function showStep(stepNum) {
      console.log('üîÑ showStep chiamato con stepNum:', stepNum);
      
      // Assicurati che orderData.files sia un array SOLO se √® undefined/null
      if (!orderData.files) {
        console.log('‚ö†Ô∏è orderData.files √® undefined/null, lo inizializzo');
        orderData.files = [];
      } else if (!Array.isArray(orderData.files)) {
        console.log('‚ö†Ô∏è orderData.files non √® un array, lo converto');
        orderData.files = [orderData.files];
      }
      
      console.log('üìÅ orderData.files.length in showStep:', orderData.files.length);
      
      // Update step indicators
      steps.forEach((step, index) => {
        step.classList.toggle('active', index + 1 === stepNum);
        step.classList.toggle('completed', index + 1 < stepNum);
      });

      // Show correct section
      orderSections.forEach((section, index) => {
        section.classList.toggle('hidden', index + 1 !== stepNum);
      });

      // Update progress bar
      const progressFill = document.getElementById('progress-fill');
      if (progressFill) {
        progressFill.style.width = `${stepNum * 25}%`;
      }

      if (stepNum === 2) {
        updateOrderSummary();
      } else if (stepNum === 4) {
        updateFinalSummary();
        checkPaymentRequirements();
      }
    }

    function handleFileUpload(e, isInput = false) {
      console.log('üìÅ handleFileUpload chiamato con:', e.type);
      e.preventDefault();
      const files = isInput ? e.target.files : e.dataTransfer.files;
      
      console.log('üìÅ File ricevuti:', files.length, 'file');
      
      if (files.length === 0) return;
      
      // Show progress
      const progress = document.getElementById('upload-progress');
      if (progress) progress.classList.remove('hidden');
      
      let processedFiles = 0;
      
      Array.from(files).forEach((file, index) => {
        if (file.size > 10 * 1024 * 1024) {
          showValidationMessage('file-size-error', `El archivo ${file.name} es muy grande. M√°ximo 10MB.`, 'error');
          return;
        }
        
        if (!file.name.match(/\.(pdf|jpe?g|png|docx?|txt)$/i)) {
          showValidationMessage('file-format-error', `Formato no soportado: ${file.name}`, 'error');
          return;
        }

        // Process file immediately (no more setTimeout)
        console.log('üìÅ Processando file:', file.name, 'dimensione:', file.size);
        
        // Assicurati che orderData.files sia un array
        if (!orderData.files) {
          console.log('‚ö†Ô∏è orderData.files era undefined/null, lo inizializzo');
          orderData.files = [];
        } else if (!Array.isArray(orderData.files)) {
          console.log('‚ö†Ô∏è orderData.files non era un array, lo converto');
          orderData.files = [orderData.files];
        }
        
        console.log('üìÅ orderData.files prima dell\'aggiunta:', orderData.files);
        console.log('üìÅ orderData.files.length prima dell\'aggiunta:', orderData.files.length);
        
        orderData.files.push(file);
        console.log('üìÅ orderData.files dopo aggiunta:', orderData.files);
        console.log('üìÅ orderData.files.length dopo aggiunta:', orderData.files.length);
        
        displayUploadedFile(file);
        updateUploadStats();
        
        processedFiles++;
        updateFileProgress(processedFiles, files.length);
        
        if (processedFiles === files.length) {
          if (progress) progress.classList.add('hidden');
        }
      });
      
      const fileUpload = document.getElementById('file-upload');
      if (fileUpload) fileUpload.classList.remove('dragover');
    }

    function displayUploadedFile(file) {
      console.log('üìÑ displayUploadedFile chiamato per:', file.name);
      console.log('üìÑ File details:', { name: file.name, size: file.size, type: file.type });
      
      const container = document.getElementById('file-preview-grid');
      console.log('üîç Container trovato:', !!container);
      
      if (container) {
        const fileItem = document.createElement('div');
        fileItem.className = 'file-preview-item';
        fileItem.innerHTML = `
          <div class="file-preview-header">
            <div class="file-icon">üìÑ</div>
            <div class="file-info">
              <div class="file-name">${file.name}</div>
              <div class="file-size">${(file.size/1024/1024).toFixed(2)} MB</div>
            </div>
          </div>
          <div class="file-actions">
            <button class="file-action-btn" onclick="previewFile('${file.name}')">üëÅÔ∏è</button>
            <button class="file-action-btn remove" onclick="removeFile('${file.name}')">üóëÔ∏è</button>
          </div>
        `;
        container.appendChild(fileItem);
        console.log('‚úÖ File item aggiunto al container');
      } else {
        console.error('‚ùå Container file-preview-grid non trovato!');
      }
    }

    function updateUploadStats() {
      console.log('üìä updateUploadStats chiamato, orderData.files.length:', orderData.files ? orderData.files.length : 'undefined');
      
      // Assicurati che orderData.files sia un array
      if (!orderData.files) {
        orderData.files = [];
      } else if (!Array.isArray(orderData.files)) {
        orderData.files = [orderData.files];
      }
      
      const fileCount = document.getElementById('file-count');
      const totalSize = document.getElementById('total-size');
      
      console.log('üîç Elementi trovati:', { fileCount: !!fileCount, totalSize: !!totalSize });
      console.log('üîç orderData.files:', orderData.files);
      console.log('üîç orderData.files.length:', orderData.files.length);
      
      if (fileCount) {
        fileCount.textContent = orderData.files.length;
        console.log('üìä File count aggiornato a:', orderData.files.length);
      } else {
        console.error('‚ùå Elemento file-count non trovato!');
      }
      
      if (totalSize) {
        const totalBytes = orderData.files.reduce((sum, file) => sum + file.size, 0);
        totalSize.textContent = (totalBytes / 1024 / 1024).toFixed(2) + ' MB';
        console.log('üìä Total size aggiornato a:', (totalBytes / 1024 / 1024).toFixed(2), 'MB');
      } else {
        console.error('‚ùå Elemento total-size non trovato!');
      }
    }

    function updateFileProgress(processed, total) {
      const progressFill = document.getElementById('file-progress-fill');
      if (progressFill) {
        const percentage = (processed / total) * 100;
        progressFill.style.width = `${percentage}%`;
      }
    }

    function showValidationMessage(elementId, message, type) {
      const element = document.getElementById(elementId);
      if (element) {
        element.textContent = message;
        element.className = `validation-message ${type}`;
        
        // Auto-hide after 5 seconds
        setTimeout(() => {
          element.textContent = '';
          element.className = 'validation-message';
        }, 5000);
      }
    }

    window.removeFile = function(fileName) {
      console.log('üóëÔ∏è removeFile chiamato per:', fileName);
      
      // Assicurati che orderData.files sia un array
      if (!orderData.files) {
        orderData.files = [];
      } else if (!Array.isArray(orderData.files)) {
        orderData.files = [orderData.files];
      }
      
      console.log('üìÅ orderData.files prima della rimozione:', orderData.files.length);
      
      // Rimuovi il file dall'array
      orderData.files = orderData.files.filter(f => f.name !== fileName);
      
      console.log('üìÅ orderData.files dopo la rimozione:', orderData.files.length);
      
      // Rimuovi solo l'elemento specifico dal DOM invece di svuotare tutto
      const container = document.getElementById('file-preview-grid');
      if (container) {
        const fileItems = container.querySelectorAll('.file-preview-item');
        fileItems.forEach(item => {
          const fileNameElement = item.querySelector('.file-name');
          if (fileNameElement && fileNameElement.textContent === fileName) {
            item.remove();
          }
        });
      }
      
      updateUploadStats();
    }

    window.previewFile = function(fileName) {
      // Assicurati che orderData.files sia un array
      if (!orderData.files) {
        orderData.files = [];
      } else if (!Array.isArray(orderData.files)) {
        orderData.files = [orderData.files];
      }
      
      const file = orderData.files.find(f => f.name === fileName);
      if (file) {
        if (file.type.startsWith('image/')) {
          // Show image preview
          const reader = new FileReader();
          reader.onload = function(e) {
            const preview = window.open('', '_blank');
            preview.document.write(`
              <html>
                <head><title>Preview: ${fileName}</title></head>
                <body style="margin:0;padding:20px;background:#f8fafc;text-align:center">
                  <h2>${fileName}</h2>
                  <img src="${e.target.result}" style="max-width:100%;max-height:80vh;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.1)">
                </body>
              </html>
            `);
          };
          reader.readAsDataURL(file);
        } else {
          // Show file info for non-images
          alert(`Archivo: ${fileName}\nTipo: ${file.type}\nTama√±o: ${(file.size/1024/1024).toFixed(2)} MB`);
        }
      }
    }

    function setupDeliveryOptions() {
      const deliveryOptions = document.querySelectorAll('[data-delivery], [data-timing], [data-payment]');
      const addressSection = document.getElementById('delivery-address');
      
      deliveryOptions.forEach(option => {
        option.addEventListener('click', () => {
          const group = option.dataset.delivery ? 'delivery' : 
                       option.dataset.timing ? 'timing' : 'payment';
          
          // Remove active from group
          document.querySelectorAll(`[data-${group}]`).forEach(el => el.classList.remove('selected'));
          option.classList.add('selected');
          
          // Update order data
          if (option.dataset.delivery) {
            orderData.delivery = {
              method: option.dataset.delivery,
              price: parseInt(option.dataset.price)
            };
            
            // Show/hide address section
            if (addressSection) {
              if (option.dataset.delivery !== 'pickup') {
                addressSection.classList.remove('hidden');
              } else {
                addressSection.classList.add('hidden');
              }
            }
            
            // GESTIONE METODI DI PAGAMENTO BASATA SULLA CONSEGNA
            const cashPaymentOption = document.querySelector('[data-payment="cash"]');
            const transferPaymentOption = document.querySelector('[data-payment="transfer"]');
            
            if (option.dataset.delivery === 'pickup') {
              // Se ritiro in negozio: abilita entrambi i metodi
              if (cashPaymentOption) {
                cashPaymentOption.classList.remove('disabled');
                cashPaymentOption.style.opacity = '1';
                cashPaymentOption.style.pointerEvents = 'auto';
              }
              if (transferPaymentOption) {
                transferPaymentOption.classList.remove('disabled');
                transferPaymentOption.style.opacity = '1';
                transferPaymentOption.style.pointerEvents = 'auto';
              }
              
              // Se era selezionato efectivo e ora √® abilitato, mantienilo
              if (orderData.payment === 'cash') {
                // Mantieni efectivo selezionato
              } else {
                // Altrimenti passa a transfer (pi√π sicuro per pickup)
                orderData.payment = 'transfer';
                if (transferPaymentOption) transferPaymentOption.classList.add('selected');
                if (cashPaymentOption) cashPaymentOption.classList.remove('selected');
              }
            } else {
              // Se consegna a domicilio: disabilita efectivo, forza transfer
              if (cashPaymentOption) {
                cashPaymentOption.classList.add('disabled');
                cashPaymentOption.style.opacity = '0.5';
                cashPaymentOption.style.pointerEvents = 'none';
                cashPaymentOption.classList.remove('selected');
              }
              if (transferPaymentOption) {
                transferPaymentOption.classList.remove('disabled');
                transferPaymentOption.style.opacity = '1';
                transferPaymentOption.style.pointerEvents = 'auto';
                transferPaymentOption.classList.add('selected');
              }
              
              // Forza transfer per consegne
              orderData.payment = 'transfer';
              orderData.paymentConfirmed = false;
              
              // Mostra conferma pagamento per transfer
              showPaymentConfirmation('transfer');
            }
          }
          
          if (option.dataset.timing) {
            orderData.timing = {
              method: option.dataset.timing,
              price: parseInt(option.dataset.price)
            };
          }

          if (option.dataset.payment) {
            console.log('üîç Metodo di pagamento selezionato:', option.dataset.payment);
            
            // Reset stato conferma pagamento quando si cambia metodo
            if (orderData.payment !== option.dataset.payment) {
              orderData.paymentConfirmed = false;
              console.log('üîÑ Reset stato conferma pagamento');
              
              // Assicurati che il pulsante di conferma ordine sia disabilitato
              const submitOrderBtn = document.getElementById('submit-order');
              if (submitOrderBtn) {
                submitOrderBtn.disabled = true;
                submitOrderBtn.style.opacity = '0.5';
                submitOrderBtn.textContent = '‚è≥ Confirma el m√©todo de pago primero';
                submitOrderBtn.classList.add('disabled');
                submitOrderBtn.classList.remove('active');
                console.log('‚úÖ Pulsante conferma ordine disabilitato dopo cambio metodo');
              }
            }
            
            orderData.payment = option.dataset.payment;
            // Mostra conferma pagamento
            showPaymentConfirmation(option.dataset.payment);
          }
        });
      });
      
      // Event listeners per conferma pagamento
      const changePaymentBtn = document.getElementById('change-payment-btn');
      const confirmPaymentBtn = document.getElementById('confirm-payment-btn');
      
      if (changePaymentBtn) {
        changePaymentBtn.addEventListener('click', function() {
          console.log('üîç Pulsante cambio pagamento cliccato');
          hidePaymentConfirmation();
        });
      } else {
        console.warn('‚ö†Ô∏è Pulsante cambio pagamento non trovato');
      }
      
      if (confirmPaymentBtn) {
        confirmPaymentBtn.addEventListener('click', function() {
          console.log('üîç Pulsante conferma pagamento cliccato');
          confirmPaymentMethod();
        });
      } else {
        console.warn('‚ö†Ô∏è Pulsante conferma pagamento non trovato');
      }
    }
    
    // SISTEMA CONFERMA PAGAMENTO
    function showPaymentConfirmation(paymentMethod) {
      console.log('üîç showPaymentConfirmation chiamata con:', paymentMethod);
      
      const paymentConfirmation = document.getElementById('payment-confirmation');
      const paymentMethodInfo = document.getElementById('payment-method-info');
      
      if (!paymentConfirmation || !paymentMethodInfo) {
        console.error('‚ùå Elementi di conferma pagamento non trovati');
        return;
      }
      
      // Reset stato conferma pagamento
      orderData.paymentConfirmed = false;
      console.log('üîÑ Stato conferma pagamento resettato');
      
      // Prepara informazioni metodo pagamento
      let methodInfo = '';
      if (paymentMethod === 'cash') {
        methodInfo = `
          <div style="margin-bottom: 12px;">
            <strong>üíµ Pago en Efectivo</strong><br>
            ‚Ä¢ Paga al recoger tu pedido en la tienda<br>
            ‚Ä¢ Paga al recibir la entrega en tu domicilio<br>
            ‚Ä¢ Sin comisiones ni cargos adicionales
          </div>
        `;
      } else if (paymentMethod === 'transfer') {
        methodInfo = `
          <div style="margin-bottom: 12px;">
            <strong>üè¶ Transferencia Bancaria</strong><br>
            ‚Ä¢ Banco: Banorte<br>
            ‚Ä¢ Cuenta: 5264246819339226<br>
            ‚Ä¢ Titular: MAGALI GUADALUPE JUAREZ ZARCO<br>
            ‚Ä¢ Referencia: ${orderData.reference || 'PENDIENTE'}<br>
            ‚Ä¢ Enviar comprobante por WhatsApp
          </div>
        `;
      }
      
      paymentMethodInfo.innerHTML = methodInfo;
      paymentConfirmation.style.display = 'block';
      
      // Disabilita pulsante conferma ordine finch√© non conferma pagamento
      const submitOrderBtn = document.getElementById('submit-order');
      if (submitOrderBtn) {
        submitOrderBtn.disabled = true;
        submitOrderBtn.style.opacity = '0.5';
        submitOrderBtn.textContent = '‚è≥ Confirma el m√©todo de pago primero';
        
        // Aggiungi classe per stile disabilitato
        submitOrderBtn.classList.add('disabled');
        submitOrderBtn.classList.remove('active');
        
        console.log('‚úÖ Pulsante conferma ordine disabilitato');
        
        // Aggiungi tooltip per spiegare cosa fare
        submitOrderBtn.title = 'Debes confirmar tu m√©todo de pago antes de continuar. Haz clic en "‚úÖ Confirmar Pago" primero.';
      } else {
        console.error('‚ùå Pulsante conferma ordine non trovato in showPaymentConfirmation');
      }
    }
    
    function hidePaymentConfirmation() {
      console.log('üîç hidePaymentConfirmation chiamata');
      
      const paymentConfirmation = document.getElementById('payment-confirmation');
      if (paymentConfirmation) {
        paymentConfirmation.style.display = 'none';
        console.log('‚úÖ Conferma pagamento nascosta');
      }
      
      // Riabilita pulsante conferma ordine
      const submitOrderBtn = document.getElementById('submit-order');
      if (submitOrderBtn) {
        submitOrderBtn.disabled = false;
        submitOrderBtn.style.opacity = '1';
        submitOrderBtn.textContent = 'üöÄ CONFIRMAR PEDIDO';
        
        // Rimuovi classi di stile
        submitOrderBtn.classList.remove('disabled');
        submitOrderBtn.classList.remove('active');
        
        // Rimuovi tooltip
        submitOrderBtn.title = '';
        
        console.log('‚úÖ Pulsante conferma ordine riabilitato');
      } else {
        console.error('‚ùå Pulsante conferma ordine non trovato in hidePaymentConfirmation');
      }
    }
    
    function confirmPaymentMethod() {
      console.log('üîç confirmPaymentMethod chiamata');
      
      // Marca pagamento come confermato
      orderData.paymentConfirmed = true;
      console.log('‚úÖ orderData.paymentConfirmed impostato a:', orderData.paymentConfirmed);
      
      // Nascondi conferma pagamento
      hidePaymentConfirmation();
      
      // Mostra conferma con istruzioni chiare
      const confirmMessage = `‚úÖ M√©todo de pago confirmado correctamente

üéØ Ahora puedes confirmar tu pedido:

1. ‚úÖ M√©todo de pago: ${orderData.payment === 'cash' ? 'Efectivo' : 'Transferencia Bancaria'}
2. üöÄ Haz clic en "CONFIRMAR PEDIDO" para finalizar

El sistema te enviar√° un email y abrir√° WhatsApp autom√°ticamente.`;

      alert(confirmMessage);
      
      // Riabilita pulsante conferma ordine
      const submitOrderBtn = document.getElementById('submit-order');
      if (submitOrderBtn) {
        submitOrderBtn.disabled = false;
        submitOrderBtn.style.opacity = '1';
        submitOrderBtn.textContent = 'üöÄ CONFIRMAR PEDIDO';
        
        // Aggiungi classe per stile attivo
        submitOrderBtn.classList.remove('disabled');
        submitOrderBtn.classList.add('active');
        
        // Aggiungi tooltip per spiegare cosa fare
        submitOrderBtn.title = '¬°Perfecto! Ahora puedes confirmar tu pedido. Haz clic aqu√≠ para finalizar.';
        
        console.log('‚úÖ Pulsante conferma ordine riabilitato');
      } else {
        console.error('‚ùå Pulsante conferma ordine non trovato');
      }
      
      console.log('‚úÖ Payment method confirmed:', orderData.payment);
    }

    function updateFinalSummary() {
      const subtotal = orderData.total;
      const deliveryPrice = orderData.delivery.price;
      const timingPrice = orderData.timing.price;
      const finalTotal = subtotal + deliveryPrice + timingPrice;

      console.log('üìä updateFinalSummary - Dettagli:');
      console.log('üìä orderData.total:', orderData.total);
      console.log('üìä orderData.pdfPages:', orderData.pdfPages);
      console.log('üìä orderData.quantity:', orderData.quantity);
      console.log('üìä subtotal:', subtotal);
      console.log('üìä deliveryPrice:', deliveryPrice);
      console.log('üìä timingPrice:', timingPrice);
      console.log('üìä finalTotal:', finalTotal);

      const finalSubtotal = document.getElementById('final-subtotal');
      const finalDelivery = document.getElementById('final-delivery');
      const finalTotal2 = document.getElementById('final-total');
      const timingRow = document.getElementById('final-timing-row');
      const finalTiming = document.getElementById('final-timing');

      if (finalSubtotal) {
        // Mostra il dettaglio del calcolo se √® disponibile
        const pdfPages = orderData.pdfPages || 1;
        const copies = orderData.quantity || 1;
        const totalPages = pdfPages * copies;
        finalSubtotal.textContent = `${subtotal.toFixed(2)} (${copies} copias √ó ${pdfPages} p√°ginas)`;
      }
      if (finalDelivery) finalDelivery.textContent = deliveryPrice > 0 ? `${deliveryPrice}` : 'GRATIS';
      
      if (timingRow && finalTiming) {
        if (timingPrice > 0) {
          timingRow.style.display = 'flex';
          finalTiming.textContent = `${timingPrice}`;
        } else {
          timingRow.style.display = 'none';
        }
      }
      
      if (finalTotal2) finalTotal2.textContent = `${finalTotal.toFixed(2)} MXN`;
      const finalRef = document.getElementById('final-reference');
      if (finalRef) finalRef.textContent = orderData.reference || '‚Äî';
    }

    function submitOrder() {
      console.log('üîç submitOrder chiamata');
      console.log('üìä Stato ordine:', {
        paymentConfirmed: orderData.paymentConfirmed,
        payment: orderData.payment,
        files: orderData.files.length
      });
      
      // VALIDAZIONE PAGAMENTO - NUOVO SISTEMA
      if (!orderData.paymentConfirmed) {
        console.error('‚ùå Pagamento non confermato');
        
        // Mostra messaggio pi√π dettagliato
        let errorMessage = '‚ùå Debes confirmar el m√©todo de pago antes de continuar\n\n';
        
        if (!orderData.payment) {
          errorMessage += '‚ö†Ô∏è No has seleccionado ning√∫n m√©todo de pago\n';
        } else {
          errorMessage += `‚úÖ M√©todo seleccionado: ${orderData.payment === 'cash' ? 'Efectivo' : 'Transferencia'}\n`;
          errorMessage += '‚ö†Ô∏è Pero no has confirmado el m√©todo\n';
        }
        
        errorMessage += '\n\nüìã Pasos para completar el pago:\n';
        errorMessage += '1. ‚úÖ Selecciona tu m√©todo de pago (Efectivo o Transferencia)\n';
        errorMessage += '2. üîç Revisa los detalles del m√©todo seleccionado\n';
        errorMessage += '3. ‚úÖ Haz clic en "‚úÖ Confirmar Pago"\n';
        errorMessage += '4. üöÄ Luego podr√°s hacer clic en "CONFIRMAR PEDIDO"';
        
        alert(errorMessage);
        return;
      }
      
      // Validate required fields with detailed feedback
      const name = document.getElementById('customer-name')?.value.trim();
      const email = document.getElementById('customer-email')?.value.trim();
      const phone = document.getElementById('customer-phone')?.value.trim();
      
      let hasErrors = false;
      
      if (!name) {
        showValidationMessage('name-validation', 'El nombre es requerido', 'error');
        hasErrors = true;
      }
      
      if (!email) {
        showValidationMessage('email-validation', 'El email es requerido', 'error');
        hasErrors = true;
      }
      
      if (!phone) {
        showValidationMessage('phone-validation', 'El tel√©fono es requerido', 'error');
        hasErrors = true;
      }
      
      // Validate file uploads
      if (orderData.files.length === 0) {
        alert('Por favor sube al menos un archivo para procesar.');
        hasErrors = true;
      }
      
      // Check total file size (max 50MB)
      const totalSize = orderData.files.reduce((sum, file) => sum + file.size, 0);
      if (totalSize > 50 * 1024 * 1024) {
        alert('El tama√±o total de los archivos excede 50MB. Por favor reduce el tama√±o o divide en m√∫ltiples pedidos.');
        hasErrors = true;
      }
      
      if (hasErrors) {
        return;
      }

      // Generate order number and reference
      const orderNumber = 'COPI' + Date.now().toString().slice(-6);
      orderData.reference = `REF-${Date.now().toString().slice(-8)}`;
      
      // Save customer data to orderData
      orderData.customer = { name, email, phone };
      
      // Calculate final total
      const finalTotal = orderData.total + orderData.delivery.price + orderData.timing.price;
      
      // Update confirmation details
      const orderNumberEl = document.getElementById('order-number');
      const confirmedTotal = document.getElementById('confirmed-total');
      
      if (orderNumberEl) orderNumberEl.textContent = orderNumber;
      if (confirmedTotal) confirmedTotal.textContent = `${finalTotal.toFixed(2)} MXN`;
      
      // Calculate delivery date
      let deliveryDate = new Date();
      if (orderData.timing.method === 'express-same') {
        deliveryDate = new Date(); // Today
      } else if (orderData.timing.method === 'express1') {
        deliveryDate.setDate(deliveryDate.getDate() + 1);
      } else {
        deliveryDate.setDate(deliveryDate.getDate() + 2);
      }
      
      const estimatedDelivery = document.getElementById('estimated-delivery');
      if (estimatedDelivery) {
        estimatedDelivery.textContent = deliveryDate.toLocaleDateString('es-MX');
      }

      // Create WhatsApp message
      const msg = createOrderWhatsAppMessage(orderNumber, name, email, phone, finalTotal);
      const waOrderLink = document.getElementById('wa-order-link');
      if (waOrderLink) {
        waOrderLink.href = 'https://wa.me/525540219892?text=' + encodeURIComponent(msg);
      }

      // SISTEMA IBRIDO GRATUITO: EmailJS + WhatsApp
      confermaOrdineCompleto(orderNumber, name, email, phone, finalTotal);
      
      // AGGIORNA STATO ORDINE
      orderData.orderStatus = 'confirmed';
      orderData.orderNumber = orderNumber;
      orderData.orderDate = new Date().toISOString();
      orderData.paymentStatus = 'pending';
      
      // Show confirmation
      const step4 = document.getElementById('step4');
      const orderConfirmation = document.getElementById('order-confirmation');
      if (step4) step4.classList.add('hidden');
      if (orderConfirmation) orderConfirmation.classList.remove('hidden');
      
      // Mostra dati bancari se il metodo di pagamento √® trasferimento
      const bankDetails = document.getElementById('bank-details');
      const bankReference = document.getElementById('bank-reference');
      if (orderData.payment === 'transfer' && bankDetails && bankReference) {
        bankDetails.style.display = 'block';
        bankReference.textContent = orderData.reference || 'PENDIENTE';
      }

      // Track order completion
      if (typeof trackOrderComplete === 'function') {
        trackOrderComplete(orderData);
      }

      // Log confirmation con stato ordine
      console.log('‚úÖ Order submitted successfully:', { 
        orderNumber, 
        orderData, 
        customer: { name, email, phone },
        status: orderData.orderStatus,
        paymentStatus: orderData.paymentStatus
      });
      
      // Sistema ibrido gi√† implementato sopra - EmailJS + WhatsApp automatici
    }

    function buildOrderPayload(orderNumber, name, email, phone, finalTotal) {
      return {
        orderNumber,
        reference: orderData.reference,
        createdAt: new Date().toISOString(),
        customer: { name, email, phone },
        items: {
          type: orderData.type,
          color: orderData.color,
          sides: orderData.sides,
          quantity: orderData.quantity,
          pdfPages: orderData.pdfPages || 1,
          totalPages: (orderData.quantity || 1) * (orderData.pdfPages || 1)
        },
        upsells: orderData.upsells,
        delivery: orderData.delivery,
        timing: orderData.timing,
        totals: {
          subtotal: orderData.total,
          delivery: orderData.delivery.price,
          express: orderData.timing.price,
          grandTotal: finalTotal
        },
        payment: orderData.payment,
        files: orderData.files.map(f => ({ name: f.name, size: f.size, type: f.type })),
        adminEmail: (typeof ADMIN_EMAIL !== 'undefined' ? ADMIN_EMAIL : '')
      };
    }

    // Check payment requirements for large orders
    function checkPaymentRequirements() {
      const paymentRequirements = document.getElementById('payment-requirements');
      const anticipoAmount = document.getElementById('anticipo-amount');
      const restoAmount = document.getElementById('resto-amount');
      const anticipoReference = document.getElementById('anticipo-reference');
      
      // Calcola le pagine totali per determinare i requisiti di pagamento
      const pdfPages = orderData.pdfPages || 1;
      const totalPages = orderData.quantity * pdfPages;
      
      if (totalPages >= 1000) {
        const total = orderData.total + orderData.delivery.price + orderData.timing.price;
        const anticipo = total * 0.5;
        const resto = total - anticipo;
        
        if (anticipoAmount) anticipoAmount.textContent = `$${anticipo.toFixed(2)} MXN`;
        if (restoAmount) restoAmount.textContent = `$${resto.toFixed(2)} MXN`;
        
        // Aggiorna referenza per anticipo
        if (anticipoReference) {
          anticipoReference.textContent = orderData.reference || 'PENDIENTE';
        }
        
        if (paymentRequirements) paymentRequirements.classList.remove('hidden');
        
        // Mostra avviso importante
        console.log('‚ö†Ô∏è ORDINE RICHIEDE ANTICIPO: 50% = $' + anticipo.toFixed(2) + ' MXN');
      } else {
        if (paymentRequirements) paymentRequirements.classList.add('hidden');
        console.log('‚úÖ Ordine senza anticipo richiesto');
      }
    }

    function createOrderWhatsAppMessage(orderNumber, name, email, phone, total) {
      const service = `${orderData.type === 'copies' ? 'Copias' : 'Impresiones'} ${orderData.color === 'bw' ? 'BN' : 'Color'}`;
      
      // Calcola le informazioni corrette del PDF
      const pdfPages = orderData.pdfPages || 1;
      const copies = orderData.quantity || 1;
      const totalPages = pdfPages * copies;
      const details = `${copies} copias √ó ${pdfPages} p√°ginas = ${totalPages} p√°ginas totales (${orderData.sides === 'double' ? 'doble cara' : 'una cara'})`;
      
      let upsellsText = '';
      Object.values(orderData.upsells).forEach(upsell => {
        upsellsText += `\n- ${upsell.name} (+${upsell.price})`;
      });

      const deliveryText = orderData.delivery.method === 'pickup' ? 'Recoger en tienda' : 
                          orderData.delivery.method === 'local' ? 'Entrega local' : 'Entrega CDMX';
      
      const timingText = orderData.timing.method === 'standard' ? 'Est√°ndar' :
                        orderData.timing.method === 'express1' ? 'Express 1 d√≠a' : 'Mismo d√≠a';

      const specialNotes = document.getElementById('special-notes')?.value || '';

      return `üöÄ NUEVO PEDIDO ONLINE - #${orderNumber}

üë§ Cliente: ${name}
üìß Email: ${email}
üì± Tel: ${phone}

üìã PEDIDO:
- ${service}
- ${details}${upsellsText}

üöö ENTREGA: ${deliveryText} (${timingText})
üí∞ TOTAL: ${total.toFixed(2)} MXN
üí≥ Pago: ${orderData.payment === 'cash' ? 'Efectivo' : 'Transferencia Banorte'}

üìÅ Archivos: ${orderData.files.length} archivo(s)
${specialNotes ? 'üìù Notas: ' + specialNotes : ''}

üè¶ DATOS BANCARIOS:
‚Ä¢ Banco: Banorte
‚Ä¢ Cuenta: 5264246819339226
‚Ä¢ Titular: MAGALI GUADALUPE JUAREZ ZARCO
‚Ä¢ Referencia: ${orderData.reference || 'PENDIENTE'}

¬°Pedido confirmado! Procesando...`;
    }

    function sendWhatsAppOrder() {
      const service = `${orderData.type === 'copies' ? 'Copias' : 'Impresiones'} ${orderData.color === 'bw' ? 'BN' : 'Color'}`;
      
      let upsellsText = '';
      Object.values(orderData.upsells).forEach(upsell => {
        upsellsText += ` + ${upsell.name}`;
      });

      // Calcola le informazioni corrette del PDF
      const pdfPages = orderData.pdfPages || 1;
      const copies = orderData.quantity || 1;
      const totalPages = pdfPages * copies;
      const pageInfo = pdfPages > 1 ? `${copies} copias √ó ${pdfPages} p√°ginas = ${totalPages} p√°ginas totales` : `${orderData.quantity} p√°ginas`;

      const requiresAnticipo = (orderData.quantity * (orderData.pdfPages || 1)) >= 1000;
      const msg = `Hola COPIMAX üëã
Quiero cotizar:
- ${service}
- ${pageInfo} (${orderData.sides === 'double' ? 'doble cara' : 'una cara'})${upsellsText}
- Total estimado: ${orderData.total.toFixed(2)} MXN
- Pago: ${orderData.payment === 'cash' ? 'Efectivo' : (requiresAnticipo ? 'Transferencia 50% Anticipo' : 'Transferencia')}

${ orderData.payment === 'transfer' || requiresAnticipo ? '¬øMe pasan los datos bancarios y referencia?' : '¬øLes env√≠o el archivo por aqu√≠?'}
`;

      // Track WhatsApp conversion
      if (typeof trackWhatsAppClick === 'function') {
        trackWhatsAppClick(service, orderData.total);
      }

      window.open('https://wa.me/525540219892?text=' + encodeURIComponent(msg), '_blank');
    }

    // SISTEMA DINAMICO PER POSTI DISPONIBILI (le copie sono ora fisse)
    function calculateDynamicStats() {
      const now = new Date();
      const currentHour = now.getHours();
      const currentMinute = now.getMinutes();
      const currentDay = now.getDay(); // 0 = Domenica, 1 = Luned√¨, etc.
      const currentDate = now.toISOString().slice(0, 10); // YYYY-MM-DD
      
      // Orari di apertura: Luned√¨-Venerd√¨ 8:30-18:00, Sabato-Domenica 8:30-14:00
      const isWeekday = currentDay >= 1 && currentDay <= 5; // Luned√¨-Venerd√¨
      
      // Controlla se √® aperto (dopo le 8:30 e prima della chiusura)
      const isAfterOpening = (currentHour > 8) || (currentHour === 8 && currentMinute >= 30);
      const isOpen = isWeekday ? 
        (isAfterOpening && currentHour < 18) :
        (isAfterOpening && currentHour < 14);
      
      // DEBUG: Log per verificare gli orari
      console.log('üïê Orari debug:', {
        currentHour,
        currentMinute,
        currentDay,
        isWeekday,
        isAfterOpening,
        isOpen,
        weekdayHours: '8:30-18:00',
        weekendHours: '8:30-14:00'
      });
      
      if (!isOpen) {
        // Se chiuso, mostra gli ultimi 3 slot per oggi
        // Determina se mostrare 4 o 2 slot basato sull'orario CDMX
        const currentHourCDMX = new Date().getHours();
        const lastSlots = (currentHourCDMX >= 18 || currentHourCDMX < 8) ? 2 : 4;
        
        return {
          copies: 0, // Non pi√π utilizzato - le copie sono fisse "12.2M +"
          availableSlots: lastSlots,
          isOpen: false
        };
      }
      
      // Calcola minuti dall'apertura
      const openingHour = 8;
      const openingMinute = 30;
      let minutesSinceOpening;
      
      if (isWeekday) {
        // Luned√¨-Venerd√¨: 8:30-18:00 (9.5 ore = 570 minuti)
        minutesSinceOpening = (currentHour - openingHour) * 60 + (currentMinute - openingMinute);
        if (minutesSinceOpening < 0) minutesSinceOpening = 0;
      } else {
        // Weekend: 8:30-14:00 (5.5 ore = 330 minuti)
        minutesSinceOpening = (currentHour - openingHour) * 60 + (currentMinute - openingMinute);
        if (minutesSinceOpening < 0) minutesSinceOpening = 0;
      }
      
      // Genera seed basato su data per variabilit√† giornaliera
      const dateSeed = currentDate.split('-').join('');
      const dailyVariation = (parseInt(dateSeed) % 100) / 100; // 0-1
      
      // NON calcoliamo pi√π le copie fatte oggi - ora mostriamo il totale storico
      // Il contatore mostra "12.2M +" come copie totali realizzate
      const copies = 0; // Non pi√π utilizzato
      
      // Calcola posti disponibili per consegna oggi
      const maxSlotsPerDay = isWeekday ? 15 : 8; // Pi√π slot nei giorni feriali
      const slotsPerHour = maxSlotsPerDay / (isWeekday ? 9.5 : 5.5); // Slot per ora
      const usedSlots = Math.floor((minutesSinceOpening / 60) * slotsPerHour);
      const availableSlots = Math.max(0, maxSlotsPerDay - usedSlots);
      
      console.log('üìä Posti disponibili:', {
        maxSlotsPerDay,
        slotsPerHour,
        minutesSinceOpening,
        usedSlots,
        availableSlots
      });
      
      return {
        copies: 0, // Non pi√π utilizzato - le copie sono fisse "12.2M +"
        availableSlots: availableSlots,
        isOpen: true
      };
    }
    
    // Aggiorna contatori dinamici (solo posti disponibili)
    function updateDynamicCounters() {
      const stats = calculateDynamicStats();
      
      // NON aggiorniamo pi√π il contatore copie - ora √® fisso "12.2M +"
      // Il contatore mostra le copie totali realizzate, non quelle di oggi
      
      // Aggiorna posti disponibili
      const scarcityBadges = document.querySelectorAll('.scarcity-badge');
      scarcityBadges.forEach(badge => {
        if (stats.isOpen) {
          if (stats.availableSlots > 0) {
            badge.textContent = `‚è∞ √öltimos ${stats.availableSlots} lugares para entrega hoy`;
          } else {
            badge.textContent = `‚è∞ Sin lugares disponibles para hoy`;
          }
        } else {
          badge.textContent = `‚è∞ √öltimos ${stats.availableSlots} lugares para entrega hoy`;
        }
      });
    }
    
    // Inizializza contatori dinamici (solo posti disponibili)
    updateDynamicCounters();
    
    // Aggiorna ogni minuto (solo posti disponibili)
    setInterval(updateDynamicCounters, 60000);
    
    // Aggiorna contatori quando si torna alla homepage (solo posti disponibili)
    const originalShowHomePage = showHomePage;
    showHomePage = function() {
      originalShowHomePage();
      updateDynamicCounters();
    };

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', (e) => {
        const id = anchor.getAttribute('href');
        const target = document.querySelector(id);
        if (target && homepage && homepage.style.display !== 'none') {
          e.preventDefault();
          
          // Calcola offset per header fisso
          const headerHeight = document.querySelector('header')?.offsetHeight || 80;
          const targetPosition = target.offsetTop - headerHeight - 20; // 20px di margine extra
          
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
          
          // Evidenzia la sezione target con un effetto visivo
          if (target.id === 'services-packages') {
            target.style.animation = 'highlightSection 2s ease-out';
            setTimeout(() => {
              target.style.animation = '';
            }, 2000);
          }
        }
      });
    });

    // Sistema di galleria rimosso per evitare conflitti con il carosello di libri

    // Initialize reviews - Forza il caricamento
    console.log('üöÄ Inizializzando recensioni...');
    
    // Test immediato
    testReviews();
    
    // Backup con timeout
    setTimeout(() => {
      console.log('‚è∞ Timeout backup - caricamento recensioni...');
      displayReviews();
    }, 1000);



    // Global functions
    window.showHomePage = showHomePage;
    window.showBlogPage = showBlogPage;
    window.nextStep = nextStep;
    window.prevStep = prevStep;
    window.submitOrder = submitOrder;
    // Funzioni galleria rimosse per evitare conflitti
    

    
            // Make review functions available globally
        // window.refreshReviews = refreshReviews; // Funzione non definita
        window.testReviews = testReviews;
    
    // Service Worker for caching (commented out to avoid 404 errors)
    /*
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
    */
    
    // Funzione di verifica elementi pagamento
    function verifyPaymentElements() {
      // Verifica che tutti gli elementi necessari per il pagamento esistano
      const elements = {
        'payment-confirmation': 'Conferma pagamento',
        'payment-method-info': 'Info metodo pagamento',
        'change-payment-btn': 'Pulsante cambio pagamento',
        'confirm-payment-btn': 'Pulsante conferma pagamento',
        'submit-order': 'Pulsante conferma ordine'
      };
      
      console.log('üîç Verifica elementi pagamento...');
      
      for (const [id, description] of Object.entries(elements)) {
        const element = document.getElementById(id);
        if (element) {
          console.log(`‚úÖ ${description} trovato (${id})`);
        } else {
          console.error(`‚ùå ${description} NON trovato (${id})`);
        }
      }
      
      // Verifica stato iniziale
      console.log('üìä Stato iniziale ordine:', {
        payment: orderData.payment,
        paymentConfirmed: orderData.paymentConfirmed
      });
    }
    
    // RIMOSSO: Pulsante di debug pagamento
    
    // Funzione per controllare l'URL iniziale
    function checkInitialURL() {
      const hash = window.location.hash;
      const url = window.location.href;
      
      console.log('üîç Controllo URL iniziale:', { hash, url });
      
      if (hash === '#blog') {
        console.log('üîç URL iniziale contiene #blog, mostrando sezione blog');
        showBlogPage();
      } else if (hash === '#order') {
        console.log('üîç URL iniziale contiene #order, mostrando flusso ordine inline');
        showOrderPage(false);
      } else if (url.includes('/blog') || url.includes('blogpage')) {
        console.log('üîç URL contiene /blog, mostrando sezione blog');
        showBlogPage();
      } else {
        console.log('üîç URL iniziale pulito, mostrando homepage');
        showHomePage();
      }
    }
    
    // Performance monitoring
    window.addEventListener('load', () => {
      // Track Core Web Vitals
      if ('PerformanceObserver' in window) {
        const observer = new PerformanceObserver((list) => {
          for (const entry of list.getEntries()) {
            if (entry.entryType === 'largest-contentful-paint') {
              gtag('event', 'largest_contentful_paint', {
                'event_category': 'web_vitals',
                'value': Math.round(entry.startTime),
                'event_label': 'LCP'
              });
            }
            if (entry.entryType === 'first-input') {
              gtag('event', 'first_input_delay', {
                'event_category': 'web_vitals',
                'value': Math.round(entry.processingStart - entry.startTime),
                'event_label': 'FID'
              });
            }
          }
        });
        observer.observe({ entryTypes: ['largest-contentful-paint', 'first-input'] });
      }
    });
    

      });
    
    // MENU MOBILE SEMPLIFICATO
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileSlideMenu');
      menu.classList.toggle('open');
    }
    
    function closeMobileSlideMenu() {
      const menu = document.getElementById('mobileSlideMenu');
      menu.classList.remove('open');
    }
    
    // Test delle correzioni mobile (solo in modalit√† debug)
    if (window.location.search.includes('debug=true')) {
      console.log('üß™ Modalit√† debug attivata - Test correzioni mobile');
      
      // Test 1: Verifica overflow orizzontale
      function testHorizontalOverflow() {
        const bodyWidth = document.body.scrollWidth;
        const windowWidth = window.innerWidth;
        const hasOverflow = bodyWidth > windowWidth;
        
        console.log(`üìè Test Overflow: ${hasOverflow ? '‚ùå FAIL' : '‚úÖ PASS'} (${bodyWidth}px vs ${windowWidth}px)`);
        return !hasOverflow;
      }
      
      // Test 2: Verifica footer position
      function testFooterPosition() {
        const footer = document.querySelector('footer');
        if (!footer) {
          console.log('ü¶∂ Test Footer: ‚ùå FAIL - Footer non trovato');
          return false;
        }
        
        const footerRect = footer.getBoundingClientRect();
        const bodyRect = document.body.getBoundingClientRect();
        const isLastElement = footerRect.bottom >= bodyRect.bottom - 10;
        
        console.log(`ü¶∂ Test Footer: ${isLastElement ? '‚úÖ PASS' : '‚ùå FAIL'}`);
        return isLastElement;
      }
      
      // Esegui test dopo caricamento
      setTimeout(() => {
        const overflowTest = testHorizontalOverflow();
        const footerTest = testFooterPosition();
        
        if (overflowTest && footerTest) {
          console.log('üéâ TUTTE LE CORREZIONI FUNZIONANO!');
        } else {
          console.log('‚ö†Ô∏è Alcune correzioni richiedono attenzione');
        }
      }, 1000);
    }
  </script>
</body>
</html>

